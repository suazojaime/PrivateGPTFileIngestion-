<?xml version="1.0" encoding="UTF-8"?>

<!-- Copyright (c) 2023 Caterpillar -->
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xmlns:condbean="http://www.minestar.au.cat.com/springbeans/condbean"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.minestar.au.cat.com/springbeans/condbean http://www.minestar.au.cat.com/springbeans/condbean/condbeans.xsd
       ">

    <!-- Note that this context is defined in the Platform/Platform_Management extension which means
         that these beans will be available and potentially created when COMMAND is not
         licensed and the "Autonomy" extension is not installed.

         If you want to add a pure-Autonomy bean, add it here instead:
         ~\fleetcommander\src\main\config\ext\Autonomy\Autonomy_Management\xml\application\minetracking\AutonomyServices.xml

         Many of the beans that are currently in this file should probably be moved to the Autonomy extension.
    -->

    <bean id="laneLayoutServiceImpl" class="minestar.mine.service.minemodel.LaneLayoutServiceImpl"
          lazy-init="true" init-method="init" parent="loggerParent" depends-on="registerPlanLaneInformationService">

        <!-- These properties are injected via constructor-arg due to a Spring initialisation race condition
             where the LaneUsageServiceImpl uses the laneLayoutService before it has been properly initialised -->
        <constructor-arg name="laneDao">
            <!-- Make laneDao an inner bean so that no other service can access it directly -->
            <bean class="minestar.mine.persistence.minemodel.LaneDaoImpl" parent="minestarDao">
                <constructor-arg name="sequenceValueService" ref="sequenceValueServiceImpl"/>
            </bean>
        </constructor-arg>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>

        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
        <property name="laneTravelService" ref="laneTravelServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="laneReassignmentService" ref="laneReassignmentServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="cableBridgeService" ref="cableBridgeServiceImpl"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="notification" ref="notification"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="specialSurfacePolygonService" ref="specialSurfacePolygonServiceImpl"/>
        <property name="transactionSynchronizationExecutor" ref="transactionSynchronizationExecutor"/>
        <property name="laneChangeListeners" ref="laneChangeListeners"/>
        <property name="autonomousInclusionZoneOverlaps" ref="autonomousInclusionZoneOverlapsImpl"/>
    </bean>
    
    <condbean:cond withoutLicense="WaterTruck">
	    <bean class="java.util.ArrayList" id="laneChangeListeners">
	        <constructor-arg>
	            <list>
	            <ref bean="zoneLayoutServiceImpl"/>
	            <ref bean="laneTravelServiceImpl"/>
	            <ref bean="laneUsageServiceImpl"/>
	            <ref bean="trafficManagementServiceImpl"/>
	            </list>
	        </constructor-arg>
	    </bean>
    </condbean:cond>
    
    <condbean:cond license="WaterTruck">
	    <bean class="java.util.ArrayList" id="laneChangeListeners">
	        <constructor-arg>
	            <list>
	            <ref bean="zoneLayoutServiceImpl"/>
	            <ref bean="laneTravelServiceImpl"/>
	            <ref bean="laneUsageServiceImpl"/>
	            <ref bean="trafficManagementServiceImpl"/>
	            <ref bean="wateringCircuitServiceImpl"/>
	            </list>
	        </constructor-arg>
	    </bean>
    </condbean:cond>

    <bean id="registerLaneLayoutService" parent="registrationInstance" lazy-init="true" >
        <constructor-arg value="Lane Layout Service"/>
        <constructor-arg value="minestar.mine.service.minemodel.LaneLayoutService"/>
        <constructor-arg ref="laneLayoutServiceImpl"/>
    </bean>

    <bean id="zoneLayoutServiceImpl" class="minestar.mine.service.minemodel.ZoneLayoutServiceImpl"
          lazy-init="true" init-method="init" depends-on="registerUserService">

        <!-- These properties are injected via constructor-arg due to a Spring initialisation race condition
             where the LaneUsageServiceImpl uses the laneLayoutService before it has been properly initialised -->
        <constructor-arg name="zoneDao">
            <bean class="minestar.mine.persistence.minemodel.ZoneDaoImpl" parent="minestarDao">
                <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
                <property name="zonesFeatureBuilder" ref="zonesFeatureBuilder"/>
            </bean>
        </constructor-arg>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>

        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="machineStopService" ref="machineStopServiceImpl"/>
    </bean>

    <bean id="registerZoneLayoutService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Zone Layout Service"/>
        <constructor-arg value="minestar.mine.service.minemodel.ZoneLayoutService"/>
        <constructor-arg ref="zoneLayoutServiceImpl"/>
    </bean>

    <bean id="zoneMakerServiceImpl" class="minestar.mine.service.minemodel.ZoneMakerServiceImpl"
          lazy-init="true">
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
    </bean>

    <bean id="registerZoneMakerService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Zone Maker Service"/>
        <constructor-arg value="minestar.mine.service.minemodel.ZoneMakerService"/>
        <constructor-arg ref="zoneMakerServiceImpl"/>
    </bean>

    <bean id="laneReassignmentServiceImpl" class="minestar.assignment.service.reassignment.LaneReassignmentServiceImpl"
          lazy-init="true" init-method="init">
        <property name="laneReassignmentDao">
            <bean class="minestar.assignment.service.reassignment.LaneReassignmentDaoImpl" parent="minestarDao"/>
        </property>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="hibernateEventListener" ref="hibernateEventListener"/>
        <property name="txManager" ref="minestarTransactionManager"/>
        <property name="auditLogger" ref="auditLogger"/>
    </bean>

    <bean id="registerLaneReassignmentService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Lane Reassignment Service"/>
        <constructor-arg value="minestar.assignment.service.reassignment.LaneReassignmentService"/>
        <constructor-arg ref="laneReassignmentServiceImpl"/>
    </bean>

    <bean id="obstacleServiceImpl" class="minestar.mine.service.minemodel.obstacle.ObstacleServiceImpl" init-method="init">
        <constructor-arg name="obstacleGisDao">
            <bean class="minestar.mine.persistence.minemodel.ObstacleGisDaoImpl">
                <property name="gisAdministrator" ref="gisAdministrator"/>
                <property name="jdbcTemplate" ref="postgisJdbcTemplate"/>
            </bean>
        </constructor-arg>
        <constructor-arg name="obstacleDao">
            <bean class="minestar.mine.persistence.minemodel.ObstacleDaoImpl" parent="minestarDao"/>
        </constructor-arg>
        <constructor-arg name="obstacleClearDao">
            <bean class="minestar.mine.persistence.minemodel.ObstacleClearDaoImpl" parent="minestarDao"/>
        </constructor-arg>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="postgisTxManager" ref="postgisTransactionManager"/>
    </bean>

    <bean id="registerObstacleService" parent="registrationInstance">
        <constructor-arg value="ObstacleService"/>
        <constructor-arg value="minestar.mine.service.minemodel.obstacle.ObstacleService"/>
        <constructor-arg ref="obstacleServiceImpl"/>
    </bean>

    <bean id="hazardLayoutServiceImpl" class="minestar.mine.service.minemodel.HazardLayoutServiceImpl"
          lazy-init="true" init-method="init">
        <property name="hazardDao">
            <bean class="minestar.mine.persistence.minemodel.HazardDaoImpl" parent="minestarDao">
                <constructor-arg name="sequenceValueService" ref="sequenceValueServiceImpl"/>
            </bean>
        </property>
        <property name="hazardTypeDao">
            <bean class="minestar.mine.persistence.minemodel.HazardTypeDaoImpl" parent="minestarDao">
                <constructor-arg name="sequenceValueService" ref="sequenceValueServiceImpl"/>
            </bean>
        </property>
        <property name="obstacleService"  ref="obstacleServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
        <property name="hibernateEventListener" ref="hibernateEventListener"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="registerHazardLayoutService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Hazard Layout Service"/>
        <constructor-arg value="minestar.mine.service.minemodel.HazardLayoutService"/>
        <constructor-arg ref="hazardLayoutServiceImpl"/>
    </bean>

    <bean id="autonomousOperationChecker"
          class="minestar.pitlink.service.awareness.version2.AutonomousOperationCheckerImpl"
          lazy-init="true">
        <constructor-arg name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
    </bean>

    <bean id="truckControlMessagingServiceImpl"
          class="minestar.autonomy.service.communications.TruckControlMessagingServiceImpl"
          lazy-init="true" init-method="init">
        <constructor-arg name="fieldCommunicationsService" ref="deferredFieldCommunicationsService" />
        <constructor-arg name="notification" ref="notification"/>
    </bean>

    <bean id="trafficManagementServiceImpl"
          class="minestar.autonomy.service.traffic.TrafficManagementServiceImpl"
          parent="loggerParent"
          lazy-init="true">
        <property name="auditLogger" ref="auditLogger"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="fuelBayPlanningService" ref="fuelBayPlanningServiceImpl"/>
        <property name="payloadServicePlanningService" ref="payloadServicePlanningServiceImpl"/>
        <property name="waterRefillStationPlanningService" ref="waterRefillStationPlanningServiceImpl"/>
        <property name="workshopPlanningService" ref="workshopPlanningServiceImpl"/>
        <property name="layoverStationPlanningService" ref="layoverStationPlanningServiceImpl"/>
        <property name="planAssociationService" ref="planAssociationServiceImpl"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
        <property name="laneTravelService" ref="laneTravelServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="machineStopService" ref="machineStopServiceImpl"/>
        <property name="dynamicModelUpdateService" ref="dynamicModelUpdateServiceImpl"/>
        <property name="scriptingService" ref="scriptingServiceImpl"/>
        <property name="modeMessageService" ref="modeMessageServiceImpl"/>
        <property name="machineModeService" ref="machineModeServiceImpl"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
        <property name="autonomousOperationChecker" ref="autonomousOperationChecker"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="truckControlMessagingService" ref="truckControlMessagingServiceImpl" />
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl" />
        <property name="notification" ref="notification"/>
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl" />
        <property name="vimsSensorStatusService" ref="vimsSensorStatusServiceImpl" />
        <property name="crusherDumpStatusHandler" ref="crusherDumpStatusHandlerImpl" />
        <property name="truckLaneOverlapChecker" ref="truckLaneOverlapCheckerImpl" />
        <property name="assignmentRequestService" ref="assignmentRequestServiceImpl" />
        <property name="trafficManagementsDestinationResolver" ref="trafficManagementDestinationResolverImpl" />
        <property name="planQueueResolver" ref="planQueueResolverImpl" />
        <property name="spoilPileManagementService" ref="spoilPileManagementServiceImpl"/>
        <property name="materialManagementService" ref="materialManagementServiceImpl"/>
        <property name="materialTrackingService" ref="materialTrackingServiceImpl"/>
        <property name="delayManagementService" ref="delayManagementServiceImpl" />
    </bean>

    <bean id="registerTrafficManagementService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Traffic Management Service"/>
        <constructor-arg value="minestar.autonomy.service.traffic.TrafficManagementService"/>
        <constructor-arg ref="trafficManagementServiceImpl"/>
    </bean>

    <bean id="onboardPermissionsServiceImpl"
          class="minestar.autonomy.service.traffic.OnboardPermissionsServiceImpl"
          init-method="start" destroy-method="stop"
          lazy-init="true">
        <property name="machineStopService" ref="machineStopServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="autonomousOperationChecker" ref="autonomousOperationChecker"/>
        <property name="dynamicModelUpdateService" ref="dynamicModelUpdateServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="truckControlMessagingService" ref="truckControlMessagingServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="assignmentRequestService" ref="assignmentRequestServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="autonomousInclusionZoneOverlaps" ref="autonomousInclusionZoneOverlapsImpl"/>
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
    </bean>

    <bean id="registerOnboardPermissionsService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Onboard Permissions Service"/>
        <constructor-arg value="minestar.autonomy.service.traffic.OnboardPermissionsService"/>
        <constructor-arg ref="onboardPermissionsServiceImpl"/>
    </bean>

    <bean id="autonomousInclusionZoneOverlapsImpl" class="minestar.autonomy.service.lane.AutonomousInclusionZoneOverlapsImpl"
          lazy-init="true" init-method="init">
        <constructor-arg name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
    </bean>

    <bean id="registerAutonomousInclusionZoneOverlaps" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Autonomous Inclusion Zone Overlaps"/>
        <constructor-arg value="minestar.autonomy.service.lane.AutonomousInclusionZoneOverlaps"/>
        <constructor-arg ref="autonomousInclusionZoneOverlapsImpl"/>
    </bean>

    <bean id="vehicleStateManagerImpl" class="minestar.autonomy.service.state.VehicleStateManager"
          lazy-init="true">
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
    </bean>

    <bean id="laneUsageStateServiceImpl" class="minestar.autonomy.service.lane.LaneUsageStateServiceImpl" lazy-init="true">
    </bean>

    <bean id="spoilPileManagementServiceImpl"
          class="minestar.autonomy.service.spoilpile.SpoilPileManagementServiceImpl"
          lazy-init="true" init-method="init">
        <property name="notification" ref="notification"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="materialManagementService" ref="materialManagementServiceImpl"/>
        <property name="spoilPileLayoutProvider" ref="spoilPileLayoutProviderImpl"/>
        <property name="spoilPileDao">
            <bean class="minestar.mine.persistence.minemodel.SpoilPileDaoImpl" parent="minestarDao">
                <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
            </bean>
        </property>
        <property name="hibernateEventListener" ref="hibernateEventListener"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="spoilPileLayoutProviderImpl"
          class="minestar.autonomy.service.spoilpile.SpoilPileLayoutProviderImpl"
          lazy-init="true">
        <property name="topologyService" ref="topologyServiceImpl"/>
    </bean>

    <bean id="registerSpoilPileManagementService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Spoil Pile Management Service"/>
        <constructor-arg value="minestar.autonomy.service.spoilpile.SpoilPileManagementService"/>
        <constructor-arg ref="spoilPileManagementServiceImpl"/>
    </bean>

    <bean id="registerLockController" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Lock Controller"/>
        <constructor-arg value="minestar.autonomy.service.lock.LockController"/>
        <constructor-arg ref="lockControllerImpl"/>
    </bean>

    <bean id="registerASUMessageService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="ASU Message Service"/>
        <constructor-arg value="minestar.autonomy.service.autstatedata.AutonomousStateUpdateMessageService"/>
        <constructor-arg ref="autonomousStateUpdateMessageServiceImpl"/>
    </bean>

    <bean id="autonomousStateServiceImpl"
          class="minestar.autonomy.service.state.AutonomousStateServiceImpl"
          init-method="start" destroy-method="stop"
          lazy-init="true">
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
        <property name="machineModeService" ref="machineModeServiceImpl"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="machineIsolationService" ref="machineIsolationServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="vehicleStateManager" ref="vehicleStateManagerImpl"/>
        <property name="secondaryPermissionChecker" ref="secondaryPermissionCheckerImpl"/>
        <property name="laneUsageStateService" ref="laneUsageStateServiceImpl"/>
        <property name="spottingTruckMonitor" ref="spottingTruckMonitorImpl"/>
        <property name="laneTravelService" ref="laneTravelServiceImpl"/>
    </bean>

    <bean id="registerAutonomousStateService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Autonomous State Service"/>
        <constructor-arg value="minestar.autonomy.service.state.AutonomousStateService"/>
        <constructor-arg ref="autonomousStateServiceImpl"/>
    </bean>

    <bean id="dynamicModelUpdateServiceImpl"
          class="minestar.autonomy.service.sync.impl.DynamicModelUpdateServiceImpl"
          lazy-init="true" init-method="init" destroy-method="shutdown">
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="scriptingService" ref="scriptingServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="speedManagementServiceImpl"
          class="minestar.autonomy.service.speed.SpeedManagementServiceImpl"
          init-method="init" lazy-init="true">
        <constructor-arg name="auditLogger" ref="auditLogger"/>
        <constructor-arg name="derateDao">
            <bean class="minestar.mine.persistence.minemodel.DerateDaoImpl" parent="minestarDao"/>
        </constructor-arg>
        <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
    </bean>

    <bean id="registerSpeedManagementService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Speed Management Service"/>
        <constructor-arg value="minestar.autonomy.service.speed.SpeedManagementService"/>
        <constructor-arg ref="speedManagementServiceImpl"/>
    </bean>

    <bean id="truckLaneOverlapCheckerImpl"
          class="minestar.autonomy.service.state.TruckLaneOverlapCheckerImpl"
          lazy-init="true">
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
    </bean>

    <bean id="lockPersistentStore"
          class="minestar.autonomy.service.lock.LockPersistentStore"
          lazy-init="true" init-method="initialise">
        <property name="lockDao" ref="lockDao"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="lockUpdatePublisher"
          class="minestar.autonomy.service.lock.LockUpdatePublisher"
          lazy-init="true">
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="transactionSynchronizationExecutor"
          class="minestar.mine.service.minemodel.TransactionSynchronizationExecutor"
          lazy-init="true"/>

    <bean id="lockControllerImpl" class="minestar.autonomy.service.lock.LockControllerImpl" lazy-init="true">
        <constructor-arg name="areaLockController">
            <bean class="minestar.autonomy.service.lock.AreaLockControllerImpl" init-method="initialise">
                <property name="notification" ref="notification"/>
                <property name="auditLogger" ref="auditLogger"/>
                <property name="lockPersistentStore" ref="lockPersistentStore"/>
                <property name="lockUpdatePublisher" ref="lockUpdatePublisher"/>
                <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
                <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
                <property name="laneUsageService" ref="laneUsageServiceImpl"/>
                <property name="pitModelService" ref="pitModelServiceImpl"/>
            </bean>
        </constructor-arg>
        <constructor-arg name="machineLockController">
            <bean class="minestar.autonomy.service.lock.MachineLockControllerImpl" init-method="initialise">
                <property name="notification" ref="notification"/>
                <property name="auditLogger" ref="auditLogger"/>
                <property name="lockPersistentStore" ref="lockPersistentStore"/>
                <property name="lockUpdatePublisher" ref="lockUpdatePublisher"/>
            </bean>
        </constructor-arg>
        <constructor-arg name="laneLockController">
            <bean class="minestar.autonomy.service.lock.LaneLockControllerImpl" init-method="initialise">
                <property name="notification" ref="notification"/>
                <property name="auditLogger" ref="auditLogger"/>
                <property name="lockPersistentStore" ref="lockPersistentStore"/>
                <property name="lockUpdatePublisher" ref="lockUpdatePublisher"/>
            </bean>
        </constructor-arg>
        <constructor-arg name="siteLockController">
            <bean class="minestar.autonomy.service.lock.SiteLockControllerImpl" init-method="initialise">
                <property name="notification" ref="notification"/>
                <property name="auditLogger" ref="auditLogger"/>
                <property name="lockPersistentStore" ref="lockPersistentStore"/>
                <property name="lockUpdatePublisher" ref="lockUpdatePublisher"/>
            </bean>
        </constructor-arg>
        <constructor-arg name="inclusionLockController">
            <bean class="minestar.autonomy.service.lock.AutonomousInclusionLockControllerImpl">
                <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
                <constructor-arg name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
                <constructor-arg name="laneUsageService" ref="laneUsageServiceImpl"/>
            </bean>
        </constructor-arg>
        <constructor-arg name="notification" ref="notification"/>
    </bean>

    <bean id="laneTravelServiceImpl" class="minestar.autonomy.service.lane.travel.LaneTravelServiceImpl"
          lazy-init="true" init-method="init" destroy-method="shutdown" depends-on="registerOnboardHardwareService">
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
        <property name="laneTravelPersistentStore">
            <bean class="minestar.autonomy.service.lane.travel.LaneTravelPersistentStore" init-method="initialise">
                <constructor-arg name="laneTravelDao" ref="laneTravelDao"/>
                <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
                <constructor-arg name="txManager" ref="minestarTransactionManager"/>
            </bean>
        </property>
        <property name="lockController" ref="lockControllerImpl"/>
        <property name="notification" ref="notification"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="surfaceManager" ref="surfaceManager"/>
        <property name="planAssociationService" ref="planAssociationServiceImpl"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
    </bean>

    <bean id="registerLaneTravelService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Lane Travel Service"/>
        <constructor-arg value="minestar.autonomy.service.lane.travel.LaneTravelService"/>
        <constructor-arg ref="laneTravelServiceImpl"/>
    </bean>

    <bean id="laneUsageServiceImpl" class="minestar.autonomy.service.lane.LaneUsageServiceImpl"
            parent="loggerParent" lazy-init="true" init-method="init">
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="laneTravelService" ref="laneTravelServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="scriptingService" ref="scriptingServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="machineIsolationEventHandler" ref="machineIsolationEventHandlerImpl"/>
        <property name="laneUsageConfig" ref="laneUsageConfigImpl" />
        <property name="lockController" ref="lockControllerImpl"/>
        <property name="onboardPermissionsService" ref="onboardPermissionsServiceImpl"/>
        <property name="machineModeService" ref="machineModeServiceImpl"/>
        <property name="machineStopService" ref="machineStopServiceImpl"/>
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="truckLaneOverlapChecker" ref="truckLaneOverlapCheckerImpl"/>
        <property name="assignmentRequestService" ref="assignmentRequestServiceImpl"/>
        <property name="machineHeartbeatListener" ref="machineHeartbeatListenerImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
        <property name="txManager" ref="minestarTransactionManager"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
        <property name="planAssociationService" ref="planAssociationServiceImpl"/>
    </bean>

    <bean id="laneUsageConfigImpl" class="minestar.autonomy.service.lane.LaneUsageConfigImpl">
        <property name="allowStopInIntersection" value="${minestar.autonomy.util.Config@ALLOW_STOP_IN_INTERSECTION}"/>
        <property name="allowFollowingTrucksInIntersection" value="${minestar.autonomy.util.Config@ALLOW_FOLLOWING_TRUCKS_IN_INTERSECTION}"/>
        <property name="explicitControllerLockOnModeChange" value="${minestar.autonomy.util.Config@EXPLICIT_CONTROLLER_LOCK_ON_MODE_CHANGE}"/>
        <property name="useOptimizedQueuing" value="${minestar.autonomy.util.Config@OPTIMIZE_QUEUE_ARRIVAL}"/>
        <property name="restorePermissionsAfterSiteStop" value= "${minestar.autonomy.util.Config@RESTORE_PERMISSIONS_AFTER_SITE_STOP}"/>
        <property name="maximumPermissionSoftLimit" value= "${minestar.autonomy.util.Config@MAXIMUM_PERMISSION_SOFT_LIMIT}"/>
        <property name="minimumPermittedDistance" value= "${minestar.autonomy.util.Config@MINIMUM_PERMITTED_DISTANCE}"/>
        <property name="minimumPermittedDistanceForRequestingTrucks" value= "${minestar.autonomy.util.Config@MINIMUM_PERMITTED_DISTANCE_FOR_REQUESTING_TRUCKS}"/>
        <property name="smallLaneLength" value= "${minestar.autonomy.service.planning.throughput.Config@SMALL_LANE_LENGTH}"/>
        <property name="queueAreaLength" value="${minestar.autonomy.util.Config@QUEUE_AREA_LENGTH}"/>
        <property name="zoneLockStopsTrucksImmediately" value="${minestar.autonomy.service.lock.Config@zoneLock.stopTrucksImmediately}"/>
        <property name="preventPermissionsToShortLane" value="${minestar.autonomy.util.Config@PREVENT_PERMISSIONS_TO_SHORT_LANE}"/>
        <property name="maximizePermissionsInNarrowAreas" value="${minestar.autonomy.util.Config@MAXIMIZE_PERMISSIONS_IN_NARROW_AREAS}"/>
        <property name="dipperReportProcessingPolicy" value="${minestar.autonomy.util.Config@DIPPER_REPORT_PROCESSING_POLICY}"/>
        <property name="ignoreDippersWhenAnotherTruckIsCloserToLoader" value="${minestar.autonomy.util.Config@IGNORE_DIPPERS_WHEN_ANOTHER_TRUCK_IS_CLOSER_TO_LOADER}"/>
        <property name="useRequestPermissionsService" value="${minestar.autonomy.util.Config@USE_REQUEST_PERMISSIONS_SERVICE}"/>
    </bean>

    <bean id="registerLaneUsageService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Lane Usage Service"/>
        <constructor-arg value="minestar.autonomy.service.lane.LaneUsageService"/>
        <constructor-arg ref="laneUsageServiceImpl"/>
    </bean>

    <bean id="laneMaintenanceServiceImpl"
          class="minestar.autonomy.service.lane.LaneMaintenanceServiceImpl"
          lazy-init="true">
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
    </bean>

    <bean id="registerLaneMaintenanceService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Lane Maintenance Service"/>
        <constructor-arg value="minestar.autonomy.service.lane.LaneMaintenanceService"/>
        <constructor-arg ref="laneMaintenanceServiceImpl"/>
    </bean>

    <bean id="displayableLaneNotifier" class="minestar.mine.service.minemodel.DisplayableLaneNotifier"
            init-method="init">
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
    </bean>

    <bean id="finderLaneNotifier" class="minestar.mine.service.minemodel.FinderLaneNotifier"
          init-method="init">
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="scriptingServiceImpl" class="minestar.autonomy.service.script.ScriptingServiceImpl" init-method="init"
          lazy-init="true">
        <property name="scriptDao">
            <bean class="minestar.mine.persistence.minemodel.script.ScriptDaoImpl" parent="minestarDao">
                <constructor-arg ref="sequenceValueServiceImpl"/>
            </bean>
        </property>
        <property name="serverScriptDao">
            <bean class="minestar.mine.persistence.minemodel.script.ServerScriptDaoImpl" parent="minestarDao"/>
        </property>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="fuelBayPlanningService" ref="fuelBayPlanningServiceImpl"/>
        <property name="workshopPlanningService" ref="workshopPlanningServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="hibernateEventListener" ref="hibernateEventListener"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="registerScriptingService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Scripting Service"/>
        <constructor-arg value="minestar.autonomy.service.script.ScriptingService"/>
        <constructor-arg ref="scriptingServiceImpl"/>
    </bean>

    <bean id="autonomousTruckConfigServiceImpl"
          class="minestar.pitlink.service.truckconfig.AutonomousTruckConfigServiceImpl">
        <constructor-arg name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
    </bean>

    <bean id="registerAutonomousTruckConfigService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Autonomous Truck Config Service"/>
        <constructor-arg value="minestar.pitlink.service.truckconfig.AutonomousTruckConfigService"/>
        <constructor-arg ref="autonomousTruckConfigServiceImpl"/>
    </bean>

    <bean id="regionServiceImpl" class="minestar.autonomy.service.region.RegionServiceImpl" lazy-init="true"
          init-method="init">
        <property name="regionDao">
            <bean class="minestar.mine.persistence.minemodel.RegionDaoImpl" parent="minestarDao">
                <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
            </bean>
        </property>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="hibernateEventListener" ref="hibernateEventListener"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="registerRegionServiceImpl" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Region Service"/>
        <constructor-arg value="minestar.autonomy.service.region.RegionService"/>
        <constructor-arg ref="regionServiceImpl"/>
    </bean>

    <bean id="deadLaneManagerImpl" class="minestar.autonomy.service.planning.util.DeadLaneManagerImpl" lazy-init="true">
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
    </bean>

    <bean id="laneManagementFactory" class="minestar.autonomy.service.planning.LaneManagementFactory" lazy-init="true">
        <property name="notification" ref="notification"/>
        <property name="deadLaneManager" ref="deadLaneManagerImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="planLaneInformationServiceImpl" class="minestar.autonomy.service.planning.PlanLaneInformationServiceImpl"
          lazy-init="true" init-method="init">
        <property name="hibernateEventListener" ref="hibernateEventListener"/>
        <property name="notification" ref="notification"/>
        <property name="planLaneInformationDao">
            <bean class="minestar.mine.persistence.minemodel.planning.PlanLaneInformationDaoImpl" parent="minestarDao"/>
        </property>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="registerPlanLaneInformationService" parent="registrationInstance" lazy-init="true" >
        <constructor-arg value="Plan Lane Information Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.PlanLaneInformationService"/>
        <constructor-arg ref="planLaneInformationServiceImpl"/>
    </bean>

    <bean id="spotPointLaneDataPersistenceStore" class="minestar.autonomy.service.planning.persistence.SpotPointLaneDataPersistenceStore"
          init-method="init" lazy-init="true">
        <property name="notification" ref="notification"/>
        <property name="planPersister" ref="planPersister"/>
        <property name="spotPointLaneDataDao">
            <bean class="minestar.mine.persistence.minemodel.planning.SpotPointLaneDataDaoImpl" parent="minestarDao"/>
        </property>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="planPersister" class="minestar.mine.persistence.minemodel.planning.PlanPersister" lazy-init="true">
        <constructor-arg name="planDao">
            <bean class="minestar.mine.persistence.minemodel.planning.PlanDaoImpl" parent="minestarDao"/>
        </constructor-arg>
        <constructor-arg name="planGroupDao">
            <bean class="minestar.mine.persistence.minemodel.planning.PlanGroupDaoImpl" parent="minestarDao"/>
        </constructor-arg>
        <constructor-arg name="spotPointDao">
            <bean class="minestar.mine.persistence.minemodel.planning.SpotPointDaoImpl" parent="minestarDao"/>
        </constructor-arg>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
    </bean>

    <bean id="loadPlanningServiceImpl" class="minestar.autonomy.service.planning.loadplanning.LoadPlanningServiceImpl"
          init-method="init" lazy-init="true" parent="loggerParent">
        <constructor-arg name="planPersister" ref="planPersister"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>

        <property name="spotPointLaneDataPersistenceStore" ref="spotPointLaneDataPersistenceStore"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="laneManagementFactory" ref="laneManagementFactory"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="transactionSynchronizationExecutor" ref="transactionSynchronizationExecutor"/>
        <property name="planAssociationService" ref="planAssociationServiceImpl"/>
    </bean>

    <bean id="registerLoadPlanningService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Load Planning Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.loadplanning.LoadPlanningService"/>
        <constructor-arg ref="loadPlanningServiceImpl"/>
    </bean>

    <bean id="loadPlanningMessageHandlerImpl" class="minestar.autonomy.service.planning.loadplanning.LoadPlanningMessageHandlerImpl"
          init-method="init" lazy-init="false">
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="txManager" ref="minestarTransactionManager"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
    </bean>

    <bean id="registerLoadPlanningMessageHandler" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Load Planning Message Handler"/>
        <constructor-arg value="minestar.autonomy.service.planning.loadplanning.LoadPlanningMessageHandler"/>
        <constructor-arg ref="loadPlanningMessageHandlerImpl"/>
    </bean>

    <bean id="dumpGroupZoneHelper" class="minestar.autonomy.service.planning.dumpplanning.DumpGroupZoneHelperImpl"
          init-method="init" lazy-init="true">
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl" />
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl" />
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
    </bean>

    <bean id="dumpPlanningServiceImpl" class="minestar.autonomy.service.planning.dumpplanning.DumpPlanningServiceImpl"
          init-method="init" lazy-init="true" parent="loggerParent">
        <constructor-arg name="planPersister" ref="planPersister"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>

        <property name="spotPointLaneDataPersistenceStore" ref="spotPointLaneDataPersistenceStore"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="laneUsageStateService" ref="laneUsageStateServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="laneManagementFactory" ref="laneManagementFactory"/>
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="delayManagementService" ref="delayManagementServiceImpl" />
        <property name="mineFleetService" ref="mineFleetServiceImpl" />
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="transactionSynchronizationExecutor" ref="transactionSynchronizationExecutor"/>
        <property name="dumpGroupZoneHelper" ref="dumpGroupZoneHelper"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="spoilPileManagementService" ref="spoilPileManagementServiceImpl"/>
        <property name="materialManagementService" ref="materialManagementServiceImpl"/>
        <property name="laneTravelService" ref="laneTravelServiceImpl"/>
        <property name="lockController" ref="lockControllerImpl"/>
        <property name="machineIsolationService" ref="machineIsolationServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="registerDumpPlanningService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Dump Planning Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.dumpplanning.DumpPlanningService"/>
        <constructor-arg ref="dumpPlanningServiceImpl"/>
    </bean>

    <bean id="fieldDumpRequestServiceImpl" class="minestar.autonomy.service.planning.dumpplanning.FieldDumpRequestServiceImpl" lazy-init="false" init-method="init" destroy-method="destroy">
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="planAssociationService" ref="planAssociationServiceImpl"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="notification" ref="notification"/>
    </bean>


    <bean id="dozerManagedUtilService" class="minestar.autonomy.service.planning.dumpplanning.DozerManagedUtilService"
         lazy-init="true" >
    </bean>

    <bean id="fuelBayPlanningServiceImpl" class="minestar.autonomy.service.planning.stationplanning.fuelbay.FuelBayPlanningServiceImpl"
          init-method="init" lazy-init="true">
        <constructor-arg name="planPersister" ref="planPersister"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>

        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="spotPointLaneDataPersistenceStore" ref="spotPointLaneDataPersistenceStore"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="transactionSynchronizationExecutor" ref="transactionSynchronizationExecutor"/>
    </bean>

    <bean id="registerFuelBayPlanningService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Fuel Bay Planning Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.stationplanning.fuelbay.FuelBayPlanningService"/>
        <constructor-arg ref="fuelBayPlanningServiceImpl"/>
    </bean>

    <bean id="waterRefillStationPlanningServiceImpl" class="minestar.autonomy.service.planning.stationplanning.waterrefillstation.WaterRefillStationPlanningServiceImpl"
          init-method="init" lazy-init="true">
        <constructor-arg name="planPersister" ref="planPersister"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>

        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="spotPointLaneDataPersistenceStore" ref="spotPointLaneDataPersistenceStore"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="transactionSynchronizationExecutor" ref="transactionSynchronizationExecutor"/>
    </bean>

    <bean id="registerWaterRefillStationPlanningService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Water Refill Station Planning Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.stationplanning.waterrefillstation.WaterRefillStationPlanningService"/>
        <constructor-arg ref="waterRefillStationPlanningServiceImpl"/>
    </bean>

    <bean id="payloadServicePlanningServiceImpl" class="minestar.autonomy.service.planning.stationplanning.payloadservice.PayloadServicePlanningServiceImpl"
          init-method="init" lazy-init="true">
        <constructor-arg name="planPersister" ref="planPersister"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>

        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="spotPointLaneDataPersistenceStore" ref="spotPointLaneDataPersistenceStore"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="transactionSynchronizationExecutor" ref="transactionSynchronizationExecutor"/>
    </bean>

    <bean id="registerPayloadServicePlanningService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Payload Service Planning Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.stationplanning.payloadservice.PayloadServicePlanningService"/>
        <constructor-arg ref="payloadServicePlanningServiceImpl"/>
    </bean>

    <bean id="workshopPlanningServiceImpl" class="minestar.autonomy.service.planning.stationplanning.workshop.WorkshopPlanningServiceImpl"
          init-method="init" lazy-init="true">
        <constructor-arg name="planPersister" ref="planPersister"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>

        <property name="spotPointLaneDataPersistenceStore" ref="spotPointLaneDataPersistenceStore"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="transactionSynchronizationExecutor" ref="transactionSynchronizationExecutor"/>
    </bean>

    <bean id="registerWorkshopPlanningService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Workshop Planning Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.stationplanning.workshop.WorkshopPlanningService"/>
        <constructor-arg ref="workshopPlanningServiceImpl"/>
    </bean>

    <bean id="layoverStationPlanningServiceImpl" class="minestar.autonomy.service.planning.stationplanning.layoverstation.LayoverStationPlanningServiceImpl"
          init-method="init" lazy-init="true">
        <constructor-arg name="planPersister" ref="planPersister"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>

        <property name="spotPointLaneDataPersistenceStore" ref="spotPointLaneDataPersistenceStore"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="transactionSynchronizationExecutor" ref="transactionSynchronizationExecutor"/>
    </bean>

    <bean id="registerLayoverStationPlanningService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Layover Station Planning Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.stationplanning.layoverstation.LayoverStationPlanningService"/>
        <constructor-arg ref="layoverStationPlanningServiceImpl"/>
    </bean>

    <bean id="planConnectorFactoryImpl"
          class="minestar.autonomy.service.planning.generic.PlanConnectorFactoryImpl"
          lazy-init="true">
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
    </bean>

    <bean id="genericLanePlanningServiceImpl" class="minestar.autonomy.service.planning.generic.GenericLanePlanningServiceImpl"
          lazy-init="true">
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="topologyService" ref="topologyServiceImpl"/>
        <property name="machineIsolationService" ref="machineIsolationServiceImpl"/>
        <property name="planConnectorFactory" ref="planConnectorFactoryImpl"/>
        <property name="laneMaintenanceService" ref="laneMaintenanceServiceImpl"/>
        <property name="spoilPileManagementService" ref="spoilPileManagementServiceImpl"/>
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="machineIsolationServiceImpl"
          class="minestar.autonomy.service.planning.generic.MachineIsolationServiceImpl"
          lazy-init="true"
          init-method="init">
        <property name="machineIsolationDao">
            <bean class="minestar.mine.persistence.minemodel.MachineIsolationDaoImpl" parent="minestarDao"/>
        </property>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
        <property name="machineModeService" ref="machineModeServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="notification" ref="notification"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="machineIsolationEventHandlerImpl" class="minestar.autonomy.service.planning.generic.MachineIsolationEventHandlerImpl"
          lazy-init="true" init-method="init">
        <property name="machineIsolationService" ref="machineIsolationServiceImpl"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="registerGenericLanePlanningService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Generic Lane Planning Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.generic.GenericLanePlanningService"/>
        <constructor-arg ref="genericLanePlanningServiceImpl"/>
    </bean>

    <bean id="fileStatus2ProcessorImpl" class="com.mincom.integ.field.nodes.FileStatus2ProcessorImpl" init-method="init">
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <!-- Machine Health Service Beans -->
    <bean id="autonomousHealthServiceImpl"
          class="minestar.autonomy.service.health.impl.AutonomousHealthServiceImpl"
          lazy-init="true">
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
        <property name="laneUsageService"  ref="laneUsageServiceImpl" />
        <property name="definitionService" ref="definitionServiceImpl" />
        <property name="notification" ref="notification"/>
    </bean>


    <!-- End Machine Health Service Beans -->




    <!-- Start AStopTestService and DAO Beans -->

    <bean id="autStopTestServiceImpl" class="minestar.autonomy.service.astop.AStopTestServiceImpl"
          init-method="init" destroy-method="stop"
          lazy-init="true">
        <property name="autStopTestResultDao" ref="autStopTestResultDao"/>
        <property name="autStopDeviceDeployedDao" ref="autStopDeviceDeployedDao"/>
        <property name="autStopDeviceReturnedDao" ref="autStopDeviceReturnedDao"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="notification" ref="notification" />
        <property name="auditLogger" ref="auditLogger"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>
    <bean id="autStopTestResultDao" class="minestar.mine.persistence.minemodel.astop.AStopTestResultDaoImpl"
          parent="minestarDao" lazy-init="true"/>
    <bean id="autStopDeviceDeployedDao" class="minestar.mine.persistence.minemodel.astop.AStopDeviceDeployedDaoImpl"
          parent="minestarDao" lazy-init="true"/>
    <bean id="autStopDeviceReturnedDao" class="minestar.mine.persistence.minemodel.astop.AStopDeviceReturnedDaoImpl"
          parent="minestarDao" lazy-init="true"/>


    <!-- End AStopTestService and DAO Beans -->

    <bean id="machineStartupServiceImpl" class="minestar.autonomy.service.startup.MachineStartupServiceImpl">
        <constructor-arg name="alarmService" ref="alarmServiceImpl"/>
        <constructor-arg name="assignmentRequestService" ref="assignmentRequestServiceImpl" />
        <constructor-arg name="fireSuppressionService" ref="fireSuppressionServiceImpl" />
        <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        <constructor-arg name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
        <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
        <constructor-arg name="machineModeService" ref="machineModeServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
    </bean>

    <bean id="laneTravelDao" class="minestar.mine.persistence.minemodel.lanetravel.LaneTravelDaoImpl" parent="minestarDao" lazy-init="true"/>
    <bean id="lockDao" class="minestar.mine.persistence.minemodel.LockDaoImpl" parent="minestarDao"
          lazy-init="true"/>
    <bean id="cableBridgeDao" class="minestar.mine.persistence.minemodel.CableBridgeDaoImpl" parent="minestarDao" lazy-init="true"/>

    <bean id="vimsTpmsForwarder" class="minestar.autonomy.service.forwarder.VimsTpmsForwarderImpl"
          lazy-init="false" init-method="init">
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <condbean:cond withoutPrivilege="Underground">
        <bean id="truckSynchronizationImpl" class="minestar.autonomy.service.sync.impl.TruckSynchronizationImpl"
              lazy-init="false" init-method="init" destroy-method="stop">
            <constructor-arg name="dynamicModelUpdateService" ref="dynamicModelUpdateServiceImpl"/>
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
            <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
            <constructor-arg name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <bean id="clearHazardMessageHandler" class="minestar.autonomy.service.hazard.ClearHazardMessageHandler"
          lazy-init="true">
        <property name="notification" ref="notification"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="hazardLayoutService" ref="hazardLayoutServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="spoilPileManagementService" ref="spoilPileManagementServiceImpl"/>
    </bean>

    <bean id="zoneServiceFacade" class="minestar.mine.service.zone.ZoneServiceFacadeImpl" lazy-init="true">
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="quantityDTOFactory" ref="quantityDTOFactory" />
        <property name="mineFleetService" ref="mineFleetServiceImpl" />
    </bean>

    <bean id="hazardServiceFacade" class="minestar.mine.service.hazard.HazardServiceFacadeImpl" lazy-init="true">
        <property name="hazardService" ref="hazardLayoutServiceImpl"/>
        <property name="dataFlagDtoFactory" ref="dataFlagDTOFactory" />
        <property name="publisher" ref="updatePublisher"/>
        <property name="userService" ref="userServiceImpl"/>
    </bean>

    <bean id="dataFlagDTOFactory" class="minestar.mine.service.hazard.DataFlagDtoFactory" lazy-init="true">
        <property name="quantityDTOFactory" ref="quantityDTOFactory" />
        <property name="mineFleetService" ref="mineFleetServiceImpl" />
        <property name="machineDtoFactory" ref="machineDTOFactory" />
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl" />
        <property name="hazardService" ref="hazardLayoutServiceImpl" />
    </bean>

    <bean id="unsolicitedResponseMonitor" class="minestar.pitlink.service.communications.UnsolicitedResponseMonitor" lazy-init="false">
        <property name="alarmService" ref="alarmServiceImpl"/>
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="machineStopService" ref="machineStopServiceImpl"/>
    </bean>

    <bean id="laneCommitHandlerImpl" class="minestar.autonomy.service.communications.LaneCommitHandlerImpl"
          lazy-init="true" init-method="init">
        <property name="truckControlMessagingService" ref="truckControlMessagingServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="modelUpdateCompletionProcessor" ref="modelUpdateCompletionProcessorImpl"/>
    </bean>

    <bean id="registerLaneCommitServiceImpl" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Lane Commit Handler"/>
        <constructor-arg value="minestar.autonomy.service.communications.LaneCommitHandler"/>
        <constructor-arg ref="laneCommitHandlerImpl"/>
    </bean>

    <bean id="permissionStatusHandlerImpl" class="minestar.autonomy.service.communications.PermissionStatusHandlerImpl"
            lazy-init="true" init-method="init">
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="truckControlMessagingService" ref="truckControlMessagingServiceImpl"/>
        <property name="stoppedTruckMonitor" ref="stoppedTruckMonitorImpl"/>
        <property name="hazardLayoutService" ref="hazardLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
    </bean>

    <bean id="permissionReleaseHandlerImpl" class="minestar.autonomy.service.communications.PermissionReleaseHandlerImpl"
          lazy-init="true" init-method="init">
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="truckControlMessagingService" ref="truckControlMessagingServiceImpl"/>
        <property name="stoppedTruckMonitor" ref="stoppedTruckMonitorImpl"/>
        <property name="hazardLayoutService" ref="hazardLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="diagnosticMessageMonitor" ref="diagnosticMessageMonitorImpl"/>
        <property name="autonomousStateUpdateMessageService" ref="autonomousStateUpdateMessageServiceImpl"/>
        <property name="unobservedCellsService" ref="unobservedCellsServiceImpl"/>
        <property name="onboardPermissionsService" ref="onboardPermissionsServiceImpl"/>
    </bean>
    
    <bean id="permissionCommitHandlerImpl" class="minestar.autonomy.service.communications.PermissionCommitHandlerImpl"
          lazy-init="true" init-method="init">
        <property name="truckControlMessagingService" ref="truckControlMessagingServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="onboardPermissionsService" ref="onboardPermissionsServiceImpl"/>
    </bean>

    <bean id="pathCompleteHandlerImpl" class="minestar.autonomy.service.communications.PathCompleteHandlerImpl"
            lazy-init="true" init-method="init">
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="truckControlMessagingService" ref="truckControlMessagingServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
    </bean>

    <bean id="modelUpdateCompletionProcessorImpl" class="minestar.autonomy.service.communications.ModelUpdateCompletionProcessorImpl"
          lazy-init="true" init-method="init">
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="assignmentRequestService" ref="assignmentRequestServiceImpl"/>
        <property name="dynamicModelUpdateService" ref="dynamicModelUpdateServiceImpl"/>
    </bean>

    <bean id="mapLockUpdateHandlerImpl" class="minestar.autonomy.service.communications.MapLockUpdateHandlerImpl"
          lazy-init="true" init-method="init">
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="lockObjectHandlerImpl" class="minestar.autonomy.service.communications.LockObjectHandlerImpl"
          lazy-init="true" init-method="init">
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="fieldCommunicationsService" ref="deferredFieldCommunicationsService"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="permissionRequestHandlerImpl" class="minestar.autonomy.service.communications.PermissionRequestHandlerImpl"
          lazy-init="true" init-method="init">
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="truckControlMessagingService" ref="truckControlMessagingServiceImpl" />
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="stoppedTruckMonitorImpl" class="minestar.autonomy.service.speed.StoppedTruckMonitorImpl"
            lazy-init="true" init-method="init">
        <property name="autonomousMachineActivityMonitorService" ref="autonomousMachineActivityMonitorServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl" />
        <property name="deadlockDetectionService" ref="deadlockDetectionServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
        <property name="delayManagementService" ref="delayManagementServiceImpl"/>
        <property name="laneUsageStateService" ref="laneUsageStateServiceImpl"/>
    </bean>

    <bean id="bedScriptFailureMonitorImpl" class="minestar.autonomy.service.state.BedScriptFailureMonitorImpl"
          lazy-init="true" init-method="init">
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
    </bean>

    <bean id="stoppedTruckDelayMonitorImpl" class="minestar.autonomy.service.speed.StoppedTruckDelayMonitorImpl"
          lazy-init="true" init-method="init">
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl" />
        <property name="delayManagementService" ref="delayManagementServiceImpl"/>
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
        <property name="laneUsageStateService" ref="laneUsageStateServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="registerStoppedTruckDelayMonitorImpl" parent="registrationInstance" lazy-init="true" >
        <constructor-arg value="Stopped Truck Delay Monitor"/>
        <constructor-arg value="minestar.autonomy.service.speed.StoppedTruckDelayMonitor"/>
        <constructor-arg ref="stoppedTruckDelayMonitorImpl"/>
    </bean>

    <bean id="unobservedCellsServiceImpl" class="minestar.mine.service.minemodel.UnobservedCellsServiceImpl" lazy-init="true">
        <property name="unobservedCellsDao" ref="unobservedCellsDao"/>
        <property name="notification" ref="notification"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="auditLogger" ref="auditLogger"/>
    </bean>

    <bean id="registerUnobservedCellsServiceImpl" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Unobserved Cells Service"/>
        <constructor-arg value="minestar.mine.service.minemodel.UnobservedCellsService"/>
        <constructor-arg ref="unobservedCellsServiceImpl"/>
    </bean>

    <bean id="diagnosticMessageMonitorImpl" class="minestar.autonomy.service.health.impl.DiagnosticMessageMonitorImpl"
          lazy-init="true" init-method="init">
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <!-- Start AutonomousStateUpdateMessageService and message maker Bean -->

    <bean id="autonomousStateUpdateDtoMsgMakerImpl" class="minestar.notification.dto.autstatedata.AutonomousMachineStateMsgMaker">
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="obstacleService" ref="obstacleServiceImpl"/>
    </bean>


    <bean id="autonomousStateUpdateMessageServiceImpl" class="minestar.autonomy.service.autstatedata.AutonomousStateUpdateMessageServiceImpl"
          init-method="init" destroy-method="stop"
          lazy-init="true">
        <property name="notification" ref="notification"/>
        <property name="messageMaker" ref="autonomousStateUpdateDtoMsgMakerImpl"/>
        <property name="obstacleService" ref="obstacleServiceImpl"/>
    </bean>

    <!-- End AutonomousStateUpdateMessageService and message maker Bean -->

    <bean id="clearObstacleDetectionServiceImpl" class="minestar.autonomy.service.clearobstacle.ClearObstacleDetectionServiceImpl"
          init-method="init" lazy-init="true" destroy-method="stop">
        <property name="notification" ref="notification"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="hazardLayoutService" ref="hazardLayoutServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="delayManagementService" ref="delayManagementServiceImpl"/>
        <property name="assignmentRequestService" ref="assignmentRequestServiceImpl"/>
        <property name="obstacleService" ref="obstacleServiceImpl"/>
        <property name="auditLogger" ref="auditLogger"/>
    </bean>

    <bean id="crusherDumpStatusHandlerImpl" class="minestar.autonomy.service.communications.CrusherDumpStatusHandlerImpl"
          init-method="startBean" destroy-method="stopBean"
          lazy-init="true">
        <property name="notification" ref="notification"/>
        <property name="crusherStatusChangeListeners">
            <list>
                <bean class="minestar.autonomy.service.communications.CrusherFaultStatusChangeListener">
                    <property name="alarmService" ref="alarmServiceImpl"/>
                </bean>
                <bean class="minestar.autonomy.service.communications.CrusherReadyStatusChangeListener">
                    <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
                </bean>
                <bean class="minestar.autonomy.service.communications.CrusherAvailableStatusChangeListener">
                    <property name="delayManagementService" ref="delayManagementServiceImpl"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="trafficManagementDestinationResolverImpl" class="minestar.autonomy.service.traffic.TrafficManagementDestinationResolverImpl"
          lazy-init="true">
        <constructor-arg name="laneTravelService" ref="laneTravelServiceImpl"/>
        <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <constructor-arg name="laneUsageConfig" ref="laneUsageConfigImpl"/>
        <constructor-arg name="mineLayoutService" ref="mineLayoutServiceImpl"/>
        <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        <constructor-arg name="planAssociationService" ref="planAssociationServiceImpl"/>
        <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
    </bean>

    <bean id="planQueueResolverImpl" class="minestar.autonomy.service.queueselection.PlanQueueResolverImpl"
              lazy-init="true">
            <property name="queueSelectionStrategies">
                <set>
                    <ref bean="congestionMetricSelection"/>
                    <ref bean="minimumQueueAreaUsageSelection"/>
                </set>
            </property>
            <property name="selectedStrategyName" value="${minestar.autonomy.service.planning.throughput.Config@queueSelectionStrategy}" />
    </bean>

    <bean id="minimumQueueAreaUsageSelection" class="minestar.autonomy.service.queueselection.MinimumQueueAreaUsageStrategy"
              lazy-init="true">
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
    </bean>

    <bean id="registerTruckSnapshotServiceImpl" parent="registrationInstance" lazy-init="true" >
        <constructor-arg value="Truck Snapshot Service"/>
        <constructor-arg value="minestar.pitlink.service.trucksnapshot.TruckSnapshotService"/>
        <constructor-arg ref="truckSnapshotServiceImpl"/>
    </bean>

    <bean id="truckSnapshotServiceImpl" class="minestar.pitlink.service.trucksnapshot.TruckSnapshotServiceImpl" init-method="init" lazy-init="true">
        <property name="fieldCommunicationsService" ref="deferredFieldCommunicationsService" />
        <property name="mineFleetServiceService" ref="mineFleetServiceImpl" />
        <property name="rp" ref="resourceProviderWrapperImpl"  />
        <property name='retryCount' value="${minestar.pitlink.service.trucksnapshot.Config@retry.times}" />
        <property name='retryWait' value="${minestar.pitlink.service.trucksnapshot.Config@retry.wait}" />
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="specialSurfacePolygonServiceImpl" class="minestar.autonomy.service.planning.generic.SpecialSurfacePolygonServiceImpl"
          lazy-init="true">
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
    </bean>

    <bean id="dumpingPointVerificationServiceImpl"
          class="minestar.autonomy.service.planning.dumpplanning.verification.DumpingPointVerificationServiceImpl"
          lazy-init="true">
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="machineFinder">
            <bean class="minestar.autonomy.service.planning.dumpplanning.verification.MachineFinderHelperImpl">
                <constructor-arg ref="mineFleetServiceImpl"/>
            </bean>
        </property>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
    </bean>

    <bean id="registerDumpingPointVerificationServiceImpl" parent="registrationInstance" lazy-init="true" >
        <constructor-arg value="Dumping Point Verification Service"/>
        <constructor-arg value="minestar.autonomy.service.planning.dumpplanning.verification.DumpingPointVerificationService"/>
        <constructor-arg ref="dumpingPointVerificationServiceImpl"/>
    </bean>

    <bean id="areaStopServiceImpl" class="minestar.autonomy.service.areastop.AreaStopServiceImpl" lazy-init="true"
            init-method="start" destroy-method="stop">
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="registerAreaStopServiceImpl" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Area Stop Service"/>
        <constructor-arg value="minestar.autonomy.service.areastop.AreaStopService"/>
        <constructor-arg ref="areaStopServiceImpl"/>
    </bean>

    <bean id="deadlockDetectionServiceImpl" class="minestar.autonomy.service.deadlock.DeadlockDetectionServiceImpl" lazy-init="true" init-method="init">
        <constructor-arg name="laneUsageStateService" ref="laneUsageStateServiceImpl"/>
        <constructor-arg name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
    </bean>

    <bean id="registerDeadlockDetectionServiceImpl" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Deadlock Detection Service"/>
        <constructor-arg value="minestar.autonomy.service.deadlock.DeadlockDetectionService"/>
        <constructor-arg ref="deadlockDetectionServiceImpl"/>
    </bean>

    <bean id="registerLaneUsageStateServiceImpl" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Lane Usage State Service"/>
        <constructor-arg value="minestar.autonomy.service.lane.LaneUsageStateService"/>
        <constructor-arg ref="laneUsageStateServiceImpl"/>
    </bean>

    <bean id="trafficCongestionServiceImpl" class="minestar.autonomy.service.congestion.TrafficCongestionServiceImpl"
          lazy-init="true" init-method="init" destroy-method="stop">
        <property name="laneUsageStateService" ref="laneUsageStateServiceImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
    </bean>

    <bean id="registerTrafficCongestionServiceImpl" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Traffic Congestion Service"/>
        <constructor-arg value="minestar.autonomy.service.congestion.TrafficCongestionService"/>
        <constructor-arg ref="trafficCongestionServiceImpl"/>
    </bean>

    <bean id="congestionMetricSelection" class="minestar.autonomy.service.queueselection.CongestionMetricStrategy"
          lazy-init="true" init-method="init">
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="trafficCongestionService" ref="trafficCongestionServiceImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="highwallDumpAllocationScoreCollator" class="minestar.autonomy.service.mbeans.highwallscore.HighwallDumpAllocationScoreCollator" lazy-init="true" init-method="init">
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="highwallDumpScoreMbeanManager" class="minestar.autonomy.service.mbeans.highwallscore.HighwallDumpAllocationScoreMBeanManagerImpl" lazy-init="true" init-method="init">
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="engineShutdownServiceImpl" class="minestar.autonomy.service.engineshutdown.EngineShutdownServiceImpl"
          lazy-init="true" init-method="init">
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="auditLogger" ref="auditLogger"/>
    </bean>

    <bean id="registerEngineShutdownService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Engine Shutdown Service"/>
        <constructor-arg value="minestar.autonomy.service.engineshutdown.EngineShutdownService"/>
        <constructor-arg ref="engineShutdownServiceImpl"/>
    </bean>

    <bean id="fireSuppressionServiceImpl" class="minestar.autonomy.service.firesuppression.FireSuppressionServiceImpl"
          lazy-init="true" init-method="init">
        <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="auditLogger" ref="auditLogger"/>
    </bean>

    <bean id="registerFireSuppressionService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Fire Suppression Service"/>
        <constructor-arg value="minestar.autonomy.service.firesuppression.FireSuppressionService"/>
        <constructor-arg ref="fireSuppressionServiceImpl"/>
    </bean>

    <bean id="assignmentRequestServiceImpl" class="minestar.autonomy.service.traffic.AssignmentRequestServiceImpl"
          lazy-init="true" >
        <property name="fleetAssignmentService" ref="fleetAssignmentServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="laneTravelService" ref="laneTravelServiceImpl"/>
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="machineDiagnosticsService" ref="machineDiagnosticsServiceImpl"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="machineModeService" ref="machineModeServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="registerAssignmentRequestService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Assignment Request Service"/>
        <constructor-arg value="minestar.autonomy.service.traffic.AssignmentRequestService"/>
        <constructor-arg ref="assignmentRequestServiceImpl"/>
    </bean>

    <bean id="machineHeartbeatListenerImpl" class="minestar.autonomy.service.lane.MachineHeartbeatListenerImpl"
          lazy-init="true" init-method="init">
    </bean>

    <bean id="registerMachineHeartbeatListener" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Machine Heartbeat Listener"/>
        <constructor-arg value="minestar.autonomy.service.lane.MachineHeartbeatListener"/>
        <constructor-arg ref="machineHeartbeatListenerImpl"/>
    </bean>

    <bean id="permissionsChecker" class="minestar.autonomy.space.permissions.PermissionsChecker"/>

    <bean id="secondaryPermissionCheckerImpl"
          class="minestar.autonomy.space.permissions.SecondaryPermissionCheckerImpl"
          lazy-init="true">
        <constructor-arg name="laneUsageService" ref="laneUsageServiceImpl"/>
        <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <constructor-arg name="permissionsChecker" ref="permissionsChecker"/>
        <constructor-arg name="failOnSecondaryPermissionsCheck" value="${minestar.autonomy.util.Config@FAIL_ON_SECONDARY_PERMISSIONS_CHECK}"/>
    </bean>

    <bean id="spottingTruckMonitorImpl"
          class="minestar.autonomy.service.state.SpottingTruckMonitorImpl"
          lazy-init="true">
        <property name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="registerSecondaryPermissionChecker" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Secondary Permission Checker Service"/>
        <constructor-arg value="minestar.autonomy.space.permissions.SecondaryPermissionChecker"/>
        <constructor-arg ref="secondaryPermissionCheckerImpl"/>
    </bean>

    <bean id="laneCharacteristicsServiceImpl"
          class="minestar.autonomy.service.lane.LaneCharacteristicsServiceImpl"
          init-method="init" destroy-method="destroy"
          lazy-init="true">
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="laneTravelService" ref="laneTravelServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="registerLaneCharacteristicsService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Lane Characteristics Service"/>
        <constructor-arg value="minestar.autonomy.service.lane.LaneCharacteristicsService"/>
        <constructor-arg ref="laneCharacteristicsServiceImpl"/>
    </bean>

    <bean id="panelSynchronizationServiceImpl" class="minestar.autonomy.service.sync.impl.PanelSynchronizationServiceImpl">
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="laneUsageService" ref="laneUsageServiceImpl"/>
        <property name="dynamicModelUpdateService" ref="dynamicModelUpdateServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="planAssociationDaoImpl"
          class="minestar.autonomy.persistence.plan.PlanAssociationDaoImpl"
          parent="minestarDao"
          lazy-init="true"/>

    <bean id="planAssociationServiceImpl"
          class="minestar.autonomy.service.plan.PlanAssociationServiceImpl"
          init-method="init" lazy-init="true">
        <constructor-arg name="planAssociationDao" ref="planAssociationDaoImpl"/>
        <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
        <constructor-arg name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <constructor-arg name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <constructor-arg name="fuelBayPlanningService" ref="fuelBayPlanningServiceImpl"/>
        <constructor-arg name="payloadServicePlanningService" ref="payloadServicePlanningServiceImpl"/>
        <constructor-arg name="workshopPlanningService" ref="workshopPlanningServiceImpl"/>
        <constructor-arg name="waterRefillStationPlanningService" ref="waterRefillStationPlanningServiceImpl"/>
        <constructor-arg name="layoverStationPlanningService" ref="layoverStationPlanningServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="auditLogger" ref="auditLogger"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="registerPlanAssociationService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Plan Association Service"/>
        <constructor-arg value="minestar.autonomy.service.plan.PlanAssociationService"/>
        <constructor-arg ref="planAssociationServiceImpl"/>
    </bean>

    <bean id="stuckTruckServiceImpl" class="minestar.autonomy.service.recovery.StuckTruckServiceImpl" init-method="init"
          lazy-init="true">
        <property name="auditLogger" ref="auditLoggerService"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <property name="genericLanePlanningService" ref="genericLanePlanningServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="scriptingService" ref="scriptingServiceImpl"/>
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
    </bean>

    <bean id="registerStuckTruckService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Stuck Truck Service"/>
        <constructor-arg value="minestar.autonomy.service.recovery.StuckTruckService"/>
        <constructor-arg ref="stuckTruckServiceImpl"/>
    </bean>

    <bean id="operatorChangeListenerImpl" class="minestar.autonomy.service.operator.OperatorChangeListenerImpl"
          lazy-init="true" init-method="init" destroy-method="shutdown">
        <property name="notification" ref="notification"/>
        <property name="loadPlanningService" ref="loadPlanningServiceImpl"/>
    </bean>

    <bean id="registerOperatorChangeListener" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Operator Change Listener"/>
        <constructor-arg value="minestar.autonomy.service.operator.OperatorChangeListener"/>
        <constructor-arg ref="operatorChangeListenerImpl"/>
    </bean>

    <bean id="tractionEventServiceImpl" class="minestar.machinetracking.service.traction.TractionEventServiceImpl"
          init-method="init" lazy-init="true">
        <property name="tractionEventDao">
            <bean class="minestar.mine.persistence.minemodel.traction.TractionEventDaoImpl" parent="minestarDao"/>
        </property>
        <property name="txManager" ref="minestarTransactionManager"/>
        <property name="notification" ref="notification"/>
        <property name="hibernateEventListener" ref="hibernateEventListener"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="speedManagementService" ref="speedManagementServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="auditLogger" ref="auditLogger"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
    </bean>

    <bean id="registerTractionEventService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Traction Event Service"/>
        <constructor-arg value="minestar.machinetracking.service.traction.TractionEventService"/>
        <constructor-arg ref="tractionEventServiceImpl"/>
    </bean>

    <condbean:cond license="WaterTruck">
        <bean id="awtDynamicAreaControlServiceImpl" class="minestar.autonomy.service.watertruck.AWTDynamicAreaControlServiceImpl" init-method="init">
            <constructor-arg name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
            <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
            <constructor-arg name="loadPlanningService" ref="loadPlanningServiceImpl"/>
            <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
            <constructor-arg name="settingsService" ref="settingsServiceImpl"/>
            <constructor-arg name="surfaceSaturationService" ref="surfaceSaturationServiceImpl"/>
            <constructor-arg name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="registerAWTDynamicAreaControlService" parent="registrationInstance">
            <constructor-arg value="AWT Dynamic Area Control Service"/>
            <constructor-arg value="minestar.autonomy.service.watertruck.AWTDynamicAreaControlService"/>
            <constructor-arg ref="awtDynamicAreaControlServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="wateringCircuitServiceImpl" class="minestar.autonomy.service.watertruck.WateringCircuitServiceImpl" init-method="init">
            <constructor-arg name="wateringCircuitDao">
                <bean class="minestar.mine.persistence.minemodel.watering.WateringCircuitDaoImpl" parent="minestarDao"/>
            </constructor-arg>
            <constructor-arg name="txManager" ref="minestarTransactionManager"/>
            <constructor-arg name="notification" ref="notification"/>
            <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
            <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
            <constructor-arg name="laneTravelService" ref="laneTravelServiceImpl"/>
            <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="registerWateringCircuitService" parent="registrationInstance">
            <constructor-arg value="Watering Circuit Service"/>
            <constructor-arg value="minestar.autonomy.service.watertruck.WateringCircuitService"/>
            <constructor-arg ref="wateringCircuitServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="waterRefillStationIntegrationServiceImpl" class="minestar.machinetracking.service.watering.WaterRefillStationIntegrationServiceImpl" init-method="init">
            <constructor-arg name="dataBridgeService" ref="dataBridgeServiceImpl"/>
            <constructor-arg name="awtStatusProcessorService" ref="awtStatusProcessorServiceImpl"/>
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
            <constructor-arg name="notification" ref="notification"/>
            <constructor-arg name="assignmentRequestService" ref="assignmentRequestServiceImpl"/>
            <constructor-arg name="delayManagementService" ref="delayManagementServiceImpl"/>
            <constructor-arg name="awtProductRecordingService" ref="awtProductRecordingServiceImpl"/>
            <constructor-arg name="machineModeService" ref="machineModeServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="registerWaterRefillStationIntegrationService" parent="registrationInstance">
            <constructor-arg value="Water Refill Integration Service"/>
            <constructor-arg value="minestar.machinetracking.service.watering.WaterRefillStationIntegrationService"/>
            <constructor-arg ref="waterRefillStationIntegrationServiceImpl"/>
        </bean>
    </condbean:cond>

    <bean id="automatedLoadoutUnitControlIntegrationServiceImpl" class="minestar.machinetracking.service.automatedloadoutunit.AutomatedLoadoutUnitControlIntegrationServiceImpl" init-method="init">
        <constructor-arg name="dataBridgeService" ref="dataBridgeServiceImpl"/>
        <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="registerAutomatedLoadoutUnitControlIntegrationService" parent="registrationInstance">
        <constructor-arg value="Automated LoadOut Integration Service"/>
        <constructor-arg value="minestar.machinetracking.service.automatedloadoutunit.AutomatedLoadoutUnitControlIntegrationService"/>
        <constructor-arg ref="automatedLoadoutUnitControlIntegrationServiceImpl"/>
    </bean>

    <condbean:cond license="WaterTruck">
        <bean id="waterTruckMetricsServiceImpl" class="minestar.machinetracking.service.watering.WaterTruckMetricsServiceImpl" init-method="init">
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
            <constructor-arg name="machineModeService" ref="machineModeServiceImpl"/>
            <constructor-arg name="machineFuelInformationService" ref="machineFuelServiceImpl"/>
            <constructor-arg name="waterTruckMetricsDao">
                <bean class="minestar.mine.persistence.minemodel.watering.WaterTruckMetricsDaoImpl" parent="minestarDao"/>
            </constructor-arg>
            <constructor-arg name="awtStatusProcessorService" ref="awtStatusProcessorServiceImpl"/>
            <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="waterEvaporationRatesServiceImpl" class="minestar.mine.service.minemodel.surface.saturation.WaterEvaporationRatesServiceImpl" init-method="init">
            <constructor-arg name="waterEvaporationRatesDao">
                <bean class="minestar.mine.persistence.minemodel.surface.saturation.WaterEvaporationRatesDaoImpl" parent="minestarDao"/>
            </constructor-arg>
            <constructor-arg name="notification" ref="notification"/>
            <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
            <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="registerWaterEvaporationRatesService" parent="registrationInstance">
            <constructor-arg value="Water Evaporation Rates Service"/>
            <constructor-arg value="minestar.mine.service.minemodel.surface.saturation.WaterEvaporationRatesService"/>
            <constructor-arg ref="waterEvaporationRatesServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="awtAssignmentServiceImpl" class="minestar.autonomy.service.watertruck.AWTAssignmentServiceImpl">
            <constructor-arg name="assignmentRequestService" ref="assignmentRequestServiceImpl"/>
            <constructor-arg name="autonomousStateService" ref="autonomousStateServiceImpl"/>
            <constructor-arg name="awtDynamicAreaControlService" ref="awtDynamicAreaControlServiceImpl"/>
            <constructor-arg name="laneTravelService" ref="laneTravelServiceImpl"/>
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
            <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
            <constructor-arg name="settingsService" ref="settingsServiceImpl"/>
            <constructor-arg name="surfaceSaturationService" ref="surfaceSaturationServiceImpl"/>
            <constructor-arg name="trafficManagementService" ref="trafficManagementServiceImpl"/>
            <constructor-arg name="planLaneInformationService" ref="planLaneInformationServiceImpl"/>
            <constructor-arg name="auditLogger" ref="auditLogger"/>
            <constructor-arg name="notification" ref="notification" />
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="registerAWTAssignmentService" parent="registrationInstance">
            <constructor-arg value="AWT Assignment Service"/>
            <constructor-arg value="minestar.autonomy.service.watertruck.AWTAssignmentService"/>
            <constructor-arg ref="awtAssignmentServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="awtOperationsControlServiceImpl" class="minestar.autonomy.service.watertruck.AWTOperationsControlServiceImpl" init-method="init">
            <constructor-arg name="assignmentRequestService" ref="assignmentRequestServiceImpl"/>
            <constructor-arg name="autonomousStateService" ref="autonomousStateServiceImpl"/>
            <constructor-arg name="awtAssignmentService" ref="awtAssignmentServiceImpl"/>
            <constructor-arg name="awtRefuelingService" ref="awtRefuelingServiceImpl"/>
            <constructor-arg name="awtRoutePathManagementService" ref="awtRoutePathManagementServiceImpl"/>
            <constructor-arg name="awtSelectLayoverService" ref="awtSelectLayoverServiceImpl"/>
            <constructor-arg name="awtWaterRefillingService" ref="awtWaterRefillingServiceImpl"/>
            <constructor-arg name="circuitSaturationService" ref="circuitSaturationServiceImpl"/>
            <constructor-arg name="delayManagementService" ref="delayManagementServiceImpl"/>
            <constructor-arg name="fieldCommunicationsService" ref="deferredFieldCommunicationsService"/>
            <constructor-arg name="machineModeService" ref="machineModeServiceImpl"/>
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
            <constructor-arg name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
            <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
            <constructor-arg name="settingsService" ref="settingsServiceImpl"/>
            <constructor-arg name="trafficManagementService" ref="trafficManagementServiceImpl"/>
            <constructor-arg name="wateringCircuitService" ref="wateringCircuitServiceImpl"/>
            <constructor-arg name="workshopPlanningService" ref="workshopPlanningServiceImpl"/>
            <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
            <constructor-arg name="notification" ref="notification"/>
            <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="registerAWTOperationsControlService" parent="registrationInstance">
            <constructor-arg value="AWT Operations Control Service"/>
            <constructor-arg value="minestar.autonomy.service.watertruck.AWTOperationsControlService"/>
            <constructor-arg ref="awtOperationsControlServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="awtTankLevelServiceImpl" class="minestar.autonomy.service.watertruck.AWTTankLevelServiceImpl" init-method="init">
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
            <constructor-arg name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
            <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
            <constructor-arg name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="awtWaterRefillingServiceImpl" class="minestar.autonomy.service.watertruck.AWTWaterRefillingServiceImpl">
            <constructor-arg name="autonomousStateService" ref="autonomousStateServiceImpl"/>
            <constructor-arg name="delayManagementService" ref="delayManagementServiceImpl"/>
            <constructor-arg name="laneTravelService" ref="laneTravelServiceImpl"/>
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="awtProductRecordingServiceImpl" class="minestar.autonomy.service.watertruck.AWTProductRecordingServiceImpl">
            <constructor-arg name="waterTruckRefillEventDao">
                <bean class="minestar.production.persistence.watertruck.WaterTruckRefillEventDaoImpl" parent="minestarDao"/>
            </constructor-arg>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="awtRefuelingServiceImpl" class="minestar.autonomy.service.watertruck.AWTRefuelingServiceImpl">
            <constructor-arg name="autonomousStateService" ref="autonomousStateServiceImpl"/>
            <constructor-arg name="delayManagementService" ref="delayManagementServiceImpl"/>
            <constructor-arg name="laneTravelService" ref="laneTravelServiceImpl"/>
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="circuitSaturationServiceImpl" class="minestar.autonomy.service.watertruck.CircuitSaturationServiceImpl" init-method="init">
            <constructor-arg name="awtAssignmentService" ref="awtAssignmentServiceImpl"/>
            <constructor-arg name="awtDynamicAreaControlService" ref="awtDynamicAreaControlServiceImpl"/>
            <constructor-arg name="awtRoutePathManagementService" ref="awtRoutePathManagementServiceImpl"/>
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
            <constructor-arg name="settingsService" ref="settingsServiceImpl"/>
            <constructor-arg name="surfaceSaturationService" ref="surfaceSaturationServiceImpl"/>
            <constructor-arg name="wateringCircuitService" ref="wateringCircuitServiceImpl"/>
            <constructor-arg name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
            <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
            <constructor-arg name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="awtSelectLayoverServiceImpl" class="minestar.autonomy.service.watertruck.AWTSelectLayoverServiceImpl">
            <constructor-arg name="autonomousStateService" ref="autonomousStateServiceImpl"/>
            <constructor-arg name="delayManagementService" ref="delayManagementServiceImpl"/>
            <constructor-arg name="laneTravelService" ref="laneTravelServiceImpl"/>
            <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
            <constructor-arg name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond license="WaterTruck">
        <bean id="registerAWTSelectLayoverService" parent="registrationInstance">
            <constructor-arg value="AWT Select Layover Service"/>
            <constructor-arg value="minestar.autonomy.service.watertruck.AWTSelectLayoverService"/>
            <constructor-arg ref="awtSelectLayoverServiceImpl"/>
        </bean>
    </condbean:cond>

    <bean id="autonomousMachineActivityMonitorServiceImpl" class="minestar.autonomy.service.activitymonitor.AutonomousMachineActivityMonitorServiceImpl" lazy-init="false" init-method="init" destroy-method="destroy">
        <property name="speedManagementService" ref="speedManagementServiceImpl"/>
        <property name="regionService" ref="regionServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <property name="lockController" ref="lockControllerImpl"/>
    </bean>

    <bean id="registerAutonomousMachineActivityMonitorService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Autonomous Machine Activity Monitor Service"/>
        <constructor-arg value="minestar.autonomy.service.activitymonitor.AutonomousMachineActivityMonitorService"/>
        <constructor-arg ref="autonomousMachineActivityMonitorServiceImpl"/>
    </bean>

    <bean id="destinationSequencingServiceImpl" class="minestar.autonomy.service.destseq.DestinationSequencingServiceImpl"
          lazy-init="true" init-method="init">
        <constructor-arg name="assignmentRequestService" ref="assignmentRequestServiceImpl"/>
        <constructor-arg name="delayManagementService" ref="delayManagementServiceImpl"/>
        <constructor-arg name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
        <constructor-arg name="timelineService" ref="timelineServiceImpl"/>
        <constructor-arg name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="statusTransitionServiceImpl" class="minestar.autonomy.service.status.StatusTransitionServiceImpl"
          lazy-init="true" init-method="init">
    </bean>

    <bean id="dumpPlanLaneArbitrationServiceImpl" class="minestar.autonomy.service.dumpplanlanearbitration.DumpPlanLaneArbitrationServiceImpl"
          lazy-init="true" init-method="init">
        <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
        <constructor-arg name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <constructor-arg name="laneUsageService" ref="laneUsageServiceImpl"/>
        <constructor-arg name="assignmentRequestService" ref="assignmentRequestServiceImpl" />
        <constructor-arg name="lockController" ref="lockControllerImpl" />
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="rockBreakerService" ref="rockBreakerServiceImpl"/>
    </bean>

    <bean id="registerDestinationSequencingService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Destination Sequencing Service"/>
        <constructor-arg value="minestar.autonomy.service.destseq.DestinationSequencingService"/>
        <constructor-arg ref="destinationSequencingServiceImpl"/>
    </bean>

    <bean id="registerStatusTransitionService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Status Transition Service"/>
        <constructor-arg value="minestar.autonomy.service.status.StatusTransitionService"/>
        <constructor-arg ref="statusTransitionServiceImpl"/>
    </bean>

    <bean id="registerDumpPlanLaneArbitrationService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Dump Plan Lane Arbitration Service"/>
        <constructor-arg value="minestar.autonomy.service.dumpplanlanearbitration.DumpPlanLaneArbitrationService"/>
        <constructor-arg ref="dumpPlanLaneArbitrationServiceImpl"/>
    </bean>

    <bean id="registerRockBreakerService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Rock Breaker Service"/>
        <constructor-arg value="minestar.machinetracking.service.rockbreaker.RockBreakerService"/>
        <constructor-arg ref="rockBreakerServiceImpl"/>
    </bean>

    <bean id="rockBreakerServiceImpl" class="minestar.machinetracking.service.rockbreaker.RockBreakerServiceImpl"
          parent="loggerParent" lazy-init="true" init-method="init">
        <property name="notification" ref="notification"/>
        <property name="lockController" ref="lockControllerImpl"/>
        <property name="trafficManagementService" ref="trafficManagementServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
    </bean>

    <bean id="perceptionVerificationServiceImpl" class="minestar.autonomy.service.perceptionverification.PerceptionVerificationServiceImpl"
          lazy-init="true" init-method="init">
        <constructor-arg name="dao">
            <bean class="minestar.mine.persistence.minemodel.PerceptionVerificationStatisticDaoImpl" parent="minestarDao"/>
        </constructor-arg>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="registerPerceptionVerificationServiceImpl" parent="registrationInstance" lazy-init="true" >
        <constructor-arg value="Perception Verification Monitor"/>
        <constructor-arg value="minestar.autonomy.service.perceptionverification.PerceptionVerificationService"/>
        <constructor-arg ref="perceptionVerificationServiceImpl"/>
    </bean>

    <bean id="requestPermissionsServiceImpl"
          class="minestar.autonomy.service.lane.RequestPermissionsServiceImpl"
          init-method="init" lazy-init="true">
        <constructor-arg name="autonomousStateService" ref="autonomousStateServiceImpl"/>
        <constructor-arg name="laneLayoutService" ref="laneLayoutServiceImpl"/>
        <constructor-arg name="laneUsageConfig" ref="laneUsageConfigImpl" />
        <constructor-arg name="loadPlanningService" ref="loadPlanningServiceImpl"/>
        <constructor-arg name="lockController" ref="lockControllerImpl"/>
        <constructor-arg name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="onboardPermissionsService" ref="onboardPermissionsServiceImpl"/>
        <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="registerRequestPermissionsServiceImpl" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Request Permissions Service"/>
        <constructor-arg value="minestar.autonomy.service.lane.RequestPermissionsService"/>
        <constructor-arg ref="requestPermissionsServiceImpl"/>
    </bean>

    <bean id="payloadMeasurementServiceImpl" class="minestar.autonomy.service.payload.PayloadMeasurementServiceImpl" lazy-init="true" init-method="init">
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="notification" ref="notification"/>
    </bean>

    <bean id="registerPayloadMeasurementService" parent="registrationInstance">
        <constructor-arg value="Payload Measurement Service"/>
        <constructor-arg value="minestar.autonomy.service.payload.PayloadMeasurementService"/>
        <constructor-arg ref="payloadMeasurementServiceImpl"/>
    </bean>
</beans>
