<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:condbean="http://www.minestar.au.cat.com/springbeans/condbean"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.minestar.au.cat.com/springbeans/condbean http://www.minestar.au.cat.com/springbeans/condbean/condbeans.xsd
       ">

    <condbean:cond withoutPrivilege="BlendingToDestination">
        <bean id="processorBlendStatusService" class="minestar.production.service.flow.ProcessorBlendStatusServiceImpl">
            <property name="cycleService" ref="cycleServiceImpl"/>
            <property name="materialManagementService" ref="materialManagementServiceImpl"/>
            <property name="notification" ref="notification"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
            <property name="txManager" ref="minestarTransactionManager"/>
        </bean>
    </condbean:cond>

    <condbean:cond withoutPrivilege="BlendingToDestination">
        <bean id="blendingServiceImpl" class="minestar.production.service.blend.BlendingServiceImpl" init-method="init"
              depends-on="registerMaterialManagementService">
            <property name="blendingAuditService" ref="blendingAuditServiceImpl"/>
            <property name="blendDao" ref="blendDao"/>
            <property name="hibernateEventListener" ref="hibernateEventListener"/>
            <property name="materialManagementService" ref="materialManagementServiceImpl"/>
            <property name="notification" ref="notification"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
            <property name="txManager" ref="minestarTransactionManager"/>
        </bean>
    </condbean:cond>

    <condbean:cond withoutPrivilege="BlendingToDestination">
        <bean id="registerBlendingServices" class="java.lang.Object" lazy-init="true"
              depends-on="registerBlendingService, registerBlendingAuditService">
        </bean>
    </condbean:cond>

    <condbean:cond withoutPrivilege="BlendingToDestination">
        <bean id="registerBlendingService" parent="registrationInstance" lazy-init="true">
            <constructor-arg value="Blending Service"/>
            <constructor-arg value="minestar.production.service.blend.BlendingService"/>
            <constructor-arg ref="blendingServiceImpl"/>
        </bean>
    </condbean:cond>

</beans>
