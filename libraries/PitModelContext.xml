<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (c) 2023 Caterpillar -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!--==========-->
    <!-- Services -->
    <!--==========-->

    <bean id="pitModelServiceImpl" class="minestar.pitlink.service.pitmodel.PitModelServiceImpl"
          lazy-init="true" parent="loggerParent" init-method="init">
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
        <property name="machineInPitDao" ref="machineInPitDao"/>
        <property name="machinePositionReportHelper" ref="machinePositionReportHelper"/>
        <property name="machineDipperReportHelper" ref="machineDipperReportHelper"/>
        <property name="machineLoadReportHelper" ref="machineLoadReportHelper"/>
        <property name="machineDelayReportHelper" ref="machineDelayReportHelper"/>
        <property name="machineAssignmentRequiredHelper" ref="machineAssignmentRequiredHelper"/>
        <property name="truckHelper" ref="truckHelper"/>
        <property name="loadingToolHelper" ref="loadingToolHelper"/>
        <property name="processorHelper" ref="processorHelper"/>
        <property name="fuelBayHelper" ref="fuelBayHelper"/>
        <property name="autonomousWaterRefillStationHelper" ref="autonomousWaterRefillStationHelper"/>
        <property name="scaleHelper" ref="scaleHelper"/>
        <property name="machineHelper" ref="machineHelper"/>
        <property name="fleetProductionService" ref="fleetProductionServiceImpl"/>
        <property name="materialManagementService" ref="materialManagementServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
        <property name="messageService" ref="mineMessageServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="machineLicenceService" ref="machineLicenceServiceImpl"/>
        <property name="processorBlendStatusService" ref="processorBlendStatusService"/>
        <property name="onboardHardwareService" ref="onboardHardwareServiceImpl"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
        <property name="planAssociationService" ref="planAssociationServiceImpl"/>
        <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        <property name="machineModeService" ref="machineModeServiceImpl"/>
        <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
    </bean>

    <!--=================-->
    <!-- Service Helpers -->
    <!--=================-->

    <bean id="machinePositionReportHelper" class="minestar.pitlink.service.pitmodel.MachinePositionReportHelper" lazy-init="true">
        <property name="truckPositionReportHelper" ref="truckPositionReportHelper"/>
        <property name="loadingToolPositionReportHelper" ref="loadingToolPositionReportHelper"/>
    </bean>

    <bean id="truckPositionReportHelper" class="minestar.pitlink.service.pitmodel.TruckPositionReportHelper" lazy-init="true">
        <property name="truckHelper" ref="truckHelper"/>
        <property name="loadingToolHelper" ref="loadingToolHelper"/>
        <property name="processorHelper" ref="processorHelper"/>
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
    </bean>

    <bean id="loadingToolPositionReportHelper" class="minestar.pitlink.service.pitmodel.LoadingToolPositionReportHelper" lazy-init="true">
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
    </bean>

    <bean id="machineDipperReportHelper" class="minestar.pitlink.service.pitmodel.MachineDipperReportHelper">
        <property name="delayManagementService" ref="delayManagementServiceImpl"/>
        <property name="alarmService" ref="alarmServiceImpl"/>
    </bean>

    <bean id="machineLoadReportHelper" class="minestar.pitlink.service.pitmodel.MachineLoadReportHelper" lazy-init="true">
        <property name="materialManagementService" ref="materialManagementServiceImpl"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="machineDistance" ref="machineDistanceImpl"/>
    </bean>

    <bean id="machineDistanceImpl" class="minestar.pitlink.service.pitmodel.MachineDistance" lazy-init="true">
        <constructor-arg name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="machineDelayReportHelper" class="minestar.pitlink.service.pitmodel.MachineDelayReportHelper" lazy-init="true">
    </bean>

    <bean id="machineAssignmentRequiredHelper" class="minestar.pitlink.service.pitmodel.MachineAssignmentRequiredHelper" lazy-init="true">
        <property name="loadingToolHelper" ref="loadingToolHelper"/>
    </bean>

    <bean id="machineHelper" class="minestar.pitlink.service.pitmodel.MachineHelper" lazy-init="true">
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
    </bean>

    <bean id="truckHelper" class="minestar.pitlink.service.pitmodel.TruckHelper" lazy-init="true">
        <property name="serverHelper" ref="serverHelper"/>
        <property name="materialManagementService" ref="materialManagementServiceImpl"/>
        <property name="scheduledAssignmentService" ref="scheduledAssignmentServiceImpl"/>
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
    </bean>

    <bean id="loadingToolHelper" class="minestar.pitlink.service.pitmodel.LoadingToolHelper" lazy-init="true">
        <property name="machineHelper" ref="machineHelper"/>
        <property name="serverHelper" ref="serverHelper"/>
        <property name="notification" ref="notification"/>
        <property name="materialManagementService" ref="materialManagementServiceImpl"/>
        <property name="fieldCommunicationsService" ref="deferredFieldCommunicationsService" />
        <property name="mineMessageService" ref="mineMessageServiceImpl"/>
    </bean>

    <bean id="processorHelper" class="minestar.pitlink.service.pitmodel.ProcessorHelper" lazy-init="true">
        <property name="serverHelper" ref="serverHelper"/>
    </bean>

    <bean id="serverHelper" class="minestar.pitlink.service.pitmodel.ServerHelper" lazy-init="true">
        <constructor-arg name="waypointHelper" ref="waypointHelper"/>
        <constructor-arg name="mineLayoutService" ref="mineLayoutServiceImpl"/>
    </bean>

    <bean id="fuelBayHelper" class="minestar.pitlink.service.pitmodel.FuelBayHelper" lazy-init="true">
        <property name="serverHelper" ref="serverHelper"/>
    </bean>

    <bean id="autonomousWaterRefillStationHelper" class="minestar.pitlink.service.pitmodel.AutonomousWaterRefillStationHelper" lazy-init="true">
        <property name="serverHelper" ref="serverHelper"/>
    </bean>

    <bean id="scaleHelper" class="minestar.pitlink.service.pitmodel.ScaleHelper" lazy-init="true">
        <property name="serverHelper" ref="serverHelper"/>
    </bean>
    <bean id="waypointHelper" class="minestar.pitlink.service.pitmodel.WaypointHelper" lazy-init="true">
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
    </bean>

    <bean id="scheduledAssignmentLifeCycleService"
          class="minestar.assignment.service.scheduledassignment.ScheduledAssignmentLifeCycleServiceImpl" init-method="init">
        <constructor-arg name="scheduledAssignmentService" ref="scheduledAssignmentServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
    </bean>

    <!--======-->
    <!-- DAOs -->
    <!--======-->

    <bean id="machineInPitDao" class="minestar.pitlink.persistence.pitmodel.MachineInPitDaoImpl"
          parent="minestarDao" lazy-init="true"/>

</beans>
