<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext /dbchangelog-ext-3.1.xsd">
    <changeSet id="73d2cf36-8339-4e07-85b1-741681a80fc9" author="MineStar" failOnError="false" runOnChange="true">
        <comment>MO-9371: Update discriminators</comment>
        <sql>
            update MACHINE_IN_PIT set CLASS_NAME='InfrastructureInPit'
            from MACHINE_IN_PIT P inner join ${model}.MACHINE M on P.MACHINE_OID = M.MACHINE_OID AND M.ECF_CLASS_ID='XAEntity.Machine.FixedPlant.Infrastructure.Pseudolite'
            where P.CLASS_NAME='AuxiliaryMachineInPit'
        </sql>
        <rollback>
            update MACHINE_IN_PIT set CLASS_NAME='AuxiliaryMachineInPit'
            from MACHINE_IN_PIT P inner join ${model}.MACHINE M on P.MACHINE_OID = M.MACHINE_OID AND M.ECF_CLASS_ID='XAEntity.Machine.FixedPlant.Infrastructure.Pseudolite'
            where P.CLASS_NAME='InfrastructureInPit'
        </rollback>
    </changeSet>

</databaseChangeLog>

