<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext /dbchangelog-ext-3.1.xsd">

    <changeSet id="0bd52705-302a-4c50-af74-1a76f49b5fb8" author="MineStar" context="Material_Tracking/Material_Tracking_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for CONTROL_RATE to table BLEND_INFORMATION_RECORD as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="BLEND_INFORMATION_RECORD"/>
            <not>
                <columnExists tableName="BLEND_INFORMATION_RECORD" columnName="CONTROL_RATE"/>
            </not>
        </preConditions>
        <comment>FLT-4564: AddColumn BLEND_INFORMATION_RECORD.CONTROL_RATE</comment>
        <addColumn tableName="BLEND_INFORMATION_RECORD">
            <column name="CONTROL_RATE" type="DOUBLE" remarks="The control rate">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="3b4e93d7-fd68-4df8-a1b2-76d5ea99c6ae" author="MineStar" context="Material_Tracking/Material_Tracking_Management" failOnError="false">
        <preConditions onFailMessage="Ignored DropDefaultValue for BLEND_INFORMATION_RECORD.CONTROL_RATE as column does not exist or column does not have a default value" onFail="MARK_RAN">
            <ext:columnHasDefaultValue tableName="BLEND_INFORMATION_RECORD" columnName="CONTROL_RATE"/>
        </preConditions>
        <comment>FLT-4564: DropDefaultValue '0.0' from BLEND_INFORMATION_RECORD.CONTROL_RATE</comment>
        <dropDefaultValue columnName="CONTROL_RATE" columnDataType="DOUBLE" tableName="BLEND_INFORMATION_RECORD"/>
        <rollback>
            <addDefaultValue columnName="CONTROL_RATE" columnDataType="DOUBLE" defaultValueNumeric="0.0" tableName="BLEND_INFORMATION_RECORD"/>
        </rollback>
    </changeSet>

</databaseChangeLog>
