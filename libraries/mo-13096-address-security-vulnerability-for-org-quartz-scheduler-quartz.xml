<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext /dbchangelog-ext-3.1.xsd">
    <changeSet id="71ab0179-4c8b-4d3a-a79a-02f6f23ad49c" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_BLOB_TRIGGERS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_BLOB_TRIGGERS"/>
            <not>
                <columnExists tableName="QRTZ_BLOB_TRIGGERS" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_BLOB_TRIGGERS.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_BLOB_TRIGGERS">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="f7481888-04a5-4d3f-ba9e-44d6695d8c50" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_CALENDARS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_CALENDARS"/>
            <not>
                <columnExists tableName="QRTZ_CALENDARS" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_CALENDARS.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_CALENDARS">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="fda4561e-cc73-409a-84d6-d92180aa36f9" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_CRON_TRIGGERS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_CRON_TRIGGERS"/>
            <not>
                <columnExists tableName="QRTZ_CRON_TRIGGERS" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_CRON_TRIGGERS.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_CRON_TRIGGERS">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="2e24ca57-e119-496e-a738-d0e01900f7a4" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_FIRED_TRIGGERS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_FIRED_TRIGGERS"/>
            <not>
                <columnExists tableName="QRTZ_FIRED_TRIGGERS" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_FIRED_TRIGGERS.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_FIRED_TRIGGERS">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="351bdfad-230f-4b6b-813e-cd6b381db21e" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_PAUSED_TRIGGER_GRPS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_PAUSED_TRIGGER_GRPS"/>
            <not>
                <columnExists tableName="QRTZ_PAUSED_TRIGGER_GRPS" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_PAUSED_TRIGGER_GRPS.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_PAUSED_TRIGGER_GRPS">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="92c2b774-6c75-43ce-b6d0-245d8f9a607b" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_SCHEDULER_STATE as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_SCHEDULER_STATE"/>
            <not>
                <columnExists tableName="QRTZ_SCHEDULER_STATE" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_SCHEDULER_STATE.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_SCHEDULER_STATE">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="e3be2a54-7c34-4a6e-83fc-388faaac5761" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_SIMPLE_TRIGGERS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_SIMPLE_TRIGGERS"/>
            <not>
                <columnExists tableName="QRTZ_SIMPLE_TRIGGERS" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_SIMPLE_TRIGGERS.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_SIMPLE_TRIGGERS">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="c0b88e8f-47e8-4ae6-a8fc-62c5ae2ee106" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_TRIGGERS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_TRIGGERS"/>
            <not>
                <columnExists tableName="QRTZ_TRIGGERS" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_TRIGGERS.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_TRIGGERS">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="ba990bf2-37b9-4e95-b35c-2ed07d96e620" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_NAME to table QRTZ_JOB_DETAILS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_JOB_DETAILS"/>
            <not>
                <columnExists tableName="QRTZ_JOB_DETAILS" columnName="SCHED_NAME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_JOB_DETAILS.SCHED_NAME</comment>
        <addColumn tableName="QRTZ_JOB_DETAILS">
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
       <changeSet id="7c0ef299-a227-4a4f-ba85-0c1ec5425984" author="MineStar" failOnError="false">
            <preConditions onFailMessage="Ignored DropTable for QRTZ_JOB_LISTENERS as table does not exist." onFail="MARK_RAN">
                <tableExists tableName="QRTZ_JOB_LISTENERS"/>
            </preConditions>
            <comment>MO-13096: DropTable QRTZ_JOB_LISTENERS</comment>
            <dropTable tableName="QRTZ_JOB_LISTENERS"/>
           <rollback>
               <createTable remarks="The Quartz Job listener." tableName="QRTZ_JOB_LISTENERS">
                   <column name="JOB_LISTENER" type="VARCHAR(254)">
                       <constraints nullable="false"/>
                   </column>
                   <column name="JOB_NAME" type="VARCHAR(254)">
                       <constraints nullable="false"/>
                   </column>
                   <column name="JOB_GROUP" type="VARCHAR(254)">
                       <constraints nullable="false"/>
                   </column>
               </createTable>
               <addPrimaryKey columnNames="JOB_LISTENER,JOB_NAME,JOB_GROUP" constraintName="QRTZ_JOB_LISTENERS_PK" tableName="QRTZ_JOB_LISTENERS"/>
           </rollback>
        </changeSet>
        <changeSet id="a3a42285-8dc3-467d-bc4a-60137d920889" author="MineStar" failOnError="false">
            <preConditions onFailMessage="Ignored DropTable for QRTZ_TRIGGER_LISTENERS as table does not exist." onFail="MARK_RAN">
                <tableExists tableName="QRTZ_TRIGGER_LISTENERS"/>
            </preConditions>
            <comment>MO-13096: DropTable QRTZ_TRIGGER_LISTENERS</comment>
            <dropTable tableName="QRTZ_TRIGGER_LISTENERS"/>
            <rollback>
                <createTable remarks="The Quartz trigger listener." tableName="QRTZ_TRIGGER_LISTENERS">
                    <column name="TRIGGER_LISTENER" type="VARCHAR(254)">
                        <constraints nullable="false"/>
                    </column>
                    <column name="TRIGGER_NAME" type="VARCHAR(254)">
                        <constraints nullable="false"/>
                    </column>
                    <column name="TRIGGER_GROUP" type="VARCHAR(254)">
                        <constraints nullable="false"/>
                    </column>
                </createTable>
                <addPrimaryKey columnNames="TRIGGER_LISTENER,TRIGGER_NAME,TRIGGER_GROUP" constraintName="QRTZ_TRIGGER_LISTENERS_PK" tableName="QRTZ_TRIGGER_LISTENERS"/>
            </rollback>
        </changeSet>
    <changeSet id="1d345a93-3220-49aa-bfc8-880c79d6bbb9" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for IS_STATEFUL of table QRTZ_FIRED_TRIGGERS as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="QRTZ_FIRED_TRIGGERS" columnName="IS_STATEFUL"/>
        </preConditions>
        <comment>MO-13096: DropColumn QRTZ_FIRED_TRIGGERS.IS_STATEFUL</comment>
        <dropColumn columnName="IS_STATEFUL" tableName="QRTZ_FIRED_TRIGGERS"/>
        <rollback>
            <addColumn tableName="QRTZ_FIRED_TRIGGERS">
                <column name="IS_STATEFUL" type="NVARCHAR(1)"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="02c1005e-682f-49b2-bcea-e57385bffa32" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for IS_NONCONCURRENT to table QRTZ_FIRED_TRIGGERS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_FIRED_TRIGGERS"/>
            <not>
                <columnExists tableName="QRTZ_FIRED_TRIGGERS" columnName="IS_NONCONCURRENT"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_FIRED_TRIGGERS.IS_NONCONCURRENT</comment>
        <addColumn tableName="QRTZ_FIRED_TRIGGERS">
            <column name="IS_NONCONCURRENT" type="NVARCHAR(1)" remarks="Is the trigger is non concurrent"/>
        </addColumn>
    </changeSet>
    <changeSet id="2318ed06-035c-4220-acf4-05cf556b83be" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for IS_STATEFUL of table QRTZ_JOB_DETAILS as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="QRTZ_JOB_DETAILS" columnName="IS_STATEFUL"/>
        </preConditions>
        <comment>MO-13096: DropColumn QRTZ_JOB_DETAILS.IS_STATEFUL</comment>
        <dropColumn columnName="IS_STATEFUL" tableName="QRTZ_JOB_DETAILS"/>
        <rollback>
            <addColumn tableName="QRTZ_JOB_DETAILS">
                <column name="IS_STATEFUL" type="NVARCHAR(1)">
                    <constraints nullable="true"/>
                </column>
            </addColumn>
            <sql>UPDATE QRTZ_JOB_DETAILS SET IS_STATEFUL = ''</sql>
            <addNotNullConstraint columnName="IS_STATEFUL" columnDataType="NVARCHAR(1)" tableName="QRTZ_JOB_DETAILS"/>
        </rollback>
    </changeSet>
    <changeSet id="72846b09-eb71-423d-b96b-dd28432ac882" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for IS_NONCONCURRENT to table QRTZ_JOB_DETAILS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_JOB_DETAILS"/>
            <not>
                <columnExists tableName="QRTZ_JOB_DETAILS" columnName="IS_NONCONCURRENT"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_JOB_DETAILS.IS_NONCONCURRENT</comment>
        <addColumn tableName="QRTZ_JOB_DETAILS">
            <column name="IS_NONCONCURRENT" type="NVARCHAR(1)" remarks="Is the Job is nonconcurent." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="52ff1503-6f04-4b7b-b380-56081fcbeb0f" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for IS_UPDATE_DATA to table QRTZ_JOB_DETAILS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_JOB_DETAILS"/>
            <not>
                <columnExists tableName="QRTZ_JOB_DETAILS" columnName="IS_UPDATE_DATA"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_JOB_DETAILS.IS_UPDATE_DATA</comment>
        <addColumn tableName="QRTZ_JOB_DETAILS">
            <column name="IS_UPDATE_DATA" type="NVARCHAR(1)" remarks="Is the Job is update data." defaultValue="">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="f161bcdf-0a73-43ee-8bbf-e29ffcb7a987" author="MineStar" context="Platform/Platform_Management" failOnError="false">
        <preConditions onFailMessage="Ignored CreateTable for QRTZ_SIMPROP_TRIGGERS as table already exists." onFail="MARK_RAN">
            <not>
                <tableExists tableName="QRTZ_SIMPROP_TRIGGERS"/>
            </not>
        </preConditions>
        <comment>MO-13096: CreateTable QRTZ_SIMPROP_TRIGGERS</comment>
        <createTable remarks="The Quartz trigger definitions." tableName="QRTZ_SIMPROP_TRIGGERS">
            <column name="TRIGGER_NAME" type="NVARCHAR(254)" remarks="Name of the Trigger.">
                <constraints nullable="false"/>
            </column>
            <column name="TRIGGER_GROUP" type="NVARCHAR(254)" remarks="Group of the Trigger.">
                <constraints nullable="false"/>
            </column>
            <column name="SCHED_NAME" type="NVARCHAR(120)" remarks="The Scheduler name.">
                <constraints nullable="false"/>
            </column>
            <column name="STR_PROP_1" type="NVARCHAR(512)" remarks="String property 1."/>
            <column name="STR_PROP_2" type="NVARCHAR(512)" remarks="String property 2."/>
            <column name="STR_PROP_3" type="NVARCHAR(512)" remarks="String property 3."/>
            <column name="INT_PROP_1" type="BIGINT" remarks="Int property 1."/>
            <column name="INT_PROP_2" type="BIGINT" remarks="Int property 2."/>
            <column name="LONG_PROP_1" type="BIGINT" remarks="Long property 1."/>
            <column name="LONG_PROP_2" type="BIGINT" remarks="Long property 2."/>
            <column name="DEC_PROP_1" type="BIGINT" remarks="Decimal property 1."/>
            <column name="DEC_PROP_2" type="BIGINT" remarks="Decimal property 2."/>
            <column name="BOOL_PROP_1" type="BOOLEAN" remarks="Boolean property 1."/>
            <column name="BOOL_PROP_2" type="BOOLEAN" remarks="Boolean property 2."/>
        </createTable>
        <addPrimaryKey columnNames="TRIGGER_NAME,TRIGGER_GROUP" constraintName="QRTZ_SIMPROP_TRIGGERS_PK" tableName="QRTZ_SIMPROP_TRIGGERS"/>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="3c5b1d5e-863c-47e8-9ef4-a0c3a05bdd5c" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for IS_VOLATILE of table QRTZ_FIRED_TRIGGERS as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="QRTZ_FIRED_TRIGGERS" columnName="IS_VOLATILE"/>
        </preConditions>
        <comment>MO-13096: DropColumn QRTZ_FIRED_TRIGGERS.IS_VOLATILE</comment>
        <dropColumn columnName="IS_VOLATILE" tableName="QRTZ_FIRED_TRIGGERS"/>
        <rollback>
            <addColumn tableName="QRTZ_FIRED_TRIGGERS">
                <column name="IS_VOLATILE" type="NVARCHAR(1)">
                    <constraints nullable="true"/>
                </column>
            </addColumn>
            <sql>UPDATE QRTZ_FIRED_TRIGGERS SET IS_VOLATILE = ''</sql>
            <addNotNullConstraint columnName="IS_VOLATILE" columnDataType="NVARCHAR(1)" tableName="QRTZ_FIRED_TRIGGERS"/>
        </rollback>
    </changeSet>
    <changeSet id="ef6d44c1-f5ee-4e15-a4e7-616f36d94f36" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for IS_VOLATILE of table QRTZ_JOB_DETAILS as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="QRTZ_JOB_DETAILS" columnName="IS_VOLATILE"/>
        </preConditions>
        <comment>MO-13096: DropColumn QRTZ_JOB_DETAILS.IS_VOLATILE</comment>
        <dropColumn columnName="IS_VOLATILE" tableName="QRTZ_JOB_DETAILS"/>
        <rollback>
            <addColumn tableName="QRTZ_JOB_DETAILS">
                <column name="IS_VOLATILE" type="NVARCHAR(1)">
                    <constraints nullable="true"/>
                </column>
            </addColumn>
            <sql>UPDATE QRTZ_JOB_DETAILS SET IS_VOLATILE = ''</sql>
            <addNotNullConstraint columnName="IS_VOLATILE" columnDataType="NVARCHAR(1)" tableName="QRTZ_JOB_DETAILS"/>
        </rollback>
    </changeSet>
    <changeSet id="6d6f33d5-10e6-484f-92fa-a533dc57a566" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for IS_VOLATILE of table QRTZ_TRIGGERS as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="QRTZ_TRIGGERS" columnName="IS_VOLATILE"/>
        </preConditions>
        <comment>MO-13096: DropColumn QRTZ_TRIGGERS.IS_VOLATILE</comment>
        <dropColumn columnName="IS_VOLATILE" tableName="QRTZ_TRIGGERS"/>
        <rollback>
            <addColumn tableName="QRTZ_TRIGGERS">
                <column name="IS_VOLATILE" type="NVARCHAR(1)">
                    <constraints nullable="true"/>
                </column>
            </addColumn>
            <sql>UPDATE QRTZ_TRIGGERS SET IS_VOLATILE = ''</sql>
            <addNotNullConstraint columnName="IS_VOLATILE" columnDataType="NVARCHAR(1)" tableName="QRTZ_TRIGGERS"/>
        </rollback>
    </changeSet>
    <changeSet id="5f22b541-5b79-48bf-8f23-e84c489312ba" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for SCHED_TIME to table QRTZ_FIRED_TRIGGERS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="QRTZ_FIRED_TRIGGERS"/>
            <not>
                <columnExists tableName="QRTZ_FIRED_TRIGGERS" columnName="SCHED_TIME"/>
            </not>
        </preConditions>
        <comment>MO-13096: AddColumn QRTZ_FIRED_TRIGGERS.SCHED_TIME</comment>
        <addColumn tableName="QRTZ_FIRED_TRIGGERS">
            <column name="SCHED_TIME" type="BIGINT" remarks="The Scheduler time." defaultValueNumeric="0">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
</databaseChangeLog>
