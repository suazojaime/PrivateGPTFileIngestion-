<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext /dbchangelog-ext-3.1.xsd">
    <changeSet id="a9a969bb-8c04-4fb8-ae31-3789f14a03c1" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropIndex for PLAN_LANE_INFO_GRPD_SPTS_UIDX1 of table PLAN_LANE_INFO_GROUPED_SPOTS as index does not
exist." onFail="MARK_RAN">
            <indexExists indexName="PLAN_LANE_INFO_GRPD_SPTS_UIDX1" tableName="PLAN_LANE_INFO_GROUPED_SPOTS"/>
        </preConditions>
        <comment>AHS-6823: DropIndex PLAN_LANE_INFO_GRPD_SPTS_UIDX1 from PLAN_LANE_INFO_GROUPED_SPOTS (PLAN_OID,GROUP_NR,SPOT_POINT_OID)</comment>
        <dropIndex tableName="PLAN_LANE_INFO_GROUPED_SPOTS" indexName="PLAN_LANE_INFO_GRPD_SPTS_UIDX1"/>
        <rollback>
            <createIndex unique="true" tablespace="MW_IDXENT" tableName="PLAN_LANE_INFO_GROUPED_SPOTS" indexName="PLAN_LANE_INFO_GRPD_SPTS_UIDX1">
                <column name="PLAN_OID"/>
                <column name="GROUP_NR"/>
                <column name="SPOT_POINT_OID"/>
            </createIndex>
        </rollback>
        <modifySql dbms="mssql,h2,postgresql">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="efc30f89-5149-439b-943a-00190e09e094" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddPrimaryKey for PLAN_LANE_INFO_GROUPED_SPOT_PK to table PLAN_LANE_INFO_GROUPED_SPOTS as table does
not exist or primaryKey already exists." onFail="MARK_RAN">
            <tableExists tableName="PLAN_LANE_INFO_GROUPED_SPOTS"/>
            <not>
                <primaryKeyExists primaryKeyName="PLAN_LANE_INFO_GROUPED_SPOT_PK" tableName="PLAN_LANE_INFO_GROUPED_SPOTS"/>
            </not>
        </preConditions>
        <comment>AHS-6823: AddPrimaryKey PLAN_LANE_INFO_GROUPED_SPOT_PK to PLAN_LANE_INFO_GROUPED_SPOTS (PLAN_OID,GROUP_NR,SPOT_POINT_OID)</comment>
        <addPrimaryKey columnNames="PLAN_OID,GROUP_NR,SPOT_POINT_OID" constraintName="PLAN_LANE_INFO_GROUPED_SPOT_PK" tablespace="MW_IDXENT" tableName="PLAN_LANE_INFO_GROUPED_SPOTS"/>
        <modifySql dbms="mssql,h2,postgresql">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
</databaseChangeLog>
