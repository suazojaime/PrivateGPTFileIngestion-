<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="e2e75437-6917-4156-9271-11b790b0a34f" author="MineStar" failOnError="false">

        <comment>FLT-6864: Drop redundant trigger (REMOVE_JOB_CODE_ASSOCIATIONS_ON_ARCHIVE)  </comment>
        <sql dbms="oracle" endDelimiter="/">
            DECLARE
                l_count INTEGER;
            BEGIN
                SELECT COUNT(*)
                INTO l_count
                FROM user_triggers
                WHERE trigger_name = 'REMOVE_JOB_CODE_ASSOCIATIONS_ON_ARCHIVE';
                IF l_count > 0 THEN
                    EXECUTE immediate 'drop trigger REMOVE_JOB_CODE_ASSOCIATIONS_ON_ARCHIVE';
                END IF;
            END;
            /
        </sql>
        <sql dbms="mssql" endDelimiter="/">
            IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[REMOVE_JOB_CODE_ASSOCIATIONS_ON_ARCHIVE]') AND type =N'TR')
            BEGIN
                DROP TRIGGER [dbo].[REMOVE_JOB_CODE_ASSOCIATIONS_ON_ARCHIVE];
            END
            /
        </sql>
        <rollback>
            <comment>@EmptyRollback</comment>
        </rollback>
    </changeSet>
</databaseChangeLog>
