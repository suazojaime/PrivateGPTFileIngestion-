<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <changeSet id="a2054a2c-3237-493e-abfa-efb93bf7a132" author="MineStar" context="Underground/Underground_Management"
               failOnError="false">
        <preConditions
                onFailMessage="Ignored RenameColumn for DP_CLOSED to table DP_TIME_LINE as table does not exist or column already exists."
                onFail="MARK_RAN">
            <tableExists tableName="DP_TIME_LINE"/>
            <not>
                <columnExists tableName="DP_TIME_LINE" columnName="DP_CLOSED"/>
            </not>
        </preConditions>
        <comment>FUG-4272: RenameColumn from DP_TIME_LINE.CLOSED to DP_TIME_LINE.DP_CLOSED</comment>
        <renameColumn tableName="DP_TIME_LINE" oldColumnName="CLOSED" newColumnName="DP_CLOSED"/>
    </changeSet>
    <changeSet id="d67f6204-0ca0-400e-8cd3-576f041aa681" author="MineStar" context="Underground/Underground_Management"
               failOnError="false">
        <preConditions
                onFailMessage="Ignored RenameColumn for OLD_DP_CLOSED to table DP_TIME_LINE as table does not exist or column already exists."
                onFail="MARK_RAN">
            <tableExists tableName="DP_TIME_LINE"/>
            <not>
                <columnExists tableName="DP_TIME_LINE" columnName="OLD_DP_CLOSED"/>
            </not>
        </preConditions>
        <comment>FUG-4272: RenameColumn from DP_TIME_LINE.OLD_CLOSED to DP_TIME_LINE.OLD_DP_CLOSED</comment>
        <renameColumn tableName="DP_TIME_LINE" oldColumnName="OLD_CLOSED" newColumnName="OLD_DP_CLOSED"/>
    </changeSet>
    <changeSet id="8690e240-ecf4-4ce5-b8b4-f7401bd7aab7" author="MineStar" context="Underground/Underground_Management"
               failOnError="false">
        <preConditions
                onFailMessage="Ignored AddColumn for P_CLOSED to table DP_TIME_LINE as table does not exist or column already exists."
                onFail="MARK_RAN">
            <tableExists tableName="DP_TIME_LINE"/>
            <not>
                <columnExists tableName="DP_TIME_LINE" columnName="P_CLOSED"/>
            </not>
        </preConditions>
        <comment>FUG-4272: AddColumn DP_TIME_LINE.P_CLOSED</comment>
        <addColumn tableName="DP_TIME_LINE">
            <column name="P_CLOSED" type="BOOLEAN"
                    remarks="Whether the current status of the panel that the draw point belong to is closed or not. (This flag is '1' if it represents a closed panel and '0' if it does not.)"/>
        </addColumn>
    </changeSet>
    <changeSet id="650a5626-6546-4838-8f31-fa813cf44a24" author="MineStar" context="Underground/Underground_Management"
               failOnError="false">
        <preConditions
                onFailMessage="Ignored AddColumn for OLD_P_CLOSED to table DP_TIME_LINE as table does not exist or column already exists."
                onFail="MARK_RAN">
            <tableExists tableName="DP_TIME_LINE"/>
            <not>
                <columnExists tableName="DP_TIME_LINE" columnName="OLD_P_CLOSED"/>
            </not>
        </preConditions>
        <comment>FUG-4272: AddColumn DP_TIME_LINE.OLD_P_CLOSED</comment>
        <addColumn tableName="DP_TIME_LINE">
            <column name="OLD_P_CLOSED" type="BOOLEAN"
                    remarks="Whether the previous status of the panel that the draw point belong to is closed or not. (This flag is '1' if it represents a closed panel and '0' if it does not.)"/>
        </addColumn>
    </changeSet>
</databaseChangeLog>
