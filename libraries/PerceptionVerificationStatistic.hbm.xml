<?xml version="1.0"?>
<!-- Copyright (c) 2021 Caterpillar -->

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping default-access="field" default-lazy="false" schema="model">

    <class name="minestar.autonomy.service.perceptionverification.PerceptionVerificationStatistic"
           table="PERCEPTION_VERIFICATION_STATS"
           dynamic-update="true">

        <meta attribute="view-master">true</meta>

        <meta attribute="table">
            tablespace=MW_ENT
            storage.initial=64K
            storage.next=64K
            storage.pctincrease=0
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXENT
            storage.initial=64k
            storage.next=64k
            storage.pctincrease=0
        </meta>

        <meta attribute="description">This holds the statistics associated with an AxT and its most recent attempt to perceive an AODV Target.</meta>

        <cache usage="read-write" region="model"/>

        <composite-id name="key" class="minestar.autonomy.service.perceptionverification.PerceptionVerificationKey">
            <key-many-to-one name="machineRef" column="machine_oid" class="minestar.pitlink.domain.machine.MachineReference">
                <meta attribute="description">The oid of the AxT that attempted to verifiy the perception of an AutomaticObjectDetectionVerificationTarget.</meta>
             </key-many-to-one>
            <key-many-to-one name="aodvTargetRef" column="aodv_oid" class="minestar.pitlink.domain.machine.MachineReference">
                <meta attribute="description">The oid of the AutomaticObjectDetectionVerificationTarget that perception was attempted.</meta>
            </key-many-to-one>
        </composite-id>

        <property name="resetDate"
                  type="TimestampType"
                  column="RESET_DATE_UTC">
            <meta attribute="view-localtime">true</meta>
            <meta attribute="utc-description">The time the statistic was reset - utc timestamp.</meta>
            <meta attribute="description">The statistic reset timestamp</meta>
        </property>

        <property name="createdDate"
                  type="TimestampType"
                  column="CREATED_DATE_UTC">
            <meta attribute="view-localtime">true</meta>
            <meta attribute="utc-description">The creation utc timestamp.</meta>
            <meta attribute="description">The creation timestamp</meta>
        </property>

        <property name="lastUpdatedDate"
                  type="TimestampType"
                  column="LAST_UPDATED_DATE_UTC">
            <meta attribute="view-localtime">true</meta>
            <meta attribute="utc-description">The updated utc timestamp.</meta>
            <meta attribute="description">The updated timestamp</meta>
        </property>

        <property name="lastHit"
                  type="TimestampType"
                  column="LAST_HIT_DATE_UTC">
            <meta attribute="view-localtime">true</meta>
            <meta attribute="utc-description">The last hit utc timestamp.</meta>
            <meta attribute="description">The last hit timestamp</meta>
        </property>

        <property name="lastMiss"
                  type="TimestampType"
                  column="LAST_MISS_DATE_UTC">
            <meta attribute="view-localtime">true</meta>
            <meta attribute="utc-description">The last miss utc timestamp.</meta>
            <meta attribute="description">The last miss timestamp</meta>
        </property>

        <property name="hitCount"
                  column="HIT_COUNT"
                  type="java.lang.Long">
            <meta attribute="description">The number of successful perception attempts detected.</meta>
        </property>

        <property name="missCount"
                  column="MISS_COUNT"
                  type="java.lang.Long">
            <meta attribute="description">The number of unsuccessful perception attempts detected.</meta>
        </property>

        <property name="aodvDetected"
                  column="AODV_DETECTED"
                  type="java.lang.Boolean">
            <meta attribute="description">True if the AODV target detection was successful.</meta>
        </property>

        <property name="pvSuccessful"
                  column="VERIFICATION_PASSED"
                  type="java.lang.Boolean">
            <meta attribute="description">True if the in-cycle perception verification has been completed successfully.</meta>
        </property>
    </class>

</hibernate-mapping>
