<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext /dbchangelog-ext-3.1.xsd">
    <changeSet id="8e65377b-ef8e-48ff-8296-97744037fdf7" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropPrimaryKey for V2_PROD_PLAN_JOB_PK of table V2_PROD_PLAN_JOB as primaryKey does not exist." onFail="MARK_RAN">
            <primaryKeyExists primaryKeyName="V2_PROD_PLAN_JOB_PK" tableName="V2_PROD_PLAN_JOB"/>
        </preConditions>
        <comment>MO-2743: DropPrimaryKey V2_PROD_PLAN_JOB_PK from V2_PROD_PLAN_JOB (PLAN_OID,JOB_NR)</comment>
        <dropPrimaryKey constraintName="V2_PROD_PLAN_JOB_PK" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addPrimaryKey columnNames="PLAN_OID,JOB_NR" constraintName="V2_PROD_PLAN_JOB_PK" tableName="V2_PROD_PLAN_JOB"/>
        </rollback>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="0b2ff99d-5f42-422b-ae37-543dec84a3d3" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for EQUIPMENT_REFERENCE of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="EQUIPMENT_REFERENCE"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.EQUIPMENT_REFERENCE</comment>
        <dropColumn columnName="EQUIPMENT_REFERENCE" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="EQUIPMENT_REFERENCE" type="NVARCHAR(254)"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="ec4c0c18-6a09-4141-ac22-e9e539b4c4e1" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for SOURCE_REFERENCE of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="SOURCE_REFERENCE"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.SOURCE_REFERENCE</comment>
        <dropColumn columnName="SOURCE_REFERENCE" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="SOURCE_REFERENCE" type="NVARCHAR(254)"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="da0f1e84-7c0e-4ba8-99f0-3b82161f6310" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for MATERIAL_REFERENCE of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="MATERIAL_REFERENCE"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.MATERIAL_REFERENCE</comment>
        <dropColumn columnName="MATERIAL_REFERENCE" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="MATERIAL_REFERENCE" type="NVARCHAR(254)"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="54c0ba89-40b3-4e9d-a0fb-b336bdf81bff" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for DUMP_REFERENCE of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="DUMP_REFERENCE"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.DUMP_REFERENCE</comment>
        <dropColumn columnName="DUMP_REFERENCE" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="DUMP_REFERENCE" type="NVARCHAR(254)"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="19e09d7e-c99d-49fb-a73a-9ab9ecd879a8" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for PROD_PLAN_JOB_OID of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="PROD_PLAN_JOB_OID"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.PROD_PLAN_JOB_OID</comment>
        <dropColumn columnName="PROD_PLAN_JOB_OID" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="PROD_PLAN_JOB_OID" type="BIGINT"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="f5422561-cb8a-461f-958e-a51b04d5fe3e" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for MATERIAL_OID of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="MATERIAL_OID"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.MATERIAL_OID</comment>
        <dropColumn columnName="MATERIAL_OID" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="MATERIAL_OID" type="BIGINT"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="d3ba5a60-65c3-4d60-8b83-c4e4974c6ddd" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for SOURCE_OID of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="SOURCE_OID"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.SOURCE_OID</comment>
        <dropColumn columnName="SOURCE_OID" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="SOURCE_OID" type="BIGINT"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="0f0326f9-7974-4e30-992e-b0cbf3081e6c" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for CREATED_BY of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="CREATED_BY"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.CREATED_BY</comment>
        <dropColumn columnName="CREATED_BY" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="CREATED_BY" type="BIGINT"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="342d391f-87ee-4f46-afac-15a74500c21c" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for USER_STATUS of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="USER_STATUS"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.USER_STATUS</comment>
        <dropColumn columnName="USER_STATUS" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="USER_STATUS" type="NVARCHAR(255)"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="4fdf7de9-e54a-4d25-b5c5-bf1c55a3662b" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for DUMP_OID of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="DUMP_OID"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.DUMP_OID</comment>
        <dropColumn columnName="DUMP_OID" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="DUMP_OID" type="BIGINT"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="5a6abb45-7da0-42d4-a246-ea3d4c1aed76" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for EQUIPMENT_OID of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="EQUIPMENT_OID"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.EQUIPMENT_OID</comment>
        <dropColumn columnName="EQUIPMENT_OID" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="EQUIPMENT_OID" type="BIGINT"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="580716e7-4bde-436f-8b8d-495c76066c68" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for PLANNED_MASS of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="PLANNED_MASS"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.PLANNED_MASS</comment>
        <dropColumn columnName="PLANNED_MASS" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="PLANNED_MASS" type="DOUBLE"/>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="51cad7d8-bc8d-4bd0-a220-68668a97130d" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for PLANNED_START_TIMESTAMP_UTC of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="PLANNED_START_TIMESTAMP_UTC"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.PLANNED_START_TIMESTAMP_UTC</comment>
        <dropColumn columnName="PLANNED_START_TIMESTAMP_UTC" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="PLANNED_START_TIMESTAMP_UTC" type="DATETIME2">
                    <!-- modified for rollback purpose -->
                    <!--<constraints nullable="false"/>-->
                </column>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="7b7080e4-ca15-426e-bfdc-be3de56c4205" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for PLANNED_END_TIMESTAMP_UTC of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="PLANNED_END_TIMESTAMP_UTC"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.PLANNED_END_TIMESTAMP_UTC</comment>
        <dropColumn columnName="PLANNED_END_TIMESTAMP_UTC" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="PLANNED_END_TIMESTAMP_UTC" type="DATETIME2">
                    <!-- modified for rollback purpose -->
                    <!--<constraints nullable="false"/>-->
                </column>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="e544dfcc-b0be-432c-b431-1d9abee5b9d8" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropColumn for USER_REQUIRED_TIMESTAMP_UTC of table V2_PROD_PLAN_JOB as column does not exist." onFail="MARK_RAN">
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="USER_REQUIRED_TIMESTAMP_UTC"/>
        </preConditions>
        <comment>MO-2743: DropColumn V2_PROD_PLAN_JOB.USER_REQUIRED_TIMESTAMP_UTC</comment>
        <dropColumn columnName="USER_REQUIRED_TIMESTAMP_UTC" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <addColumn tableName="V2_PROD_PLAN_JOB">
                <column name="USER_REQUIRED_TIMESTAMP_UTC" type="DATETIME2">
                    <!-- modified for rollback purpose -->
                    <!--<constraints nullable="false"/>-->
                </column>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet id="bb2a0c0c-4d77-434b-a6fc-d92c6a2c72bf" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropNotNullConstraint for V2_PROD_PLAN_JOB.PLAN_OID as column does not exist or is already nullable" onFail="MARK_RAN">
            <ext:columnIsNotNullable tableName="V2_PROD_PLAN_JOB" columnName="PLAN_OID"/>
        </preConditions>
        <comment>MO-2743: DropNotNullConstraint from V2_PROD_PLAN_JOB.PLAN_OID</comment>
        <dropNotNullConstraint tableName="V2_PROD_PLAN_JOB" columnName="PLAN_OID" columnDataType="BIGINT"/>
    </changeSet>
    <changeSet id="aa283aa2-d8a3-4d84-8294-8510b6b5aa0a" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored DropNotNullConstraint for V2_PROD_PLAN_JOB.JOB_NR as column does not exist or is already nullable" onFail="MARK_RAN">
            <ext:columnIsNotNullable tableName="V2_PROD_PLAN_JOB" columnName="JOB_NR"/>
        </preConditions>
        <comment>MO-2743: DropNotNullConstraint from V2_PROD_PLAN_JOB.JOB_NR</comment>
        <dropNotNullConstraint tableName="V2_PROD_PLAN_JOB" columnName="JOB_NR" columnDataType="INT"/>
    </changeSet>
    <changeSet id="ce75a4fa-2305-442b-ab31-f67b91fdca16" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for OID to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="OID"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.OID</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="048d2b1d-8f2d-41c1-a141-f5386acf35f1" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for PLANNING_SYSTEM_ID to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="PLANNING_SYSTEM_ID"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.PLANNING_SYSTEM_ID</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="PLANNING_SYSTEM_ID" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet id="c2648721-a4e8-42b5-8228-4a0acad5350e" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for PLANNING_SYSTEM_NAME to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="PLANNING_SYSTEM_NAME"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.PLANNING_SYSTEM_NAME</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="PLANNING_SYSTEM_NAME" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet id="732ab663-e6e6-4eed-a382-cf25f8d83b34" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for TRUCKING_SATURATION_PRIORITY to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="TRUCKING_SATURATION_PRIORITY"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.TRUCKING_SATURATION_PRIORITY</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="TRUCKING_SATURATION_PRIORITY" type="VARCHAR(255)" remarks="TruckingSaturationPriority">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="338b47c4-91cc-4bd2-bc00-654259f7b2b1" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for TARGET_START_UTC to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="TARGET_START_UTC"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.TARGET_START_UTC</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="TARGET_START_UTC" type="DATETIME2" remarks="Target task start time"/>
        </addColumn>
    </changeSet>
    <changeSet id="67b13ac2-9e82-4702-b102-1bb10038d4f5" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for TARGET_END_UTC to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="TARGET_END_UTC"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.TARGET_END_UTC</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="TARGET_END_UTC" type="DATETIME2" remarks="Target task end time"/>
        </addColumn>
    </changeSet>
    <changeSet id="d0c15aeb-1e22-450c-9c5b-6241f8f62eef" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for IMPORTANT_SOURCE_JOB to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="IMPORTANT_SOURCE_JOB"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.IMPORTANT_SOURCE_JOB</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="IMPORTANT_SOURCE_JOB" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="9281ca55-6bd1-40c6-91d3-8b52024a782b" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for IMPORTANT_DUMP_JOB to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="IMPORTANT_DUMP_JOB"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.IMPORTANT_DUMP_JOB</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="IMPORTANT_DUMP_JOB" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="b2b77a53-ebf1-4b47-80f8-2f4a1bdbec6a" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for TARGET_TOTAL_MASS to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="TARGET_TOTAL_MASS"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.TARGET_TOTAL_MASS</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="TARGET_TOTAL_MASS" type="DOUBLE" remarks="Target Mass"/>
        </addColumn>
    </changeSet>
    <changeSet id="837a1f96-06fe-4353-8aad-d0751b416d5e" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for TARGET_TOTAL_VOLUME to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="TARGET_TOTAL_VOLUME"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.TARGET_TOTAL_VOLUME</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="TARGET_TOTAL_VOLUME" type="DOUBLE" remarks="Target Volume"/>
        </addColumn>
    </changeSet>
    <changeSet id="23fe3ac4-e097-447f-b66d-d19c6ba1c4ce" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for ACTUAL_VOLUME to table V2_PROD_PLAN_JOB as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <columnExists tableName="V2_PROD_PLAN_JOB" columnName="ACTUAL_VOLUME"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddColumn V2_PROD_PLAN_JOB.ACTUAL_VOLUME</comment>
        <addColumn tableName="V2_PROD_PLAN_JOB">
            <column name="ACTUAL_VOLUME" type="DOUBLE" remarks="Actual Volume"/>
        </addColumn>
    </changeSet>
    <changeSet id="611a1526-36b1-4d24-8417-ce7dfa85e5d2" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddPrimaryKey for V2_PROD_PLAN_JOB_PK to table V2_PROD_PLAN_JOB as table does not exist or primaryKey already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <primaryKeyExists primaryKeyName="V2_PROD_PLAN_JOB_PK" tableName="V2_PROD_PLAN_JOB"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddPrimaryKey V2_PROD_PLAN_JOB_PK to V2_PROD_PLAN_JOB (OID)</comment>
        <sql dbms="oracle">DELETE FROM V2_PROD_PLAN_JOB WHERE ROWID IN (SELECT RID FROM (SELECT ROWID RID, ROW_NUMBER() OVER (PARTITION BY OID ORDER BY ROWID) RN FROM V2_PROD_PLAN_JOB) WHERE RN &lt;&gt; 1)</sql>
        <sql dbms="mssql">WITH CTE AS (SELECT ROW_NUMBER() OVER (PARTITION BY OID ORDER BY %%physloc%%) AS ROW_NUM FROM V2_PROD_PLAN_JOB) DELETE FROM CTE WHERE ROW_NUM &gt; 1</sql>
        <addPrimaryKey columnNames="OID" constraintName="V2_PROD_PLAN_JOB_PK" tablespace="MW_IDXENT" tableName="V2_PROD_PLAN_JOB"/>
        <rollback>
            <dropPrimaryKey constraintName="V2_PROD_PLAN_JOB_PK" tableName="V2_PROD_PLAN_JOB"/>
        </rollback>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="bd44210a-0d34-4a4d-a51d-28ad08d3c406" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored CreateIndex for PLAN_OID to table V2_PROD_PLAN_JOB as (1) table does not exist, or (2) index already exists." onFail="MARK_RAN">
            <tableExists tableName="V2_PROD_PLAN_JOB"/>
            <not>
                <indexExists indexName="PLAN_OID" tableName="V2_PROD_PLAN_JOB"/>
            </not>
        </preConditions>
        <comment>MO-2743: CreateIndex PLAN_OID on V2_PROD_PLAN_JOB (PLAN_OID)</comment>
        <createIndex unique="false" tablespace="MW_IDXENT" indexName="PLAN_OID" tableName="V2_PROD_PLAN_JOB">
            <column name="PLAN_OID"/>
        </createIndex>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="f741e2de-f9f9-4234-9af6-efcfbddcdda8" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored CreateTable for PROD_PLAN_JOB_ALTERNATE_DUMP as table already exists." onFail="MARK_RAN">
            <not>
                <tableExists tableName="PROD_PLAN_JOB_ALTERNATE_DUMP"/>
            </not>
        </preConditions>
        <comment>MO-2743: CreateTable PROD_PLAN_JOB_ALTERNATE_DUMP</comment>
        <createTable tablespace="MW_ENT" tableName="PROD_PLAN_JOB_ALTERNATE_DUMP">
            <column name="JOB_OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="REFERENCE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="DUMP_OID" type="BIGINT"/>
            <column name="BLEND_REFERENCE_ID" type="VARCHAR(255)"/>
            <column name="DUMP_BLEND_OID" type="BIGINT"/>
            <column name="MAX_MASS" type="DOUBLE"/>
            <column name="MAX_VOLUME" type="DOUBLE"/>
        </createTable>
        <addPrimaryKey columnNames="OID" constraintName="PROD_PLAN_JOB_ALTERNATE_DUM_PK" tablespace="MW_IDXENT" tableName="PROD_PLAN_JOB_ALTERNATE_DUMP"/>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="97f1d601-e310-4b25-9334-f4d0606a135d" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored CreateTable for PROD_PLAN_JOB_ALTERNATE_SOURCE as table already exists." onFail="MARK_RAN">
            <not>
                <tableExists tableName="PROD_PLAN_JOB_ALTERNATE_SOURCE"/>
            </not>
        </preConditions>
        <comment>MO-2743: CreateTable PROD_PLAN_JOB_ALTERNATE_SOURCE</comment>
        <createTable tablespace="MW_ENT" tableName="PROD_PLAN_JOB_ALTERNATE_SOURCE">
            <column name="JOB_OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="REFERENCE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="SOURCE_OID" type="BIGINT"/>
            <column name="MAX_MASS" type="DOUBLE"/>
            <column name="MAX_VOLUME" type="DOUBLE"/>
        </createTable>
        <addPrimaryKey columnNames="OID" constraintName="PROD_PLAN_JOB_ALTERNATE_SOU_PK" tablespace="MW_IDXENT" tableName="PROD_PLAN_JOB_ALTERNATE_SOURCE"/>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="b69e60b4-f444-4992-84e9-16520d530ecd" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored CreateTable for PROD_PLAN_JOB_EQUIPMENT as table already exists." onFail="MARK_RAN">
            <not>
                <tableExists tableName="PROD_PLAN_JOB_EQUIPMENT"/>
            </not>
        </preConditions>
        <comment>MO-2743: CreateTable PROD_PLAN_JOB_EQUIPMENT</comment>
        <createTable tablespace="MW_ENT" tableName="PROD_PLAN_JOB_EQUIPMENT">
            <column name="JOB_OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="REFERENCE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="EQUIPMENT_OID" type="BIGINT"/>
        </createTable>
        <addPrimaryKey columnNames="OID" constraintName="PROD_PLAN_JOB_EQUIPMENT_PK" tablespace="MW_IDXENT" tableName="PROD_PLAN_JOB_EQUIPMENT"/>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="bad402e2-2008-4fef-b1b2-3808eddf6fc2" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored CreateTable for PROD_PLAN_JOB_PRIMARY_DUMP as table already exists." onFail="MARK_RAN">
            <not>
                <tableExists tableName="PROD_PLAN_JOB_PRIMARY_DUMP"/>
            </not>
        </preConditions>
        <comment>MO-2743: CreateTable PROD_PLAN_JOB_PRIMARY_DUMP</comment>
        <createTable tablespace="MW_ENT" tableName="PROD_PLAN_JOB_PRIMARY_DUMP">
            <column name="JOB_OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="REFERENCE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="DUMP_OID" type="BIGINT"/>
            <column name="BLEND_REFERENCE_ID" type="VARCHAR(255)"/>
            <column name="DUMP_BLEND_OID" type="BIGINT"/>
            <column name="TARGET_MASS" type="DOUBLE"/>
            <column name="TARGET_VOLUME" type="DOUBLE"/>
        </createTable>
        <addPrimaryKey columnNames="OID" constraintName="PROD_PLAN_JOB_PRIMARY_DUMP_PK" tablespace="MW_IDXENT" tableName="PROD_PLAN_JOB_PRIMARY_DUMP"/>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="6905710a-0918-4667-a213-0dd7943ce4ca" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored CreateTable for PROD_PLAN_JOB_PRIMARY_SOURCE as table already exists." onFail="MARK_RAN">
            <not>
                <tableExists tableName="PROD_PLAN_JOB_PRIMARY_SOURCE"/>
            </not>
        </preConditions>
        <comment>MO-2743: CreateTable PROD_PLAN_JOB_PRIMARY_SOURCE</comment>
        <createTable tablespace="MW_ENT" tableName="PROD_PLAN_JOB_PRIMARY_SOURCE">
            <column name="JOB_OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="OID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="REFERENCE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="SOURCE_OID" type="BIGINT"/>
            <column name="TARGET_MASS" type="DOUBLE"/>
            <column name="TARGET_VOLUME" type="DOUBLE"/>
        </createTable>
        <addPrimaryKey columnNames="OID" constraintName="PROD_PLAN_JOB_PRIMARY_SOURC_PK" tablespace="MW_IDXENT" tableName="PROD_PLAN_JOB_PRIMARY_SOURCE"/>
        <modifySql dbms="mssql,h2,postgresql" applyToRollback="true">
            <regExpReplace replace="( USING INDEX)? (ON|TABLESPACE) MW_[A-Z]+" with=""/>
        </modifySql>
    </changeSet>
    <changeSet id="28c26b1e-ccdf-41bd-8f53-61c6d0fcec4c" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddForeignKeyConstraint for PROD_PLAN_JOB_ALTERNATE_DU_FK1 to table PROD_PLAN_JOB_ALTERNATE_DUMP as (1) the source or referenced column does not exist, or (2) the foreignKey already exists." onFail="MARK_RAN">
            <columnExists tableName="PROD_PLAN_JOB_ALTERNATE_DUMP" columnName="JOB_OID"/>
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="OID"/>
            <not>
                <foreignKeyConstraintExists foreignKeyTableName="PROD_PLAN_JOB_ALTERNATE_DUMP" foreignKeyName="PROD_PLAN_JOB_ALTERNATE_DU_FK1"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddForeignKeyConstraint PROD_PLAN_JOB_ALTERNATE_DU_FK1 to PROD_PLAN_JOB_ALTERNATE_DUMP (JOB_OID)</comment>
        <sql>DELETE FROM PROD_PLAN_JOB_ALTERNATE_DUMP WHERE JOB_OID IS NOT NULL AND NOT EXISTS (SELECT 'x' FROM V2_PROD_PLAN_JOB WHERE V2_PROD_PLAN_JOB.OID = PROD_PLAN_JOB_ALTERNATE_DUMP.JOB_OID)</sql>
        <addForeignKeyConstraint baseTableName="PROD_PLAN_JOB_ALTERNATE_DUMP" baseColumnNames="JOB_OID" constraintName="PROD_PLAN_JOB_ALTERNATE_DU_FK1" referencedTableName="V2_PROD_PLAN_JOB" referencedColumnNames="OID" onDelete="NO ACTION"/>
        <rollback>
            <dropForeignKeyConstraint baseTableName="PROD_PLAN_JOB_ALTERNATE_DUMP" constraintName="PROD_PLAN_JOB_ALTERNATE_DU_FK1"/>
        </rollback>
    </changeSet>
    <changeSet id="09ffecd3-54bd-49f4-a6ca-03f8462e8dda" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddForeignKeyConstraint for PROD_PLAN_JOB_ALTERNATE_SO_FK1 to table PROD_PLAN_JOB_ALTERNATE_SOURCE as (1) the source or referenced column does not exist, or (2) the foreignKey already exists." onFail="MARK_RAN">
            <columnExists tableName="PROD_PLAN_JOB_ALTERNATE_SOURCE" columnName="JOB_OID"/>
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="OID"/>
            <not>
                <foreignKeyConstraintExists foreignKeyTableName="PROD_PLAN_JOB_ALTERNATE_SOURCE" foreignKeyName="PROD_PLAN_JOB_ALTERNATE_SO_FK1"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddForeignKeyConstraint PROD_PLAN_JOB_ALTERNATE_SO_FK1 to PROD_PLAN_JOB_ALTERNATE_SOURCE (JOB_OID)</comment>
        <sql>DELETE FROM PROD_PLAN_JOB_ALTERNATE_SOURCE WHERE JOB_OID IS NOT NULL AND NOT EXISTS (SELECT 'x' FROM V2_PROD_PLAN_JOB WHERE V2_PROD_PLAN_JOB.OID = PROD_PLAN_JOB_ALTERNATE_SOURCE.JOB_OID)</sql>
        <addForeignKeyConstraint baseTableName="PROD_PLAN_JOB_ALTERNATE_SOURCE" baseColumnNames="JOB_OID" constraintName="PROD_PLAN_JOB_ALTERNATE_SO_FK1" referencedTableName="V2_PROD_PLAN_JOB" referencedColumnNames="OID" onDelete="NO ACTION"/>
        <rollback>
            <dropForeignKeyConstraint baseTableName="PROD_PLAN_JOB_ALTERNATE_SOURCE" constraintName="PROD_PLAN_JOB_ALTERNATE_SO_FK1"/>
        </rollback>
    </changeSet>
    <changeSet id="3aef15f0-7557-4d48-96be-a5f0f65e652c" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddForeignKeyConstraint for PROD_PLAN_JOB_EQUIPMENT_FK1 to table PROD_PLAN_JOB_EQUIPMENT as (1) the source or referenced column does not exist, or (2) the foreignKey already exists." onFail="MARK_RAN">
            <columnExists tableName="PROD_PLAN_JOB_EQUIPMENT" columnName="JOB_OID"/>
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="OID"/>
            <not>
                <foreignKeyConstraintExists foreignKeyTableName="PROD_PLAN_JOB_EQUIPMENT" foreignKeyName="PROD_PLAN_JOB_EQUIPMENT_FK1"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddForeignKeyConstraint PROD_PLAN_JOB_EQUIPMENT_FK1 to PROD_PLAN_JOB_EQUIPMENT (JOB_OID)</comment>
        <sql>DELETE FROM PROD_PLAN_JOB_EQUIPMENT WHERE JOB_OID IS NOT NULL AND NOT EXISTS (SELECT 'x' FROM V2_PROD_PLAN_JOB WHERE V2_PROD_PLAN_JOB.OID = PROD_PLAN_JOB_EQUIPMENT.JOB_OID)</sql>
        <addForeignKeyConstraint baseTableName="PROD_PLAN_JOB_EQUIPMENT" baseColumnNames="JOB_OID" constraintName="PROD_PLAN_JOB_EQUIPMENT_FK1" referencedTableName="V2_PROD_PLAN_JOB" referencedColumnNames="OID" onDelete="NO ACTION"/>
        <rollback>
            <dropForeignKeyConstraint baseTableName="PROD_PLAN_JOB_EQUIPMENT" constraintName="PROD_PLAN_JOB_EQUIPMENT_FK1"/>
        </rollback>
    </changeSet>
    <changeSet id="787098a1-01c2-4767-865e-10a47e7c5889" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddForeignKeyConstraint for PROD_PLAN_JOB_PRIMARY_DUMP_FK1 to table PROD_PLAN_JOB_PRIMARY_DUMP as (1) the source or referenced column does not exist, or (2) the foreignKey already exists." onFail="MARK_RAN">
            <columnExists tableName="PROD_PLAN_JOB_PRIMARY_DUMP" columnName="JOB_OID"/>
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="OID"/>
            <not>
                <foreignKeyConstraintExists foreignKeyTableName="PROD_PLAN_JOB_PRIMARY_DUMP" foreignKeyName="PROD_PLAN_JOB_PRIMARY_DUMP_FK1"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddForeignKeyConstraint PROD_PLAN_JOB_PRIMARY_DUMP_FK1 to PROD_PLAN_JOB_PRIMARY_DUMP (JOB_OID)</comment>
        <sql>DELETE FROM PROD_PLAN_JOB_PRIMARY_DUMP WHERE JOB_OID IS NOT NULL AND NOT EXISTS (SELECT 'x' FROM V2_PROD_PLAN_JOB WHERE V2_PROD_PLAN_JOB.OID = PROD_PLAN_JOB_PRIMARY_DUMP.JOB_OID)</sql>
        <addForeignKeyConstraint baseTableName="PROD_PLAN_JOB_PRIMARY_DUMP" baseColumnNames="JOB_OID" constraintName="PROD_PLAN_JOB_PRIMARY_DUMP_FK1" referencedTableName="V2_PROD_PLAN_JOB" referencedColumnNames="OID" onDelete="NO ACTION"/>
        <rollback>
            <dropForeignKeyConstraint baseTableName="PROD_PLAN_JOB_PRIMARY_DUMP" constraintName="PROD_PLAN_JOB_PRIMARY_DUMP_FK1"/>
        </rollback>
    </changeSet>
    <changeSet id="f40d234d-5e71-4bdb-a6af-c1018d2d9d83" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddForeignKeyConstraint for PROD_PLAN_JOB_PRIMARY_SOUR_FK1 to table PROD_PLAN_JOB_PRIMARY_SOURCE as (1) the source or referenced column does not exist, or (2) the foreignKey already exists." onFail="MARK_RAN">
            <columnExists tableName="PROD_PLAN_JOB_PRIMARY_SOURCE" columnName="JOB_OID"/>
            <columnExists tableName="V2_PROD_PLAN_JOB" columnName="OID"/>
            <not>
                <foreignKeyConstraintExists foreignKeyTableName="PROD_PLAN_JOB_PRIMARY_SOURCE" foreignKeyName="PROD_PLAN_JOB_PRIMARY_SOUR_FK1"/>
            </not>
        </preConditions>
        <comment>MO-2743: AddForeignKeyConstraint PROD_PLAN_JOB_PRIMARY_SOUR_FK1 to PROD_PLAN_JOB_PRIMARY_SOURCE (JOB_OID)</comment>
        <sql>DELETE FROM PROD_PLAN_JOB_PRIMARY_SOURCE WHERE JOB_OID IS NOT NULL AND NOT EXISTS (SELECT 'x' FROM V2_PROD_PLAN_JOB WHERE V2_PROD_PLAN_JOB.OID = PROD_PLAN_JOB_PRIMARY_SOURCE.JOB_OID)</sql>
        <addForeignKeyConstraint baseTableName="PROD_PLAN_JOB_PRIMARY_SOURCE" baseColumnNames="JOB_OID" constraintName="PROD_PLAN_JOB_PRIMARY_SOUR_FK1" referencedTableName="V2_PROD_PLAN_JOB" referencedColumnNames="OID" onDelete="NO ACTION"/>
        <rollback>
            <dropForeignKeyConstraint baseTableName="PROD_PLAN_JOB_PRIMARY_SOURCE" constraintName="PROD_PLAN_JOB_PRIMARY_SOUR_FK1"/>
        </rollback>
    </changeSet>
</databaseChangeLog>
