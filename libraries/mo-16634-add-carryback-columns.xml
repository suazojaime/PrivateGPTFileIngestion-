<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Copyright (c) 2023 Caterpillar -->

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext /dbchangelog-ext-3.1.xsd">
    <changeSet id="21347762-cf42-41ae-9e0f-1beb86112eec" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for CARRYBACK_PAYLOAD to table PRODUCTION_EVENT as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="PRODUCTION_EVENT"/>
            <not>
                <columnExists tableName="PRODUCTION_EVENT" columnName="CARRYBACK_PAYLOAD"/>
            </not>
        </preConditions>
        <comment>MO-16634: AddColumn PRODUCTION_EVENT.CARRYBACK_PAYLOAD</comment>
        <addColumn tableName="PRODUCTION_EVENT">
            <column name="CARRYBACK_PAYLOAD" type="DOUBLE" remarks="The carryback payload value associated with the event"/>
        </addColumn>
        <rollback>
            <dropColumn columnName="CARRYBACK_PAYLOAD" tableName="PRODUCTION_EVENT"/>
        </rollback>
    </changeSet>
    <changeSet id="3858a3a8-fac2-49d8-ac2d-127a83093895" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for CARRYBACK_PAYLOAD to table SEG_PRODUCTION_EVENT_DETAILS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="SEG_PRODUCTION_EVENT_DETAILS"/>
            <not>
                <columnExists tableName="SEG_PRODUCTION_EVENT_DETAILS" columnName="CARRYBACK_PAYLOAD"/>
            </not>
        </preConditions>
        <comment>MO-16634: AddColumn SEG_PRODUCTION_EVENT_DETAILS.CARRYBACK_PAYLOAD</comment>
        <addColumn tableName="SEG_PRODUCTION_EVENT_DETAILS">
            <column name="CARRYBACK_PAYLOAD" type="DOUBLE" remarks="The payload value material left on the truck bed."/>
        </addColumn>
        <rollback>
            <dropColumn columnName="CARRYBACK_PAYLOAD" tableName="SEG_PRODUCTION_EVENT_DETAILS"/>
        </rollback>
    </changeSet>
    <changeSet id="aecb0f0e-d44e-4d84-b5cb-b84508dfaf95" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for CARRYBACK_START_TIME to table SEG_PRODUCTION_EVENT_DETAILS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="SEG_PRODUCTION_EVENT_DETAILS"/>
            <not>
                <columnExists tableName="SEG_PRODUCTION_EVENT_DETAILS" columnName="CARRYBACK_START_TIME"/>
            </not>
        </preConditions>
        <comment>MO-16634: AddColumn SEG_PRODUCTION_EVENT_DETAILS.CARRYBACK_START_TIME</comment>
        <addColumn tableName="SEG_PRODUCTION_EVENT_DETAILS">
            <column name="CARRYBACK_START_TIME" type="DATETIME2" remarks="The carryback cycle start time"/>
        </addColumn>
        <rollback>
            <dropColumn columnName="CARRYBACK_START_TIME" tableName="SEG_PRODUCTION_EVENT_DETAILS"/>
        </rollback>
    </changeSet>
    <changeSet id="4895b369-d2d8-450c-aa70-616d8c2803f8" author="MineStar" context="Production/Production_Management" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for LOAD_START_TIME to table SEG_PRODUCTION_EVENT_DETAILS as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="SEG_PRODUCTION_EVENT_DETAILS"/>
            <not>
                <columnExists tableName="SEG_PRODUCTION_EVENT_DETAILS" columnName="LOAD_START_TIME"/>
            </not>
        </preConditions>
        <comment>MO-16634: AddColumn SEG_PRODUCTION_EVENT_DETAILS.LOAD_START_TIME</comment>
        <addColumn tableName="SEG_PRODUCTION_EVENT_DETAILS">
            <column name="LOAD_START_TIME" type="DATETIME2" remarks="The Load start time"/>
        </addColumn>
        <rollback>
            <dropColumn columnName="LOAD_START_TIME" tableName="SEG_PRODUCTION_EVENT_DETAILS"/>
        </rollback>
    </changeSet>
</databaseChangeLog>
