<?xml version="1.0"?>
<!-- Copyright (c) 2019 Caterpillar -->

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="historical">

    <class
            name="minestar.production.domain.kpisummaries.KpiAnnotation"
            table="ANNOTATION_KPI">

        <meta attribute="description">Information about something noteworthy that may have happened in the productivity charts</meta>
        <meta attribute="table">
            tablespace=MW_ENT
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXENT
        </meta>
        <id
                name="OID"
                type="java.lang.Long"
                column="ANNOTATION_OID"
                >
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <property
                name="note"
                type="java.lang.String"
                column="NOTE" length="4000"
                >
            <meta attribute="description">The description of something noteworthy that happened.</meta>
        </property>

        <property
                name="createdTime"
                type="TimestampType"
                column="CREATEDTIME_UTC"
                not-null="true"
                >
            <meta attribute="timestamp">true</meta>
            <meta attribute="utc-description">The utc time the note was saved or updated.</meta>
            <meta attribute="description">The time the note was saved or updated.</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property
                name="section"
                type="java.lang.String"
                column="SECTION"
                length="254"
                not-null="true"
                >
            <meta attribute="description">Indicates which production section the annotation belongs to.</meta>
        </property>

        <many-to-one
                name="createdByUser"
                class="minestar.platform.domain.user.UserReference"
                column="CREATED_BY_USER"
                not-found="ignore"
                >
            <meta attribute="description">The user who wrote the annotation.</meta>
        </many-to-one>

        <many-to-one
                name="fleetRef"
                class="minestar.pitlink.domain.machine.FleetReference"
                column="FLEET_OID"
                >
            <meta attribute="description">A reference to the fleet of machines to which this annotation applies.</meta>
        </many-to-one>

        <property
                name="appliesToShift"
                type="java.lang.Boolean"
                column="APPLIES_TO_SHIFT">
            <meta attribute="description">Indicates whether the annotation is a general comment that applies to the entire shift.</meta>
        </property>

        <property
                name="category"
                column="CATEGORY"
                not-null="true"
                >
            <meta attribute="description">Indicates what type of occurrence may have happened to cause something
                noteworthy
            </meta>
            <type name="org.hibernate.type.EnumType">
                <param name="enumClass">minestar.production.service.kpisummaries.production.KpiAnnotationCategory</param>
            </type>
        </property>

    </class>
</hibernate-mapping>
