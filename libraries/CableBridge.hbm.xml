<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="model" default-lazy="false" default-access="field">

    <class name="minestar.mine.domain.minemodel.CableBridge"
            table="CABLE_BRIDGE"
            dynamic-update="true">

        <meta attribute="table">
            tablespace=MW_ENT
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXENT
        </meta>
        <meta attribute="description">A Cable Bridge.</meta>
        <cache usage="read-write" region="model-versioned"/>

        <id name="OID" type="long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <version name="version" access="field">
            <meta attribute="description">The version number for optimistic locking</meta>
        </version>

        <property name="active" type="boolean" column="IS_ACTIVE" not-null="true">
                <meta attribute="defaultValue">true</meta>
                <meta attribute="description">Is this Cable Bridge active</meta>
        </property>

        <property name="name" type="string" column="NAME" not-null="true" unique="true">
            <meta attribute="description">A user supplied identifier for this Cable Bridge.</meta>
        </property>

        <property name="avoidanceRadius" type="int" column="AVOIDANCE_RADIUS" not-null="false">
            <meta attribute="description">The radius to use when calculating the avoidance zone for this Cable Bridge.</meta>
        </property>

        <many-to-one name="connectedMachine"
                     class="minestar.pitlink.domain.machine.MachineReference"
                     column="CONNECTED_MACHINE"
                     not-null="false">
                <meta attribute="description">The Machine that is connected to the cable.</meta>
        </many-to-one>

        <many-to-one name="machineSidePole"
                     class="minestar.pitlink.domain.machine.MachineReference"
                     column="MACHINE_POLE"
                     not-null="true">
                <meta attribute="description">The cable pole on the side of the cable bridge that is connected to a machine.</meta>
        </many-to-one>

        <many-to-one name="otherSidePole"
                     class="minestar.pitlink.domain.machine.MachineReference"
                     column="LOADER_POLE"
                     not-null="true">
                <meta attribute="description">The cable pole on the other side of the cable bridge.</meta>
        </many-to-one>

        <many-to-one name="machineSideStaticZone"
                     class="minestar.mine.domain.minemodel.ZoneReference"
                     column="MACHINE_STATIC_ZONE"
                     not-null="false">
                <meta attribute="description">A static zone around the pole on the machine side of the bridge.</meta>
        </many-to-one>

        <many-to-one name="otherSideStaticZone"
                     class="minestar.mine.domain.minemodel.ZoneReference"
                     column="OTHER_STATIC_ZONE"
                     not-null="false">
                <meta attribute="description">A static zone around the pole on the other side of the bridge.</meta>
        </many-to-one>

        <many-to-one name="dynamicZone"
                     class="minestar.mine.domain.minemodel.ZoneReference"
                     column="DYNAMIC_ZONE"
                     not-null="false">
                <meta attribute="description">A dynamic zone that connects the pole to the machine.</meta>
        </many-to-one>

        <many-to-one name="bedDownZone"
                     class="minestar.mine.domain.minemodel.ZoneReference"
                     column="BED_DOWN_ZONE"
                     not-null="false">
                <meta attribute="description">A dynamic zone that connects the two poles.</meta>
        </many-to-one>

        <list name="anchorPoints" table="CABLE_BRIDGE_ANCHOR_POINTS">
            <meta attribute="collection-table">
                tablespace=MW_ENT
            </meta>
            <meta attribute="collection-primary-key">
                tablespace=MW_IDXENT
            </meta>
            <meta attribute="index-alias">pointNr</meta>
            <key column="CABLE_BRIDGE_OID" not-null="true"/>
            <list-index column="POINT_NR"/>
            <element type="XYZCoordinate">
                <column name="X"/>
                <column name="Y"/>
                <column name="Z"/>
            </element>
        </list>

    </class>
</hibernate-mapping>


