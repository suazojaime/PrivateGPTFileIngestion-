<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Copyright (c) 2021 Caterpillar -->

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <changeSet id="85dce993-d166-4132-b1bb-61e4beb533b6" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for WATER_TANK_LEVEL to table MACHINE_IN_PIT as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="MACHINE_IN_PIT"/>
            <not>
                <columnExists tableName="MACHINE_IN_PIT" columnName="WATER_TANK_LEVEL"/>
            </not>
        </preConditions>
        <comment>MO-2903: AddColumn MACHINE_IN_PIT.WATER_TANK_LEVEL</comment>
        <addColumn tableName="MACHINE_IN_PIT">
            <column name="WATER_TANK_LEVEL" type="DOUBLE" remarks="Percentage of the tank capacity that the water truck currently holds"/>
        </addColumn>
    </changeSet>
    <changeSet id="3fd95f67-84ca-430a-a552-240e6e9abe70" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for WATER_REFILL_STATUS to table MACHINE_IN_PIT as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="MACHINE_IN_PIT"/>
            <not>
                <columnExists tableName="MACHINE_IN_PIT" columnName="WATER_REFILL_STATUS"/>
            </not>
        </preConditions>
        <comment>MO-2903: AddColumn MACHINE_IN_PIT.WATER_REFILL_STATUS</comment>
        <addColumn tableName="MACHINE_IN_PIT">
            <column name="WATER_REFILL_STATUS" type="INT" remarks="Status to determine if the water truck should be sent to a water refill station"/>
        </addColumn>
    </changeSet>
    <changeSet id="b9ae750b-59cd-4718-83f4-8795861968de" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for WATER_REFILL_STATUS_SOURCE to table MACHINE_IN_PIT as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="MACHINE_IN_PIT"/>
            <not>
                <columnExists tableName="MACHINE_IN_PIT" columnName="WATER_REFILL_STATUS_SOURCE"/>
            </not>
        </preConditions>
        <comment>MO-2903: AddColumn MACHINE_IN_PIT.WATER_REFILL_STATUS_SOURCE</comment>
        <addColumn tableName="MACHINE_IN_PIT">
            <column name="WATER_REFILL_STATUS_SOURCE" type="INT" remarks="Whether the refill status was set by the field or by MineStar"/>
        </addColumn>
    </changeSet>
    <changeSet id="f411b1ff-e2fa-42be-8ced-830e5117dcba" author="MineStar" failOnError="false">
        <preConditions onFailMessage="Ignored AddColumn for WATER_REFUEL_STATUS to table MACHINE_IN_PIT as table does not exist or column already exists." onFail="MARK_RAN">
            <tableExists tableName="MACHINE_IN_PIT"/>
            <not>
                <columnExists tableName="MACHINE_IN_PIT" columnName="WATER_REFUEL_STATUS"/>
            </not>
        </preConditions>
        <comment>MO-2903: AddColumn MACHINE_IN_PIT.WATER_REFUEL_STATUS</comment>
        <addColumn tableName="MACHINE_IN_PIT">
            <column name="WATER_REFUEL_STATUS" type="INT" remarks="Status to determine if the water truck should avoid being sent to refuel because its water tank level is above the refuel threshold"/>
        </addColumn>
    </changeSet>
</databaseChangeLog>
