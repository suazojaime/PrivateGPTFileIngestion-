<?xml version="1.0" encoding="utf-8" ?>
<queries version="5.2" >
    <query name="machines" itemName="machine" timeout="30" >
        SELECT *
        FROM {model}.machine
    </query>
    <query name="crews" itemName="crew" timeout="30" >
        SELECT *
        FROM {model}.crew
    </query>
    <query name="person_crews" itemName="person_crew" timeout="30" >
        SELECT *
        FROM {model}.person_crew
    </query>
    <query name="persons" itemName="person" timeout="30" >
        SELECT *
        FROM {model}.person
    </query>
    <query name="delayclasses" itemName="delayclass" timeout="30" >
        SELECT *
        FROM {model}.delayclass
    </query>
    <query name="delay_activity_types" itemName="delay_activity_type" timeout="30" >
        SELECT *
        FROM {model}.delay_activity_type
    </query>
    <query name="fuelandlubetypes" itemName="fuelandlubetype" timeout="30" >
        SELECT *
        FROM {model}.fuelandlubetype
    </query>
    <query name="shifts" itemName="shift" timeout="30" >
        SELECT *
        FROM {model}.shift
    </query>
    <query name="grades" itemName="grade" timeout="30" >
        SELECT *
        FROM {model}.grade
    </query>
    <query name="materials" itemName="material" timeout="30" >
        SELECT *
        FROM {model}.material
    </query>
    <query name="locations" itemName="location" timeout="30" >
        SELECT *
        FROM {model}.location
    </query>
    <query name="machineClassDetails" itemName="machineClass" timeout="30" >
    select oid, active_d, classcategory_n, manufacturer, name, nominalpayload
    from va_machineclass
    where active = 1
    order by oid
    </query>
    <query name="machineDetails" itemName="machine" timeout="30" >
    select m.oid, m.active_d, m.name, m.serialnumber, m.externalref, m.machineclassoid, m.hasonboardhardware_d, m.healthplatform_d, h.configpartnum, h.configversion, h.hardwarepartnum, h.hardwareversion, h.softwareversion, h.sourcecodepartnum
    from va_machine m
    left outer join v_machine_health_info h on h.oid = m.oid
    order by m.oid
    </query>
    <query name="machineHardware" itemName="component" timeout="60" >
    select X.machineoid,X.hwserial,X.Active_D,X."machineConfig Version" as machineConfigVersion,Y.componentname,Y.softwarename,Y.softwaregroupdesc,Y.softwareversion from
    (select c.name,c.serialnumber,c.Active_D,d."machineConfig Version",a.machineoid,b.hw_serial as hwserial,b.hw_version as hwversion from v_version_info a, {model}.component_version_info b, v_machine c , r_onboard_files d
    where a.oid=b.oid and a.machineoid=c.oid and c.oid=d.machine_oid) X,
    (select b.SW_VERSION softwareversion,displayLocalTime(b.CHECKEDTIME_UTC) checkedtime,displayLocalTime(b.OBTAINEDTIME_UTC) obtainedtime,b.SW_NAME softwarename,b.SW_GR_DESC softwaregroupdesc,b.SW_RELEASE,a.Hw_serial as "HWSERIAL",a.component_name componentname from {model}.component_version_info a, {model}.SOFTWARE_VERSION_INFO b where a.COMPONENT_VERSION_OID=b.oid) Y
    where X.hwserial=Y.Hwserial
    order by x.machineoid, Y.componentname
    </query>
    <query name="delayTypes" itemName="delayType" timeout="30" >
    select oid, active_d, delaycategory_n, name, description, externalref, enginestopped, productionreportingonly
    from va_delaytype
    order by oid
    </query>
    <query name="lastPositionReportTimes" itemName="lastPositionReportTime" timeout="30" >
    select oid, lastPositionReportDate_UTC from v_machine_in_pit order by oid
    </query>
    <query name="jobConfigurations" itemName="jobConfiguration" timeout="30" >
        SELECT D.JOB_NAME, T.PREV_FIRE_TIME, T.NEXT_FIRE_TIME
        FROM {model}.QRTZ_JOB_DETAILS D LEFT OUTER JOIN {model}.QRTZ_TRIGGERS T ON T.JOB_NAME = D.JOB_NAME
        WHERE dbms_lob.instr(D.JOB_DATA, utl_raw.cast_to_raw('Health.VIMS Data Import'),1,1) > 0
    </query>
</queries>
