<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="model">

    <!-- MachineRestriction is an immutable class - all property access must be by field -->
    <class name="minestar.mine.domain.minemodel.underground.restriction.UGRestriction" table="UG_RESTRICTION">
        <meta attribute="table">
            tablespace=MW_ENT
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXENT
        </meta>

        <meta attribute="description">A restriction between a machine and a goal (load / dump / inversion)</meta>

        <composite-id name="pk" class="minestar.mine.domain.minemodel.underground.restriction.UGRestrictionPk" access="field">
            <meta attribute="alias" inherit="false"/>
            <key-many-to-one name="machine" class="minestar.pitlink.domain.machine.MachineReference" access="field" column="MACHINE_OID">
                <meta attribute="alias" inherit="false">machine</meta>
                <meta attribute="manyToOne">minestar.pitlink.domain.machine.MachineImpl</meta>
                <meta attribute="description">The machine to which the restriction applies.</meta>
            </key-many-to-one>
            <key-property name="goalOID"  type="java.lang.Long" access="field" column="GOAL_OID">
                <meta attribute="alias" inherit="false">goalOID</meta>
                <meta attribute="description">The OID of the goal to which the machine is restricted.</meta>
            </key-property>
            <key-property name="goalName" type="java.lang.String" access="field" column="GOAL_NAME">
                <meta attribute="alias" inherit="false">goalName</meta>
                <meta attribute="description">The name of the goal to which the machine is restricted.</meta>
            </key-property>
            <key-property name="goalType" type="java.lang.String" access="field" column="GOAL_TYPE">
                <meta attribute="alias" inherit="false">goalType</meta>
                <meta attribute="description">The type of the goal to which the machine is restricted.</meta>
            </key-property>
        </composite-id>

        <component name="flags" class="minestar.mine.domain.minemodel.underground.restriction.UGRestrictionFlags" access="field" lazy="false">
            <meta attribute="alias" inherit="false"/>
            <property name="provisional" type="boolean" access="field">
                <meta attribute="alias" inherit="false">provisional</meta>
                <meta attribute="description">Is this a provisional restriction? 0=Absolute, 1=Provisional</meta>
                <column name="IS_PROVISIONAL" default="0" not-null="true"/>
            </property>
            <property name="barr" type="boolean" access="field">
                <meta attribute="alias" inherit="false">barr</meta>
                <meta attribute="description">Is this a barr restriction? 0=Lock, 1=Barr</meta>
                <column name="IS_BARR" default="0" not-null="true"/>
            </property>
            <property name="source" type="boolean" access="field">
                <meta attribute="alias" inherit="false">source</meta>
                <meta attribute="description">Is the server machine a source (e.g. loader)? 0=NotSource, 1=Source</meta>
                <column name="IS_SOURCE" default="0" not-null="true"/>
            </property>
            <property name="sink" type="boolean" access="field">
                <meta attribute="alias" inherit="false">sink</meta>
                <meta attribute="description">Is there server machine a sink (e.g. processor)? 0=NotSink, 1=Sink</meta>
                <column name="IS_SINK" default="0" not-null="true"/>
            </property>
        </component>
    </class>

</hibernate-mapping>
