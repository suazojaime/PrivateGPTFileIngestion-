<?xml version="1.0"?>
<!-- Copyright (c) 2019 Caterpillar -->

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="historical" default-access="field">

    <subclass name="minestar.assignment.domain.event.AutoAssignmentEvent" extends="minestar.assignment.domain.event.AssignmentEvent"
              discriminator-value="AutoAssignment"
            >
        <meta attribute="description">An automatic assignment event</meta>

        <property
                name="message"
                type="java.lang.String"
                column="MESSAGE"
                length="254"
                >
            <meta attribute="description">The message text</meta>
        </property>

        <property
                name="action"
                type="java.lang.String"
                column="ACTION"
                length="254"
                >
            <meta attribute="description">The action type</meta>
        </property>

        <property
                name="reason"
                type="java.lang.String"
                column="REASON"
                length="254"
                >
            <meta attribute="description">The reason of the auto assignment</meta>
        </property>

        <property
                name="typeOfAssignment"
                type="java.lang.String"
                column="ASSIGNMENT_TYPE"
                length="254"
                >
            <meta attribute="description">The assignment type in</meta>
        </property>

        <many-to-one
                name="previousDestination"
                column="PREVIOUSDESTINATION"
                class="minestar.mine.domain.minemodel.LocationReference"
                not-found="ignore"
                >
        </many-to-one>
        <many-to-one
                name="previousMaterial"
                column="PREVIOUSMATERIAL"
                class="minestar.machinetracking.domain.MaterialReference"
                not-found="ignore"
                >
        </many-to-one>
        <many-to-one
                name="lastKnownLocation"
                column="LASTKNOWNLOCATION"
                class="minestar.mine.domain.minemodel.LocationReference"
                not-found="ignore"
                >
        </many-to-one>
        <many-to-one
                name="server"
                column="SERVER"
                class="minestar.pitlink.domain.machine.MachineReference"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="serverDest"
                type="java.lang.String"
                column="SERVERDEST"
                length="254"
                >
            <meta attribute="description">The server destination</meta>
        </property>
        <property
                name="previousPath"
                type="java.lang.String"
                column="PREVIOUSPATH"
                length="254"
                >
            <meta attribute="description">The previous path</meta>
        </property>
        <many-to-one
                name="assignedTruck"
                column="ASSIGNEDTRUCK"
                class="minestar.pitlink.domain.machine.MachineReference"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="assignedTruckName"
                type="java.lang.String"
                column="ASSIGNEDTRUCKNAME"
                length="254"
                >
            <meta attribute="description">The assigned truck name</meta>
        </property>
        <many-to-one
                name="assignedDestination"
                column="ASSIGNEDDESTINATION"
                class="minestar.mine.domain.minemodel.LocationReference"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="messagePriority"
                type="java.lang.Integer"
                column="MESSAGEPRIORITY"
                >
            <meta attribute="description">The message priority</meta>
        </property>
        <property
                name="assignmentTrigger"
                type="minestar.domain.model.persistence.AssignmentTriggerUserType"
                column="ASSIGNMENTTRIGGER"
                >
            <meta attribute="description">The assignment trigger</meta>
        </property>
        <property
                name="assignmentContext"
                type="java.lang.String"
                column="ASSIGNMENTCONTEXT"
                length="254"
                >
            <meta attribute="description">The assignment context</meta>
        </property>
        <many-to-one
                name="currentWaypoint"
                column="CURRENTWAYPOINT"
                class="minestar.mine.domain.minemodel.WaypointReference"
                not-found="ignore"
                lazy="false"
                >
        </many-to-one>
        <property
                name="travelDuration"
                column="TRAVELTIME"
                >
            <meta attribute="description">The travel duration</meta>
            <type name="quantity">
                <param name="unitType">duration</param>
            </type>
        </property>
        <property
                name="expectedArrivalTime"
                type="TimestampType"
                column="EXPECTEDARRIVALTIME_UTC"
                >

            <meta attribute="utc-description">The expected arrival utc time</meta>
            <meta attribute="description">The expected arrival time</meta>
            <meta attribute="view-localtime">true</meta>
        </property>
        <property
                name="assignmentType"
                type="java.lang.String"
                column="ASSIGNMENTTYPE"
                length="254"
                >
            <meta attribute="description">The assignment type</meta>
        </property>
        <many-to-one
                name="currentMaterial"
                column="CURRENTMATERIAL"
                class="minestar.machinetracking.domain.MaterialReference"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="currentMaterialDesc"
                type="java.lang.String"
                column="CURRENTMATERIALDESC"
                length="254"
                >
            <meta attribute="description">The current material description</meta>
        </property>
        <many-to-one
                name="assignedMaterial"
                column="ASSIGNEDMATERIAL"
                class="minestar.machinetracking.domain.MaterialReference"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="assignedMaterialDesc"
                type="java.lang.String"
                column="ASSIGNEDMATERIALDESC"
                length="254"
                >
            <meta attribute="description">The material description for the assignment</meta>
        </property>
        <property
                name="currentStatus"
                type="minestar.domain.model.persistence.MachineStatusUserType"
                column="CURRENTSTATUS"
                >
            <meta attribute="description">The current status</meta>
            <meta attribute="choices" inherit="false">choice:truckStatus</meta>
        </property>
        <property
                name="wasScheduled"
                type="java.lang.Boolean"
                column="WASSCHEDULED"
                >
            <meta attribute="description">Was it a scheduled auto assignment</meta>
        </property>
        <property
                name="color"
                type="java.lang.Integer"
                column="COLOR"
                >
            <meta attribute="choices" inherit="false">choice:colour</meta>
            <meta attribute="description">The display color of assignment</meta>
        </property>
        <property
                name="freeDestPercent"
                column="FREEDESTPERCENT"
                >
            <meta attribute="description">The precent of destinations available for assignment</meta>
            <type name="quantity">
                <param name="unitType">ratio</param>
            </type>
        </property>
        <property
                name="freeGrpDestPercent"
                column="FREEGRPDESTPERCENT"
                >
            <meta attribute="description">The precent of group destinations available for assignment</meta>
            <type name="quantity">
                <param name="unitType">ratio</param>
            </type>
        </property>
    </subclass>

    <subclass name="minestar.assignment.domain.event.ScheduledAssignmentEvent" extends="minestar.assignment.domain.event.AssignmentEvent"
              discriminator-value="ScheduledAssignmentEvent"
            >
        <meta attribute="description">A scheduled assignment event</meta>

        <many-to-one
                name="schedAssignmentTruck"
                column="SCHEDASSIGNMENTTRUCK"
                class="minestar.pitlink.domain.machine.MachineReference"
                not-found="ignore"
                >
        </many-to-one>
        <many-to-one
                name="schedAssignmentMaterial"
                column="SCHEDASSIGNMENTMATERIAL"
                class="minestar.machinetracking.domain.MaterialReference"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="schedAssignmentType"
                type="java.lang.String"
                column="SCHEDASSIGNMENTTYPE"
                length="254"
                >
            <meta attribute="description">The scheduled assignment type</meta>
        </property>
        <property
                name="schedAssignmentReason"
                type="java.lang.String"
                column="SCHEDASSIGNMENTREASON"
                length="254"
                >
            <meta attribute="description">The scheduled assignment reason</meta>
        </property>
        <property
                name="schedAssignChangeReason"
                type="java.lang.String"
                column="CHANGE_REASON"
                length="254"
                >
            <meta attribute="description">The scheduled assignment change reason</meta>
        </property>
        <property
                name="schedAssignmentReqArrivalTime"
                type="TimestampType"
                column ="SCHEDASSMTREQARRIVALTIME_UTC">
            <meta attribute="utc-description">The scheduled assignment required arrival utc time</meta>
            <meta attribute="description">The scheduled assignment required arrival time</meta>
            <meta attribute="view-localtime">true</meta>
        </property>
        <property
                name="schedAssignmentReschedule"
                type="java.lang.Boolean"
                column="SCHEDASSIGNMENTRESCHEDULE"
                >
            <meta attribute="description">Is the assignment a reschedule</meta>
        </property>
        <many-to-one
                name="schedAssignmentActivateDelay"
                class="minestar.production.domain.DelayReference"
                column="SCHEDASSIGNMENTACTIVATEDELAY"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="schedAssignmentBefArrivalTime"
                type="TimestampType"
                column="SCHEDASSMTBEFARRIVALTIME_UTC"
                >
            <meta attribute="utc-description">The arrive before utc-time from the Scheduled Assignment</meta>
            <meta attribute="description">The arrive before time from the Scheduled Assignment</meta>
            <meta attribute="view-localtime">true</meta>
        </property>
        <property
                name="schedAssReschedPeriod"
                column="SCHEDASSIGNMENTRESCHEDPERIOD"
                >
            <meta attribute="unitType">duration</meta>
            <meta attribute="description">The period in which the assignment can be reschedule</meta>
            <type name="quantity">
                <param name="unitType">duration</param>
            </type>
        </property>
        <property
                name="schedAssignmentDestinations"
                type="java.lang.String"
                column="SCHEDASSIGNMENTDESTINATIONS"
                length="254"
                >
            <meta attribute="description">The scheduled assignment destinations</meta>
        </property>
        <property
                name="schedAssignmentManual"
                type="java.lang.Boolean"
                column="SCHEDASSIGNMENTMANUAL"
                >
            <meta attribute="description">Is it a manual assignment</meta>
        </property>
        <property
                name="schedAssignmentLoadState"
                type="java.lang.String"
                column="SCHEDASSIGNMENTLOADSTATE"
                length="254"
                >
            <meta attribute="description">The assignment load state</meta>
        </property>
        <property
                name="schedAssignmentPrevStatus"
                type="java.lang.String"
                column="SCHEDASSIGNMENTPREVSTATUS"
                length="254"
                >
            <meta attribute="description">The previous status</meta>
            <meta attribute="choices" inherit="false">choice:schedAssignmentStatus</meta>
        </property>
        <many-to-one
                name="schedAssignmentCreator"
                column="SCHEDASSIGNMENTCREATOR"
                class="minestar.platform.domain.user.UserReference"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="schedAssignmentTime"
                type="TimestampType"
                column ="SCHEDASSIGNMENTTIME_UTC"
                >
            <meta attribute="utc-description">The utc time of the assignment</meta>
            <meta attribute="description">The time of the assignment</meta>
            <meta attribute="view-localtime">true</meta>
        </property>
        <property
                name="schedAssignmentAftArrivalTime"
                type="TimestampType"
                column="SCHEDASSMTAFTARRIVALTIME_UTC"
                >
            <meta attribute="utc-description">The arrive after utc-time from the Scheduled Assignment</meta>
            <meta attribute="description">The arrive after time from the Scheduled Assignment</meta>
            <meta attribute="view-localtime">true</meta>
        </property>
        <property
                name="schedAssignmentAsap"
                type="java.lang.Boolean"
                column="SCHEDASSIGNMENTASAP"
                >
            <meta attribute="description">when true, means that the Scheduled Assignment will start
                as soon as possible</meta>
        </property>
        <many-to-one
                name="schedAssignmentArrivalDelay"
                class="minestar.production.domain.DelayReference"
                column="SCHEDASSIGNMENTARRIVALDELAY"
                not-found="ignore"
                >
        </many-to-one>
        <property
                name="schedAssignmentStatus"
                type="java.lang.String"
                column="SCHEDASSIGNMENTSTATUS"
                >
            <meta attribute="choices" inherit="false">choice:schedAssignmentStatus</meta>
            <meta attribute="description">The status of the Scheduled Assignment</meta>
        </property>

        <subclass name="minestar.assignment.domain.event.ActivateSchedAssEvent"
                  discriminator-value="ActivateSchedAssEvent"
                >
            <meta attribute="description">An activate scheduled assignment event</meta>

            <property
                    name="saaExpectedArrivalTime"
                    type="TimestampType"
                    column ="SAAEXPECTEDARRIVALTIME_UTC"
                    >
                <meta attribute="utc-description">The scheduled assignment expected arrival utc time</meta>
                <meta attribute="description">The scheduled assignment expected arrival time</meta>
                <meta attribute="view-localtime">true</meta>
            </property>
            <many-to-one
                    name="saaDestinationLocation"
                    column="SAADESTINATIONLOCATION"
                    class="minestar.mine.domain.minemodel.LocationReference"
                    not-found="ignore"
                    >
            </many-to-one>
            <property
                    name="saaActiveLoadState"
                    type="java.lang.String"
                    column="SAAACTIVELOADSTATE"
                    length="254"
                    >
                <meta attribute="description">The scheduled assignment load state</meta>
                <!--<meta attribute="choices" inherit="false">choice:scheduledAssignmentLS</meta>-->
            </property>
            <many-to-one
                    name="saaDestinationServer"
                    column="SAADESTINATIONSERVER"
                    class="minestar.pitlink.domain.machine.MachineReference"
                    not-found="ignore"
                    >
            </many-to-one>
        </subclass>

        <subclass name="minestar.assignment.domain.event.SchedAssArrivalEvent"
                  discriminator-value="XAEntity.Event.ScheduledAssignmentEvent.SchedAssArrivalEvent"
                >
            <meta attribute="description">A scheduled assignment arrival event</meta>

            <property
                    name="saaArrivalLoadState"
                    type="java.lang.String"
                    column="SAAARRIVALLOADSTATE"
                    length="254"
                    >
                <meta attribute="description">The arrival load state</meta>
                <!--<meta attribute="choices" inherit="false">choice:scheduledAssignmentLS</meta>-->
            </property>
            <many-to-one
                    name="saaArrivalLocation"
                    column="SAAARRIVALLOCATION"
                    class="minestar.mine.domain.minemodel.LocationReference"
                    not-found="ignore"
                    >
            </many-to-one>
        </subclass>

        <subclass name="minestar.assignment.domain.event.FinishSchedAssEvent"
                  discriminator-value="FinishSchedAssEvent"
                >
        </subclass>

        <subclass name="minestar.assignment.domain.event.ScheduledAssignmentLateEvent"
                  discriminator-value="SchedAssLateEvent"
                >
        </subclass>

    </subclass>

</hibernate-mapping>
