<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-lazy="false" default-access="field" schema="historical">

    <class
        name="minestar.pitlink.domain.machine.MachineSmuReading"
        table="SERVICEMETERREADING">

        <meta attribute="table">
            tablespace=MW_ENT
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXENT
        </meta>
        <meta attribute="index">
            unique=true
            name=SERVICEMETERREADING_UX1
            columns=MACHINE, READINGDATE_UTC
            tablespace=MW_IDXENT
        </meta>

        <meta attribute="description">A service meter reading for the start of an interval</meta>

        <id name="OID" type="long" column="SERVICEMETERREADING_OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <many-to-one name="machine" class="minestar.pitlink.domain.machine.MachineReference" column="MACHINE" not-null="true"/>

        <property name="readingDate" type="TimestampType" column="READINGDATE_UTC" not-null="true">
            <meta attribute="utc-description">The utc time this interval started.</meta>
            <meta attribute="description">The time this interval started.</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="smu" column="SMU" not-null="true">
            <meta attribute="description">The service meter reading when the interval started.</meta>
            <meta attribute="unitType">service meter hours</meta>
            <type name="quantity">
                <param name="unitType">service meter hours</param>
            </type>
        </property>

        <property name="smuResetAdjustment" not-null="true">
            <meta attribute="description">Signed value.  If this record is an SMU reset, this value contains the SMU reset adjustment.  Otherwise 0</meta>
            <meta attribute="unitType">service meter hours</meta>
            <column name="SMU_RESET_ADJUSTMENT" default="0"/>
            <type name="quantity">
                <param name="unitType">service meter hours</param>
            </type>
        </property>

        <property
                name="sourceType"
                column="SOURCE_TYPE"
                type="java.lang.String"
                not-null="false"
                length="25"
        >
            <meta attribute="description">Describes the source of the SMU reading, e.g. Fluid and SMU record</meta>
        </property>

        <property
                name="sourceEntity"
                column="SOURCE_ENTITY"
                type="java.lang.Long"
                not-null="false"
        >
            <meta attribute="description">Contains the OID of the SMU reading source, e.g. the OID of the Fluid and SMU record</meta>
        </property>

    </class>
</hibernate-mapping>
