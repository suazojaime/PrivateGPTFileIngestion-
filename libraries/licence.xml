<?xml version="1.0" encoding="us-ascii" standalone="no"?>
<!DOCTYPE classdefs SYSTEM "metadata.dtd">
<classdefs>
    <classdef name="minestar.machinetracking.domain.MachineLicence" keyproperty="name" >
        <implclass name="minestar.machinetracking.domain.MachineLicenceBuilder"/>
        <beanclass name="minestar.machinetracking.domain.MachineLicenceBuilder"/>

        <propertygroup name="details">
            <uigroupdef mode="plain"/>
            <propertydef name="OID" access="readonly">
                <uidef visiblewhen="false"/>
            </propertydef>
            <propertydef name="name" label="License Name">
                <validationdef name="required" type="shared"/>
            </propertydef>
            <propertydef name="version" label="Version" access="readonly">
                <uidef updateable="false"/>
            </propertydef>
            <propertydef name="fleet" label="Fleet">
                <typedef>
                    <javaclass name="minestar.pitlink.domain.machine.Fleet"/>
                </typedef>
                <uidef widget="fleetSelector" custom='{selectionType="SINGLE_SELECT"}'/>
                <validationdef name="required" type="shared"/>
            </propertydef>
            <propertydef name="activeHolders" label="Active Holders">
                <typedef>
                    <javaclass name="java.util.Set" choices="service(com.mincom.works.uifpage.personnel.PersonnelCollectionProvider):personnel" />
                </typedef>
                <uidef widget="ordered" custom="{setOrderArrows=Boolean(false)}"/>
                <description>
                    The personnel who are active holders of this license.
                </description>
            </propertydef>
        </propertygroup>
        <validationgroup name="Licence Name Check">
            <propertyref name="OID"/>
            <propertyref name="name"/>
            <validationdef name="keyProperty" type="shared">
                <param name="propName">name</param>
            </validationdef>
        </validationgroup>
    </classdef>

    <classdef name="minestar.machinetracking.domain.PersonMachineLicence">
        <implclass name="minestar.machinetracking.domain.PersonMachineLicenceBuilder"/>
        <beanclass name="minestar.machinetracking.domain.PersonMachineLicenceBuilder"/>

        <propertygroup name="details">
            <uigroupdef mode="plain"/>
            <propertydef name="parent" label="Person" category="transient">
                <typedef>
                    <javaclass name="minestar.machinetracking.domain.PersonImpl"/>
                </typedef>
                <uidef visiblewhen="false"/>
            </propertydef>
            <propertydef name="active" label="Ticketed">
                <defaultvalue>true</defaultvalue>
            </propertydef>
            <propertydef name="machineLicence" label="License">
                <typedef>
                    <type code="string" choices="service(minestar.machinetracking.application.MachineLicenceCollectionProvider):machineLicences"/>
                </typedef>
                <validationdef name="required" type="shared"/>
            </propertydef>
            <propertydef name="dateAcquired" label="Date Acquired">
                <uidef widget="date"/>
                <defaultvalue>now</defaultvalue>
            </propertydef>
            <propertydef name="lastUse" label="Last Use Date">
                <uidef widget="date"/>
                <defaultvalue>now</defaultvalue>
            </propertydef>
            <propertydef name="tempExpireDate" label="Temp. Expiration Date">
                <uidef widget="date" custom='{showNoneButton="true"}'/>
            </propertydef>

            <propertydef name="expireDate" category="transient" label="Expire Date">
                <typedef><javaclass name="java.util.Date"/></typedef>
                <uidef widget="date" enabledwhen="false"/>
            </propertydef>
            <propertydef name="unusedExpireDate" category="transient" label="Unused Expire Date">
                <typedef><javaclass name="java.util.Date"/></typedef>
                <uidef widget="date" enabledwhen="false"/>
            </propertydef>

        </propertygroup>
    </classdef>
</classdefs>
