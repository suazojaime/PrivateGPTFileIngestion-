<?xml version="1.0"?>
<!-- Copyright (c) 2021 Caterpillar -->

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="model" default-access="field" default-lazy="false">

    <!-- ****************************************************************************** -->
    <!-- Plan -->
    <!-- ****************************************************************************** -->
    <class name="minestar.planmanagement.persistence.v2.ProdPlanHistDO" table="PROD_PLAN_HIST" schema="historical" >

        <meta attribute="description">Stores historical production planning details</meta>
        <meta attribute="index">
            <!-- Support ProdPlanHistDao.findHistory -->
            name=PROD_PLAN_HIST_VERSION
            columns=PLAN_OID, VERSION
            unique=true
        </meta>

        <id name="oid" type="long" column="PLAN_HIST_OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <property name="planOid" type="long" column="PLAN_OID" not-null="true">
            <meta attribute="description">Internal OID that uniquely identifies a plan</meta>
        </property>

        <property name="version" type="integer" column="VERSION" not-null="true"/>

        <property name="externalRef" type="java.lang.String" column="EXTERNAL_REF" length="254" not-null="true">
            <meta attribute="description">External reference that uniquely identifies a plan</meta>
        </property>

        <property name="createdTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="CREATED_TIME_UTC" not-null="true">
            <meta attribute="utc-description">The creation timestamp of the plan</meta>
            <meta attribute="description">Plan creation timestamp</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="updatedTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="UPDATED_TIME_UTC" not-null="true">
            <meta attribute="utc-description">The update timestamp of the plan</meta>
            <meta attribute="description">Plan updated timestamp</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="plannedStartTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="PLANNED_START_TIMESTAMP_UTC" not-null="true">
            <meta attribute="utc-description">The plan start utc timestamp</meta>
            <meta attribute="description">The timestamp of plan starting</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="plannedEndTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="PLANNED_END_TIMESTAMP_UTC" not-null="true">
            <meta attribute="utc-description">The plan end utc timestamp</meta>
            <meta attribute="description">The timestamp of plan ending</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="actualStartTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="ACTUAL_START_TIMESTAMP_UTC">
            <meta attribute="utc-description">The plan start utc timestamp</meta>
            <meta attribute="description">The timestamp of plan starting</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="actualEndTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="ACTUAL_END_TIMESTAMP_UTC">
            <meta attribute="utc-description">The plan end utc timestamp</meta>
            <meta attribute="description">The timestamp of plan ending</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="planStatus" type="minestar.planmanagement.persistence.v2.ProdPlanStatusEnumUserType" column="PLAN_STATUS" length="32" not-null="true">
            <meta attribute="description">Status of the plan</meta>
        </property>

        <property name="planType" type="minestar.planmanagement.persistence.v2.ProdPlanTypeEnumUserType" column="PLAN_TYPE" length="32" not-null="true">
            <meta attribute="description">Type of plan</meta>
        </property>

        <property name="planJson" type="string" length="65536" column="PLAN_JSON" not-null="true">
            <meta attribute="description">The JSON encoding of the plan</meta>
        </property>

        <property name="planResultsJson" type="string" length="65536" column="PLAN_RESULTS_JSON">
            <meta attribute="description">The JSON encoding of the plan results</meta>
        </property>

        <property name="planOriginalJson" column="PLAN_ORIGINAL_JSON" type="binary" lazy="true">
            <meta attribute="description">The plan original JSON binary.</meta>
            <meta attribute="json">JSON</meta>
            <type name="org.hibernate.type.BlobType"/>
        </property>
    </class>

</hibernate-mapping>
