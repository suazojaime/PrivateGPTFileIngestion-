<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="historical">

    <class
        entity-name="DipperReportDipper"
        name="minestar.production.domain.DipperRecord"
        table="DIPPERRECORD"
        >
        <meta attribute="table">
            tablespace=MW_OBJ
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXOBJ
        </meta>
        <meta attribute="description">The dipper report record for shovel material</meta>
        
        <id
            name="OID"
            type="java.lang.Long"
            column="OID"
            >
        </id>

        <many-to-one
            name="material"
            column="MATERIAL_OID"
            class="minestar.machinetracking.domain.MaterialReference"
            not-found="ignore"
            >
            <meta attribute="alias" inherit="false">material</meta>
        </many-to-one>

        <property
            name="materialPercent"
            column="MATERIAL_PCT"
            >
            <meta attribute="unitType">ratio</meta>
        <meta attribute="description">The dipper material ratio</meta>
            <type name="quantity">
                <param name="unitType">ratio</param>
            </type>
        </property>

        <property
            name="minedPercent"
            column="MINED_PCT"
            >
            <meta attribute="unitType">ratio</meta>
            <meta attribute="description">The percent mined</meta>
            <type name="quantity">
                <param name="unitType">ratio</param>
            </type>
        </property>

        <property
            name="materialCoords"
            type="XYZCoordinate"
            >
            <meta attribute="export-nested">true</meta>
            <meta attribute="description">The material coordinates</meta>
            <column name="MATERIALX"/>
            <column name="MATERIALY"/>
            <column name="MATERIALZ"/>
        </property>

        <property
            name="dumpCoords"
            type="XYZCoordinate"
            >
            <meta attribute="export-nested">true</meta>
            <meta attribute="description">The dump coordinates</meta>
            <column name="DUMP_X"/>
            <column name="DUMP_Y"/>
            <column name="DUMP_Z"/>
        </property>

        <property
            name="payload"
            column="PAYLOAD"
            >
            <meta attribute="alias" inherit="false">payload</meta>
            <meta attribute="unitType">mass</meta>
            <meta attribute="description">The payload mass</meta>
             <type name="quantity">
                <param name="unitType">mass</param>
            </type>
        </property>
        <property
            name="timestamp"
            type="TimestampType"
            column="TIMESTAMP_UTC"
            >
            <meta attribute="alias" inherit="false">timestamp</meta>
            <meta attribute="utc-description">The dipper utc timestamp</meta>
            <meta attribute="description">The dipper timestamp</meta>
            <meta attribute="view-localtime">true</meta>
         </property>
        <property
            name="dipperReason"
            type="java.lang.Integer"
            column="DIPPER_REASON"
            >
            <meta attribute="choices" inherit="false">choice:dipperReason</meta>
            <meta attribute="description">The dipper reason</meta>
        </property>

        <property
            name="swingAngle"
            column="SWING_ANGLE"
            >
            <meta attribute="unitType">plane angle</meta>
            <meta attribute="description">The dipper swing angle</meta>
            <type name="quantity">
                <param name="unitType">plane angle</param>
            </type>
        </property>
        <property name="loadDuration"
                  column="LOAD_DURATION">
            <meta attribute="unitType">duration</meta>
             <meta attribute="description">The load duration</meta>
            <type name="quantity">
                <param name="unitType">duration</param>
            </type>
        </property>
        <property name="moveFromTruck"
                  column="MOVE_FROM_TRUCK">
            <meta attribute="unitType">duration</meta>
            <meta attribute="description">The move from truck duration</meta>
            <type name="quantity">
                <param name="unitType">duration</param>
            </type>
        </property>
        <property name="dumpDuration"
                  column="DUMP_DURATION">
            <meta attribute="unitType">duration</meta>
            <meta attribute="description">The dump duration</meta>
            <type name="quantity">
                <param name="unitType">duration</param>
            </type>
        </property>


        <list name="materialsCAES"  table="DIPPER_CAES_MATERIAL" cascade="all-delete-orphan"
            >
            <meta attribute="collection-table">
                tablespace=MW_OBJ
            </meta>
            <meta attribute="collection-primary-key">
                tablespace=MW_IDXOBJ
            </meta>
            <meta attribute="description">The CAES material</meta>
            <key column="RECORD_OID"/>
            <index column="ID"/>
            <composite-element class="minestar.production.domain.CAESMaterialsRecord">
                <property name="materialType" column="MATERIAL_TYPE">
                      <meta attribute="description">The material type of the CAES record</meta>                                
                </property>
                <property name="materialId" column="MATERIAL_ID">
                      <meta attribute="description">The material ID of the CAES record</meta>                                
                </property>
                <property name="materialPercent" column="MATERIAL_PCT"/>
                <property name="minedPercent" column="MINED_PCT"/>
            </composite-element>
        </list>

        <list name="reportParams"  table="DIPPER_AUTO_PARAM" cascade="all-delete-orphan"
            >
            <meta attribute="collection-table">
                tablespace=MW_OBJ
            </meta>
            <meta attribute="collection-primary-key">
                tablespace=MW_IDXOBJ
            </meta>

            <meta attribute="alias" inherit="false">autoCAESParams</meta>
            <meta attribute="description">The CAES parameters</meta>
            <key column="RECORD_OID"/>
            <index type="java.lang.Integer"  column="ID"/>
            <composite-element class="minestar.production.domain.CAESReportParamRecord">
                <property name="strValue" column="STRING_VALUE">
                     <meta attribute="description">The string value of the CAES parameter</meta>                                
                </property>
                <property name="numValue" column="NUMERIC_VALUE">
                     <meta attribute="description">The numeric value of the CAES parameter</meta>                                
                </property>
            </composite-element>
        </list>

    </class>

    <class
        name="minestar.production.domain.DipperRecord"
        table="DIPPERRECORD"
        >
        <meta attribute="description">The dipper record for shovel material</meta>
        
        <id
            name="OID"
            type="java.lang.Long"
            column="OID"
            >
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <many-to-one
            name="material"
            column="MATERIAL_OID"
            class="minestar.machinetracking.domain.MaterialReference"
            not-found="ignore"
            >
            <meta attribute="alias" inherit="false">material</meta>
        </many-to-one>

        <property
            name="materialPercent"
            column="MATERIAL_PCT"
            >
            <meta attribute="unitType">ratio</meta>
            <meta attribute="description">The material ratio</meta>
            <type name="quantity">
                <param name="unitType">ratio</param>
            </type>
        </property>

        <property
            name="minedPercent"
            column="MINED_PCT"
            >
            <meta attribute="unitType">ratio</meta>
            <meta attribute="description">The percent mined</meta>
            <type name="quantity">
                <param name="unitType">ratio</param>
            </type>
        </property>

        <property
            name="materialCoords"
            type="XYZCoordinate"
            >
            <meta attribute="export-nested">true</meta>
            <meta attribute="description">The material coordinates</meta>
            <column name="MATERIALX"/>
            <column name="MATERIALY"/>
            <column name="MATERIALZ"/>
        </property>

        <property
            name="dumpCoords"
            type="XYZCoordinate"
            >
            <meta attribute="export-nested">true</meta>
            <meta attribute="description">The dump coordinates</meta>
            <column name="DUMP_X"/>
            <column name="DUMP_Y"/>
            <column name="DUMP_Z"/>
        </property>

        <property
            name="payload"
            column="PAYLOAD"
            >
            <meta attribute="alias" inherit="false">payload</meta>
            <meta attribute="unitType">mass</meta>
            <meta attribute="description">The payload mass</meta>
            <type name="quantity">
                <param name="unitType">mass</param>
            </type>
        </property>
        <property
            name="timestamp"
            type="TimestampType"
            column="TIMESTAMP_UTC"
            >
            <meta attribute="alias" inherit="false">timestamp</meta>
            <meta attribute="utc-description">The dipper utc timestamp</meta>
            <meta attribute="description">The dipper timestamp</meta>
            <meta attribute="view-localtime">true</meta>
        </property>
        <property
            name="dipperReason"
            type="java.lang.Integer"
            column="DIPPER_REASON"
            >
            <meta attribute="choices" inherit="false">choice:dipperReason</meta>
            <meta attribute="description">The dipper reason</meta>
        </property>

        <property
            name="swingAngle"
            column="SWING_ANGLE"
            >
            <meta attribute="unitType">plane angle</meta>
            <meta attribute="description">The swing angle</meta>
            <type name="quantity">
                <param name="unitType">plane angle</param>
            </type>
        </property>
        <property name="loadDuration"
                  column="LOAD_DURATION">
            <meta attribute="unitType">duration</meta>
            <meta attribute="description">The load duration</meta>
            <type name="quantity">
                <param name="unitType">duration</param>
            </type>
        </property>
        <property name="moveFromTruck"
                  column="MOVE_FROM_TRUCK">
            <meta attribute="unitType">duration</meta>
            <meta attribute="description">The move from truck duration</meta>
            <type name="quantity">
                <param name="unitType">duration</param>
            </type>
        </property>
        <property name="dumpDuration"
                  column="DUMP_DURATION">
            <meta attribute="unitType">duration</meta>
            <meta attribute="description">The dump duration</meta>
            <type name="quantity">
                <param name="unitType">duration</param>
            </type>
        </property>


        <list name="materialsCAES"  table="DIPPER_CAES_MATERIAL" cascade="all-delete-orphan"
            >
            <meta attribute="description">The CAES material</meta>
            <key column="RECORD_OID"/>
            <index column="ID"/>
            <composite-element class="minestar.production.domain.CAESMaterialsRecord">
                <property name="materialType" column="MATERIAL_TYPE">
                      <meta attribute="description">The material type of the CAES record</meta>                                
                </property>
                <property name="materialId" column="MATERIAL_ID">
                      <meta attribute="description">The material ID of the CAES record</meta>                                
                </property>
                <property name="materialPercent" column="MATERIAL_PCT"/>
                <property name="minedPercent" column="MINED_PCT"/>
            </composite-element>
        </list>

        <list name="reportParams"  table="DIPPER_AUTO_PARAM" cascade="all-delete-orphan"
            >
            <meta attribute="alias" inherit="false">autoCAESParams</meta>
            <meta attribute="description">The CAES report parameters</meta>
            <key column="RECORD_OID"/>
            <index type="java.lang.Integer"  column="ID"/>
            <composite-element class="minestar.production.domain.CAESReportParamRecord">
                <property name="strValue" column="STRING_VALUE">
                     <meta attribute="description">The string value of the CAES parameter</meta>                                
                </property>
                <property name="numValue" column="NUMERIC_VALUE">
                    <meta attribute="description">The numeric value of the CAES parameter</meta>                                
                </property>
            </composite-element>
        </list>

    </class>
</hibernate-mapping>
