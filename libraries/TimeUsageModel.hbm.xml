<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="model">

    <class name="minestar.platform.domain.timeusagemodel.TimeUsageModelImpl"
        table="TIME_USAGE_MODEL" proxy="minestar.platform.domain.timeusagemodel.TimeUsageModel">

        <meta attribute="table"> tablespace=MW_ENT </meta>
        <meta attribute="primary-key"> tablespace=MW_IDXENT </meta>

        <meta attribute="description">A representation of the mines Time Usage Model</meta>

        <cache usage="read-write" region="model"/>

        <id name="OID" type="java.lang.Long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <property name="active" type="java.lang.Boolean" column="ACTIVE">
            <meta attribute="description">Whether the model is active or not</meta>
        </property>

        <property name="generateSMUTimes" type="java.lang.Boolean" column="GENERATE_SMU_TIMES">
            <meta attribute="description">Whether SMU times should be generated</meta>
        </property>
        
        <property name="groupBasedHierarchy" type="java.lang.Boolean" column="GROUP_BASED_HIERARCHY">
            <meta attribute="description">Is this a group based hierarchy.</meta>
        </property>

        <property name="name" type="java.lang.String" column="NAME" not-null="true">
            <meta attribute="description">The name of the time usage model</meta>
        </property>

        <property name="description" type="java.lang.String" column="DESCRIPTION" length="254">
            <meta attribute="description">A description of this time usage model.</meta>
        </property>

        <set name="groupings" cascade="all-delete-orphan" lazy="false">
            <meta attribute="collection-table"> tablespace=MW_ENT </meta>
            <meta attribute="collection-primary-key"> tablespace=MW_IDXENT </meta>
            <meta attribute="description">A list of all time usage model groupings.</meta>
            <key column="TIMEUSAGEMODEL_OID"/>
            <one-to-many class="minestar.platform.domain.timeusagemodel.TimeUsageModelGroupingImpl"
            />
        </set>

        <set name="kpiEntries" cascade="all-delete-orphan" lazy="false">
            <meta attribute="collection-table"> tablespace=MW_ENT </meta>
            <meta attribute="collection-primary-key"> tablespace=MW_IDXENT </meta>
            <meta attribute="description">A list of all KPI entries</meta>
            <key column="TIMEUSAGEMODEL_OID"/>
            <one-to-many class="minestar.platform.domain.timeusagemodel.TimeUsageModelKpiEntryImpl"
            />
        </set>

        <set name="kpiCustomMeasures" cascade="all-delete-orphan" lazy="false">
            <meta attribute="collection-table"> tablespace=MW_ENT </meta>
            <meta attribute="collection-primary-key"> tablespace=MW_IDXENT </meta>
            <meta attribute="description">A list of all KPI custom measures</meta>
            <key column="TIMEUSAGEMODEL_OID"/>
            <one-to-many class="minestar.platform.domain.timeusagemodel.TimeUsageModelKpiCustomMeasureImpl"
            />
        </set>
    </class>

    <class name="minestar.platform.domain.timeusagemodel.TimeUsageModelGroupingImpl"
        table="TIMEUSAGEMODEL_GROUPING"
        proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelGrouping">

        <meta attribute="table"> tablespace=MW_ENT </meta>
        <meta attribute="primary-key"> tablespace=MW_IDXENT </meta>

        <meta attribute="description">A grouping of compositions or other groupings for time
            usage</meta>

        <cache usage="read-write" region="model"/>

        <id name="OID" type="java.lang.Long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <property name="name" type="java.lang.String" column="NAME" not-null="true">
            <meta attribute="description">The name of the time usage model grouping</meta>
        </property>

        <property name="description" type="java.lang.String" column="DESCRIPTION" length="254">
            <meta attribute="description">A description of this time usage model grouping.</meta>
        </property>


        <property name="embeddedVariableMapping" type="java.lang.String" column="EMB_VAR_MAPPING"
            length="254">
            <meta attribute="description">The embedded variable that this grouping is mapped
                to</meta>
        </property>

        <property name="hierarchyLevel" type="java.lang.Integer" column="HIERARCHY_LEVEL"
            length="254">
            <meta attribute="description">The hierarchy level of this time usage model
                grouping.</meta>
        </property>

        <property name="colour" type="java.lang.Integer" column="COLOUR" length="254">
            <meta attribute="description">The colour to associate with this time usage model
                grouping.</meta>
        </property>

        <property name="unitType" type="java.lang.String" column="UNIT_TYPE">
            <meta attribute="description">The unit type</meta>
        </property>

        <property name="categoryName" type="java.lang.String" column="CATEGORY_NAME">
            <meta attribute="description">The category</meta>
        </property>
        
        <many-to-one name="parentGrouping" column="PARENT_GROUPING_OID"
            class="minestar.platform.domain.timeusagemodel.TimeUsageModelGroupingImpl"> </many-to-one>

        <set name="groupings" cascade="all-delete-orphan" lazy="false">
            <meta attribute="collection-table"> tablespace=MW_ENT </meta>
            <meta attribute="collection-primary-key"> tablespace=MW_IDXENT </meta>
            <meta attribute="description">A list of all time usage model sub groupings.</meta>
            <key column="PARENT_GROUPING_OID"/>
            <one-to-many class="minestar.platform.domain.timeusagemodel.TimeUsageModelGroupingImpl"
            />
        </set>

        <set name="compositions" cascade="all-delete-orphan" lazy="false">
            <meta attribute="collection-table"> tablespace=MW_ENT </meta>
            <meta attribute="collection-primary-key"> tablespace=MW_IDXENT </meta>
            <meta attribute="description">A list of all time usage model compositions</meta>
            <key column="GROUPING_OID"/>
            <one-to-many
                class="minestar.platform.domain.timeusagemodel.TimeUsageModelCompositionImpl"/>
        </set>

    </class>

    <class name="minestar.platform.domain.timeusagemodel.TimeUsageModelCompositionImpl"
        table="TIMEUSAGEMODEL_COMPOSITION" discriminator-value="TimeUsageModel.Composition"
        proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelComposition">

        <meta attribute="table"> tablespace=MW_ENT </meta>
        <meta attribute="primary-key"> tablespace=MW_IDXENT </meta>

        <meta attribute="description">A composition of activities or delays to be captured for time
            usage</meta>

        <cache usage="read-write" region="model"/>

        <id name="OID" type="java.lang.Long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <discriminator column="DESCRIMINATOR_ID" not-null="false"/>

        <property name="name" type="java.lang.String" column="NAME" not-null="true">
            <meta attribute="description">The name of the time usage model composition</meta>
        </property>

        <property name="description" type="java.lang.String" column="DESCRIPTION" length="254">
            <meta attribute="description">A description of this time usage model composition.</meta>
        </property>

        <property name="embeddedVariableMapping" type="java.lang.String" column="EMB_VAR_MAPPING"
            length="254">
            <meta attribute="description">The embedded variable that this composition is mapped
                to</meta>
        </property>

        <property name="colour" type="java.lang.Integer" column="COLOUR" length="254">
            <meta attribute="description">The colour to associate with this time usage model
                composition.</meta>
        </property>

        <property name="unitType" type="java.lang.String" column="UNIT_TYPE">
            <meta attribute="description">The unit type</meta>
        </property>

        <property name="categoryName" type="java.lang.String" column="CATEGORY_NAME">
            <meta attribute="description">The category</meta>
        </property>
        
        <set name="measures" cascade="all-delete-orphan" lazy="false">
            <meta attribute="collection-table"> tablespace=MW_ENT </meta>
            <meta attribute="collection-primary-key"> tablespace=MW_IDXENT </meta>
            <meta attribute="description">A list of all expressions for this timing
                composition</meta>
            <key column="COMPOSITION_OID"/>
            <one-to-many class="minestar.platform.domain.timeusagemodel.TimeUsageModelMeasureImpl"/>
        </set>

        <subclass name="minestar.platform.domain.timeusagemodel.TimeUsageModelDelayCompositionImpl"
            proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelDelayComposition"
            discriminator-value="TimeUsageModel.DelayComposition">
            <meta attribute="description">An delay type composition</meta>

            <many-to-one name="delayCategory" class="minestar.production.domain.DelayCategoryReference"
                column="CATEGORY_ID" lazy="false"/>

        </subclass>

    </class>

    <class name="minestar.platform.domain.timeusagemodel.TimeUsageModelMeasureImpl"
        table="TIMEUSAGEMODEL_MEASURE" discriminator-value="TimeUsageModel.Measure"
        proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelMeasure">

        <meta attribute="table"> tablespace=MW_ENT </meta>
        <meta attribute="primary-key"> tablespace=MW_IDXENT </meta>

        <meta attribute="description">An measure for a time composition</meta>

        <cache usage="read-write" region="model"/>

        <id name="OID" type="java.lang.Long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <discriminator column="DESCRIMINATOR_ID" not-null="false"/>

        <property name="name" type="java.lang.String" column="NAME" not-null="true">
            <meta attribute="description">The name of the time usage model composition
                measure.</meta>
        </property>

        <property name="description" type="java.lang.String" column="DESCRIPTION" length="254">
            <meta attribute="description">A description of this time usage model composition
                measure.</meta>
        </property>

        <property name="expression" type="java.lang.String" column="EXPRESSION">
            <meta attribute="description">An expression for the time usage model composition
                measure</meta>
        </property>

        <property name="embeddedVariableMapping" type="java.lang.String" column="EMB_VAR_MAPPING"
            length="254">
            <meta attribute="description">The embedded variable that this measure is mapped
                to</meta>
        </property>
        
        <set name="equipmentAssociations" cascade="all-delete-orphan" lazy="false">
            <meta attribute="collection-table"> tablespace=MW_ENT </meta>
            <meta attribute="collection-primary-key"> tablespace=MW_IDXENT </meta>
            <meta attribute="description">A list of equipment associations</meta>
            <key column="MEASURE_OID"/>
            <one-to-many class="minestar.platform.domain.timeusagemodel.TimeUsageModelMeasureAssociationImpl"/>
        </set>
        
        <subclass name="minestar.platform.domain.timeusagemodel.TimeUsageModelDelayMeasureImpl"
            proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelDelayMeasure"
            discriminator-value="TimeUsageModel.DelayMeasure">
            <meta attribute="description">A delay class measure</meta>

            <many-to-one name="delayType" class="minestar.production.domain.DelayClassReference" column="DELAY_CLASS_ID" access="field"/>
        </subclass>

        <subclass name="minestar.platform.domain.timeusagemodel.TimeUsageModelActivityMeasureImpl"
            proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelActivityMeasure"
            discriminator-value="TimeUsageModel.ActivityMeasure">
            <meta attribute="description">An activity measure</meta>

            <many-to-one name="activityType" class="minestar.production.domain.Activity" column="ACTIVITY_ID"/>
        </subclass>
    </class>

    <class name="minestar.platform.domain.timeusagemodel.TimeUsageModelKpiEntryImpl"
        table="TIMEUSAGEMODEL_KPIENTRY"
        proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelKpiEntry">

        <meta attribute="table"> tablespace=MW_ENT </meta>
        <meta attribute="primary-key"> tablespace=MW_IDXENT </meta>

        <meta attribute="description">A KPI entry for this time usage model</meta>

        <cache usage="read-write" region="model"/>

        <id name="OID" type="java.lang.Long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>
        
        <property name="name" type="java.lang.String" column="NAME" not-null="true">
            <meta attribute="description">The name of the KPI entry</meta>
        </property>

        <property name="description" type="java.lang.String" column="DESCRIPTION" length="254">
            <meta attribute="description">A description of this KPI entry</meta>
        </property>

        <property name="unitType" type="java.lang.String" column="UNIT_TYPE">
            <meta attribute="description">The unit type</meta>
        </property>

        <property name="categoryName" type="java.lang.String" column="CATEGORY_NAME">
            <meta attribute="description">The category</meta>
        </property>
        
        <property name="expression" type="java.lang.String" column="EXPRESSION">
            <meta attribute="description">The expression for this KPI entry</meta>
        </property>

        <property name="sortOrder" type="java.lang.Integer" column="SORT_ORDER">
            <meta attribute="description">The sort order for these KPI entries</meta>
        </property>
    </class>

    <class name="minestar.platform.domain.timeusagemodel.TimeUsageModelKpiCustomMeasureImpl"
        table="TIMEUSAGEMODEL_KPICUSTMEASURE"
        proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelKpiCustomMeasure">
        
        <meta attribute="table"> tablespace=MW_ENT </meta>
        <meta attribute="primary-key"> tablespace=MW_IDXENT </meta>
        
        <meta attribute="description">A KPI custom measure for this time usage model</meta>
        
        <cache usage="read-write" region="model"/>
        
        <id name="OID" type="java.lang.Long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>
        
        <property name="name" type="java.lang.String" column="NAME" not-null="true">
            <meta attribute="description">The name of the KPI custom measure</meta>
        </property>
        
        <property name="description" type="java.lang.String" column="DESCRIPTION" length="254">
            <meta attribute="description">A description of this KPI custom measure</meta>
        </property>
        
        <property name="unitType" type="java.lang.String" column="UNIT_TYPE">
            <meta attribute="description">The unit type</meta>
        </property>
        
        <property name="categoryName" type="java.lang.String" column="CATEGORY_NAME">
            <meta attribute="description">The category</meta>
        </property>
        
        <property name="expression" type="java.lang.String" column="EXPRESSION">
            <meta attribute="description">The expression for this KPI custom measure</meta>
        </property>
        
        <property name="ifGroup" type="java.lang.String" column="IF_GROUP">
            <meta attribute="description">The if group for this KPI custom measure</meta>
        </property>
        
        <property name="sortOrder" type="java.lang.Integer" column="SORT_ORDER">
            <meta attribute="description">The sort order for these custom measures</meta>
        </property>
    </class>

    <class name="minestar.platform.domain.timeusagemodel.TimeUsageModelMeasureAssociationImpl"
        table="TIMEUSAGEMODEL_EQUIP_ASS"
        proxy="minestar.platform.domain.timeusagemodel.TimeUsageModelMeasureAssociation">
        
        <meta attribute="table"> tablespace=MW_ENT </meta>
        <meta attribute="primary-key"> tablespace=MW_IDXENT </meta>
        
        <meta attribute="description">An equipment association for a defined measure</meta>
        
        <cache usage="read-write" region="model"/>
        
        <id name="OID" type="java.lang.Long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>
        
        <property name="equipmentTypeName" type="java.lang.String" column="EQUIP_TYPE_NAME" not-null="true">
            <meta attribute="description">The equipment type name</meta>
        </property>

    </class>
</hibernate-mapping>
