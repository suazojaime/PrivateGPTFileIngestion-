<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (c) 2013, Caterpillar, Brisbane Australia. All rights reserved. -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       ">

    <!-- GIS layers -->
    <bean id="gisLayer" class="minestar.platform.gis.layer.GISLayer" abstract="true">
        <property name="datastoreType" value="PostGIS"/>
    </bean>

    <bean id="gradeBlockGISLayer" class="minestar.mine.service.gis.layer.GradeBlockGISLayer" parent="gisLayer"/>

    <bean id="hazardGISLayer" class="minestar.mine.service.gis.layer.HazardGISLayer" parent="gisLayer"/>

    <bean id="obstaclesGISLayer" class="minestar.mine.service.gis.layer.ObstaclesGISLayer" parent="gisLayer"/>

    <bean id="unobservedCellsGISLayer" class="minestar.mine.service.gis.layer.UnobservedCellsGISLayer" parent="gisLayer"/>

    <bean id="regionGISLayer" class="minestar.mine.service.gis.layer.RegionGISLayer" parent="gisLayer"/>

    <bean id="laneGISLayer" class="minestar.mine.service.gis.layer.LaneGISLayer" parent="gisLayer"/>

    <bean id="archivedLaneGISLayer" class="minestar.mine.service.gis.layer.ArchivedLaneGISLayer" parent="gisLayer"/>

    <bean id="roadGISLayer" class="minestar.mine.service.gis.layer.RoadGISLayer" parent="gisLayer"/>

    <bean id="waypointGISLayer" class="minestar.mine.service.gis.layer.WaypointGISLayer" parent="gisLayer"/>

    <bean id="zoneGISLayer" class="minestar.mine.service.gis.layer.ZoneGISLayer" parent="gisLayer"/>

    <bean id="planGISLayer" class="minestar.mine.service.gis.layer.PlanGISLayer" parent="gisLayer"/>

    <bean id="processorGISLayer" class="minestar.mine.service.gis.layer.ProcessorGISLayer" parent="gisLayer"/>

    <bean id="stockpileGISLayer" class="minestar.mine.service.gis.layer.StockpileGISLayer" parent="gisLayer"/>

    <bean id="materialGISLayer" class="minestar.mine.service.gis.layer.MaterialGISLayer" parent="gisLayer"/>

    <bean id="dxfPointsLayer" class="minestar.mine.service.gis.layer.DXFPointGISLayer" parent="gisLayer"/>

    <bean id="dxfLinesLayer" class="minestar.mine.service.gis.layer.DXFLineGISLayer" parent="gisLayer"/>

    <bean id="dxfPolygonsLayer" class="minestar.mine.service.gis.layer.DXFPolygonGISLayer" parent="gisLayer"/>

    <bean id="locationGISLayer" class="minestar.mine.service.gis.layer.LocationGISLayer" parent="gisLayer" />

    <bean id="siteBoundsGISLayer" class="minestar.mine.service.gis.layer.SiteBoundsGISLayer" parent="gisLayer" />

    <bean id="edgeLinesGISLayer" class="minestar.mine.service.gis.layer.EdgeLinesGISLayer" parent="gisLayer" />

    <bean id="edgeMeshGISLayer" class="minestar.mine.service.gis.layer.EdgeMeshGISLayer" parent="gisLayer" />

    <bean id="gisAdministrator" class="minestar.mine.service.gis.GISAdministrator" init-method="init">
        <constructor-arg name="dataSource" ref="pooledGisDataSource"/>
        <constructor-arg name="dataStoreSpec" ref="postgisDataStoreConfig"/>

        <property name="gisLayerProviders" ref="gisLayerProviders"/>
        <property name="gisStyleProviders" ref="gisStyleProviders"/>
        <property name="postGISDataStore" ref="postGISDataStore"/>
    </bean>

    <bean id="embeddedGISAdmin" class="minestar.platform.gis.service.embedded.EmbeddedGISAdmin">
        <constructor-arg name="cachedByDefault" value="true"/>
    </bean>

    <bean id="gisLayerProviders" class="minestar.mine.service.gis.layer.GISLayerProviders"/>
    <bean id="gisStyleProviders" class="minestar.mine.service.gis.style.GISStyleProviders"/>

    <bean id="postGISDataStore" class="minestar.mine.service.gis.PostGISDataStore"/>

    <bean id="unobservedCellsDao" class="minestar.mine.persistence.minemodel.UnobservedCellsDaoImpl">
        <property name="gisAdministrator" ref="gisAdministrator"/>
        <property name="jdbcTemplate" ref="postgisJdbcTemplate"/>
    </bean>

</beans>
