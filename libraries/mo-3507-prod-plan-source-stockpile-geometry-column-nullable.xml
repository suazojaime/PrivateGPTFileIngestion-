<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext /dbchangelog-ext-3.1.xsd">
    <changeSet id="613b3831-1451-4426-9f65-c4b0a5ae8555" author="MineStar" failOnError="false">
    <preConditions onFailMessage="Ignored ChangeDataType for PROD_PLAN_SOURCE_STOCKPILE.GEOMETRY as column does not exist" onFail="MARK_RAN">
        <columnExists tableName="PROD_PLAN_SOURCE_STOCKPILE" columnName="GEOMETRY"/>
    </preConditions>
    <comment>MO-3507: ChangeDataType of PROD_PLAN_SOURCE_STOCKPILE.GEOMETRY from NVARCHAR(4000) to VARCHAR(4000)</comment>
    <modifyDataType columnName="GEOMETRY" newDataType="VARCHAR(4000)" tableName="PROD_PLAN_SOURCE_STOCKPILE"/>
    <rollback>
        <modifyDataType columnName="GEOMETRY" newDataType="NVARCHAR(4000)" tableName="PROD_PLAN_SOURCE_STOCKPILE"/>
    </rollback>
</changeSet>
<changeSet id="8b391b14-1080-4306-a4ae-f4c6a229d06b" author="MineStar" failOnError="false">
    <preConditions onFailMessage="Ignored DropNotNullConstraint for PROD_PLAN_SOURCE_STOCKPILE.GEOMETRY as column does not exist or is already nullable" onFail="MARK_RAN">
        <ext:columnIsNotNullable tableName="PROD_PLAN_SOURCE_STOCKPILE" columnName="GEOMETRY"/>
    </preConditions>
    <comment>MO-3507: DropNotNullConstraint from PROD_PLAN_SOURCE_STOCKPILE.GEOMETRY</comment>
    <dropNotNullConstraint tableName="PROD_PLAN_SOURCE_STOCKPILE" columnName="GEOMETRY" columnDataType="NVARCHAR(4000)"/>
</changeSet>
</databaseChangeLog>
