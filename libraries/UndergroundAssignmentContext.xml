<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:condbean="http://www.minestar.au.cat.com/springbeans/condbean"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.minestar.au.cat.com/springbeans/condbean http://www.minestar.au.cat.com/springbeans/condbean/condbeans.xsd
       ">

    <bean id="routeDao"
          class="minestar.assignment.persistence.underground.route.RouteDaoImpl"
          parent="minestarDao" lazy-init="true">
        <property name="sequenceValueService" ref="sequenceValueServiceImpl" />
    </bean>

    <bean id="routeNodeDao"
          class="minestar.assignment.persistence.underground.route.RouteNodeDaoImpl"
          parent="minestarDao" lazy-init="true">
        <property name="dumpGoalDao" ref="dumpGoalDao"/>
        <property name="loadGoalDao" ref="loadGoalDao"/>
        <property name="inversionGoalDao" ref="inversionGoalDao"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl" />
    </bean>

    <bean id="undergroundEntryDao"
          class="minestar.production.persistence.underground.entry.UndergroundEntryDaoImpl"
          parent="minestarDao" lazy-init="true">
        <property name="machineDao" ref="machineDao"/>
    </bean>

    <bean id="aimsAreaDao"
          class="minestar.assignment.persistence.underground.aims.AIMSAreaDaoImpl"
          parent="minestarDao" lazy-init="true"/>

    <bean id="wallDao"
          class="minestar.assignment.persistence.underground.WallDaoImpl"
          parent="minestarDao" lazy-init="true">
        <property name="sequenceValueService" ref="sequenceValueServiceImpl" />
    </bean>

    <bean id="UGRestrictionDao"
          class="minestar.mine.persistence.minemodel.UGRestrictionDaoImpl"
          parent="minestarDao" lazy-init="true"/>

    <bean id="UGScheduledAssignmentDao"
          class="minestar.mine.persistence.minemodel.UGScheduledAssignmentDaoImpl"
          parent="minestarDao" lazy-init="true">
        <property name="sequenceValueService" ref="sequenceValueServiceImpl" />
    </bean>

    <condbean:cond privilege="Underground">
        <bean id="displayableDumpGoalNotification"
              class="minestar.mine.service.minemodel.DisplayableDumpGoalNotification"
              lazy-init="true"
              parent="abstractDisplayableNotification">
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="aimsServerConfig"
              class="minestar.assignment.application.underground.AIMSServerConfig"
              init-method="init"
              lazy-init="true"/>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="routeEntityConfig"
              class="minestar.assignment.application.underground.RouteEntityConfig"
              init-method="init"
              lazy-init="true"/>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundAssignmentEngineConfig"
              class="minestar.assignment.application.underground.UndergroundAssignmentEngineConfig"
              init-method="init"
              lazy-init="true"/>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="routePathCalculator"
              class="minestar.mine.domain.minemodel.underground.route.RoutePathCalculator"
              lazy-init="true">
            <property name="routeEntityConfig" ref="routeEntityConfig"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="navigationGraphSynchronizer"
              class="minestar.underground.assignment.NavigationGraphSynchronizer"
             >
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="notification" ref="notification"/>
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="assignmentGenerator"
              class="minestar.assignment.service.underground.AssignmentGeneratorImpl"
              init-method="init"
              lazy-init="true">
            <property name="undergroundAssignmentEngineConfig" ref="undergroundAssignmentEngineConfig"/>
            <property name="drawCardRetrievalService" ref="drawCardRetrievalServiceImpl"/>
            <property name="drawCardAssignmentService" ref="drawCardAssignmentServiceImpl"/>
            <property name="shortestPathService" ref="shortestPathServiceImpl"/>
            <property name="snapToRouteService" ref="snapToRouteServiceImpl"/>
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="undergroundMachineService" ref="undergroundMachineServiceImpl"/>
            <property name="missionGenerator" ref="missionGeneratorImpl"/>
            <property name="logger" ref="loggerWrapperImpl"/>
            <property name="resourceProvider" ref="resourceProviderWrapperImpl"/>
            <property name="notification" ref="notification"/>
            <property name="undergroundCycleHelper" ref="undergroundCycleHelper"/>
            <property name="undergroundAutomaticDelayTypeCache" ref="undergroundAutomaticDelayTypeCacheImpl"/>
            <property name="delayManagementService" ref="delayManagementServiceImpl"/>
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
            <property name="undergroundAssignmentConstraintSolver" ref="undergroundAssignmentConstraintSolver"/>
        </bean>
    </condbean:cond>


    <condbean:cond privilege="Underground">
        <bean id="undergroundAssignmentConstraintSolver"
              class="minestar.underground.assignment.service.constraintsolver.UndergroundAssignmentConstraintSolverImpl"

              init-method="init"
              destroy-method="destroy">

            <property name="notification" ref="notification"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
            <property name="undergroundAssignmentEngineConfig" ref="undergroundAssignmentEngineConfig"/>
            <property name="undergroundMachineService" ref="undergroundMachineServiceImpl"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="drawCardRetrievalService" ref="drawCardRetrievalServiceImpl"/>
            <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
            <property name="drawCardAssignmentRetrievalService" ref="drawCardAssignmentRetrievalServiceImpl"/>
            <property name="shiftService" ref="shiftServiceImpl"/>


        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="registerUndergroundAssignmentConstraintSolverImpl" parent="registrationInstance" lazy-init="false">
            <constructor-arg value="Underground Assignment Constraint Solver"/>
            <constructor-arg value="minestar.underground.assignment.service.constraintsolver.UndergroundAssignmentConstraintSolver"/>
            <constructor-arg ref="undergroundAssignmentConstraintSolver"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundFSMManager"
              class="minestar.underground.assignment.FSM.UndergroundFSMManagerImpl"

              init-method="init"
              destroy-method="destroy">
            <lookup-method name="createMachineFSMContext" bean="machineFSMContext"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
            <property name="triggers">
                <list>
                    <ref bean="lhdoperationModeChangeTrigger"/>
                    <ref bean="ugmissionReportTrigger"/>
                    <ref bean="startupShutdownTrigger"/>
                    <ref bean="productionStateChangeTrigger"/>
                    <ref bean="environmentChangedMasqueradeTrigger"/>
                </list>
            </property>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="environmentChangedMasqueradeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.TriggerMasqueradeAdaptor">
            <property name="event" value="ExtEnvironmentChanged" />
            <property name="triggers">
                <list>
                    <ref bean="navigationGraphChangeTrigger"/>
                    <ref bean="constraintPlanChangeTrigger"/>
                    <ref bean="undergroundAreaJoinTrigger"/>
                    <ref bean="drawpointStatusChangeTrigger"/>
                    <ref bean="orepassStatusChangeTrigger"/>
                    <ref bean="dumpGoalChangeTrigger"/>
                    <ref bean="drawCardImportTrigger"/>
                    <ref bean="drawCardAssignmentChangeTrigger"/>
                    <ref bean="aimsAreaChangeTrigger"/>
                    <ref bean="undergroundAreaStatusChangeTrigger"/>
                    <ref bean="lhdDelayTrigger"/>
                    <ref bean="lhdRestrictionTrigger"/>
                    <ref bean="machineAtZoneCache"/>
                    <ref bean="ignoreForAssignmentChangeTrigger"/>
                    <ref bean="wallChangeTrigger"/>
                    <ref bean="zoneChangeTrigger"/>
                </list>
            </property>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="aimsAreaChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.AIMSAreaChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="drawpointStatusChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.DrawpointStatusChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="lhdoperationModeChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.LHDOperationModeChangeTrigger">
            <property name="notification" ref="notification"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="navigationGraphChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.NavigationGraphChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="wallChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.WallChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="zoneChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.ZoneChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="constraintPlanChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.ConstraintPlanChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="orepassStatusChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.OrepassStatusChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="dumpGoalChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.DumpGoalChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="ignoreForAssignmentChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.IgnoreForAssignmentChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="ugmissionReportTrigger"
              class="minestar.underground.assignment.FSM.Trigger.UGMissionReportTrigger">
            <property name="notification" ref="notification"/>
            <property name="missionAssignmentCache" ref="missionAssignmentCacheImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="drawCardImportTrigger"
              class="minestar.underground.assignment.FSM.Trigger.DrawCardImportTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="startupShutdownTrigger"
              class="minestar.underground.assignment.FSM.Trigger.StartupShutdownTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="productionStateChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.ProductionStateChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="drawCardAssignmentChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.DrawCardAssignmentChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundAreaJoinTrigger"
              class="minestar.underground.assignment.FSM.Trigger.UndergroundAreaJoinTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundAreaStatusChangeTrigger"
              class="minestar.underground.assignment.FSM.Trigger.UndergroundAreaStatusChangeTrigger">
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="lhdDelayTrigger"
              class="minestar.underground.assignment.FSM.Trigger.LHDDelayTrigger">
            <property name="notification" ref="notification"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="lhdRestrictionTrigger"
              class="minestar.underground.assignment.FSM.Trigger.UGRestrictionTrigger">
            <property name="notification" ref="notification"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="machineAtZoneCache"
              class="minestar.underground.assignment.FSM.Trigger.MachineAtZoneCacheImpl" lazy-init="true">
            <property name="notification" ref="notification"/>
            <property name="zoneTypes">
                <list>
                    <value>AutoExclusion</value>
                    <value>InfrastructureExclusionZone</value>
                </list>
            </property>
            <property name="undergroundGeometryCache" ref="undergroundGeometryCache"/>
            <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
            <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
            <property name="deltaZ" value="100" />
            <property name="pitModelService" ref="pitModelServiceImpl"/>
            <property name="justOutsideBuffer" value="2" />
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="machineAtAreaCache"
              class="minestar.machinetracking.application.underground.MachineAtAreaCacheImpl" lazy-init="true">
            <property name="notification" ref="notification"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
            <property name="undergroundGeometryCache" ref="undergroundGeometryCache"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundGeometryCache"
              class="minestar.machinetracking.application.underground.UndergroundGeometryCacheImpl" init-method="init" lazy-init="true">
            <property name="notification" ref="notification"/>
            <property name="undergroundEntryDao" ref="undergroundEntryDao"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
            <property name="txManager" ref="minestarTransactionManager"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="missionAssignmentCacheImpl"
              class="minestar.assignment.application.underground.MissionAssignmentCacheImpl" lazy-init="true">
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="registerMissionAssignmentCacheImpl" parent="registrationInstance" lazy-init="false">
            <constructor-arg value="Underground mission assignment cache"/>
            <constructor-arg value="minestar.assignment.application.underground.MissionAssignmentCache"/>
            <constructor-arg ref="missionAssignmentCacheImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="machineFSMContext"
              class="minestar.underground.assignment.FSM.Context.MachineFSMContextImpl"
              scope="prototype">
            <property name="assignmentGenerator" ref="assignmentGenerator"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
            <property name="shiftService" ref="shiftServiceImpl"/>
            <property name="notification" ref="notification"/>
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="missionAssignmentCache" ref="missionAssignmentCacheImpl"/>
            <property name="undergroundAssignmentEngineConfig" ref="undergroundAssignmentEngineConfig"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="navigationGraphManagerImpl"
              class="minestar.underground.assignment.NavigationGraphManagerImpl">
            <property name="undergroundAssignmentEngineConfig" ref="undergroundAssignmentEngineConfig"/>
            <property name="routePathCalculator" ref="routePathCalculator"/>
            <property name="notification" ref="notification"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <!-- used by Underground Constraint Solver -->
        <bean id="registerNavigationGraphManager" parent="registrationInstance" lazy-init="false">
            <constructor-arg value="Underground Navigation Graph Manager service"/>
            <constructor-arg value="minestar.underground.assignment.NavigationGraphManager"/>
            <constructor-arg ref="navigationGraphManagerImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="shortestPathServiceImpl" class="minestar.assignment.service.underground.ShortestPathServiceImpl">
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="pathEstimatorService" ref="pathEstimatorServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <!-- used by Underground Mine Model Query -->
        <bean id="registerShortestPathService" parent="registrationInstance" lazy-init="false">
            <constructor-arg value="Underground shortest path service"/>
            <constructor-arg value="minestar.assignment.service.underground.ShortestPathService"/>
            <constructor-arg ref="shortestPathServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="pathEstimatorServiceImpl" class="minestar.assignment.service.underground.PathEstimatorServiceImpl">
            <property name="notification" ref="notification"/>
            <property name="travelTimeMeasurementDao" ref="travelTimeMeasurementDaoImpl"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="travelTimeMeasurementDaoImpl" class="minestar.mine.persistence.minemodel.TravelTimeMeasurementDaoImpl">
            <property name="notification" ref="notification"/>
            <property name="sequenceValueService" ref="sequenceValueServiceImpl" />
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="snapToRouteServiceImpl" class="minestar.assignment.service.underground.SnapToRouteServiceImpl">
            <property name="undergroundAssignmentEngineConfig" ref="undergroundAssignmentEngineConfig"/>
            <property name="routePathCalculator" ref="routePathCalculator"/>
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <!-- used by Underground Mine Model Query -->
        <bean id="registerSnapToRouteService" parent="registrationInstance" lazy-init="false">
            <constructor-arg value="Underground Snap-to-route service"/>
            <constructor-arg value="minestar.assignment.service.underground.SnapToRouteService"/>
            <constructor-arg ref="snapToRouteServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="missionGeneratorImpl"
              class="minestar.assignment.service.underground.MissionGeneratorImpl"
              lazy-init="true">
            <property name="aimsServerConfig" ref="aimsServerConfig"/>
            <property name="undergroundAssignmentEngineConfig" ref="undergroundAssignmentEngineConfig"/>
            <property name="routePathCalculator" ref="routePathCalculator"/>
            <property name="dimensionManagementService" ref="dimensionManagementServiceImpl"/>
            <property name="undergroundGeometryCache" ref="undergroundGeometryCache"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundOPCAdapter"
              class="minestar.assignment.application.underground.UndergroundOPCAdapter"
              lazy-init="false">
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="txManager" ref="minestarTransactionManager"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="infrastructureExclusionZoneComponent"
              class="minestar.assignment.application.underground.InfrastructureExclusionZoneComponent"
              lazy-init="false">
            <property name="notification" ref="notification"/>
            <property name="aimsServerConfig" ref="aimsServerConfig"/>
            <property name="undergroundAutomaticDelayTypeCache" ref="undergroundAutomaticDelayTypeCacheImpl"/>
            <property name="delayManagementService" ref="delayManagementServiceImpl"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
            <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
            <property name="undergroundEntryDao" ref="undergroundEntryDao"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="undergroundMachineService" ref="undergroundMachineServiceImpl"/>
            <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
            <property name="txManager" ref="minestarTransactionManager"/>
        </bean>
    </condbean:cond>


    <condbean:cond privilege="Underground">
        <bean id="undergroundAssignmentServiceImpl"
              class="minestar.assignment.service.underground.UndergroundAssignmentServiceImpl"
              init-method="init" destroy-method="cleanUp"
              lazy-init="true">

            <property name="notification" ref="notification"/>
            <property name="hibernateEventListener" ref="hibernateEventListener"/>
            <property name="undergroundAssignmentEngineConfig" ref="undergroundAssignmentEngineConfig"/>
            <property name="routeNodeDao" ref="routeNodeDao"/>
            <property name="routeDao" ref="routeDao"/>
            <property name="undergroundEntryDao" ref="undergroundEntryDao"/>
            <property name="wallDao" ref="wallDao"/>
            <property name="UGRestrictionDao" ref="UGRestrictionDao"/>
            <property name="UGScheduledAssignmentDao" ref="UGScheduledAssignmentDao"/>
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="shortestPathService" ref="shortestPathServiceImpl"/>
            <property name="snapToRouteService" ref="snapToRouteServiceImpl"/>
            <property name="aimsAreaDao" ref="aimsAreaDao"/>
            <property name="sequenceValueService" ref="sequenceValueServiceImpl" />
            <property name="undergroundOPCAdapter" ref="undergroundOPCAdapter"/>
            <property name="undergroundFSMManager" ref="undergroundFSMManager"/>
            <property name="undergroundLayoutDeletionComponent" ref="undergroundLayoutDeletionComponent"/>
            <property name="infrastructureExclusionZoneComponent" ref="infrastructureExclusionZoneComponent"/>
            <property name="undergroundAutomaticDelayTypeCache" ref="undergroundAutomaticDelayTypeCacheImpl"/>
            <property name="alarmService" ref="alarmServiceImpl"/>
            <property name="delayManagementService" ref="delayManagementServiceImpl"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
            <property name="pitModelService" ref="pitModelServiceImpl"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="undergroundMachineService" ref="undergroundMachineServiceImpl"/>
            <property name="txManager" ref="minestarTransactionManager"/>
            <property name="aimsServerConfig" ref="aimsServerConfig"/>
            <property name="sensorService" ref="sensorServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="registerUndergroundAssignmentService" parent="registrationInstance" lazy-init="true">
            <constructor-arg value="Underground Assignment Service"/>
            <constructor-arg value="minestar.assignment.service.underground.UndergroundAssignmentService"/>
            <constructor-arg ref="undergroundAssignmentServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="aimsBarrierRouteWeights"
              class="minestar.assignment.application.underground.AIMSEntryRouteWeights"
              init-method="init"
              destroy-method="cleanUp"
              lazy-init="false">
            <property name="notification" ref="notification"/>
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="routePathCalculator" ref="routePathCalculator"/>
            <property name="delayManagementService" ref="delayManagementServiceImpl"/>
        </bean>
    </condbean:cond>


    <condbean:cond privilege="Underground">
        <bean id="aimsAreaRouteWeights"
              class="minestar.assignment.application.underground.AIMSAreaRouteWeights"
              init-method="init"
              destroy-method="cleanUp"
              lazy-init="false">
            <property name="notification" ref="notification"/>
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="routePathCalculator" ref="routePathCalculator"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="zoneRouteWeights"
              class="minestar.assignment.application.underground.ZoneRouteWeights"
              init-method="init"
              destroy-method="destroy"
              lazy-init="false">
            <property name="notification" ref="notification"/>
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="routePathCalculator" ref="routePathCalculator"/>
            <property name="zoneLayoutService" ref="zoneLayoutServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="wallRouteWeights"
              class="minestar.assignment.application.underground.WallRouteWeights"
              init-method="init"
              destroy-method="tearDown"
              lazy-init="false">
            <property name="notification" ref="notification"/>
            <property name="navigationGraphManager" ref="navigationGraphManagerImpl"/>
            <property name="routePathCalculator" ref="routePathCalculator"/>
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundMachinePolytopeDao"
          class="minestar.mine.persistence.underground.polytope.UndergroundMachinePolytopeDaoImpl"
          parent="minestarDao" lazy-init="true"/>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundMachinePolytopeServiceImpl"
              class="minestar.mine.service.underground.polytope.UndergroundMachinePolytopeServiceImpl"
              lazy-init="true">
            <property name="undergroundMachinePolytopeDao" ref="undergroundMachinePolytopeDao"/>
            <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="registerUndergroundMachinePolytopeService" parent="registrationInstance" lazy-init="false">
            <constructor-arg value="Underground Machine Polytope Service"/>
            <constructor-arg value="minestar.mine.service.underground.polytope.UndergroundMachinePolytopeService"/>
            <constructor-arg ref="undergroundMachinePolytopeServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="inversionServiceImpl"
              class="minestar.assignment.service.underground.InversionServiceImpl"
              lazy-init="true">
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
            <property name="shortestPathService" ref="shortestPathServiceImpl"/>
            <property name="notification" ref="notification"/>
            <property name="routePathCalculator" ref="routePathCalculator"/>
            <property name="snapToRouteService" ref="snapToRouteServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="registerInversionService" parent="registrationInstance" lazy-init="true">
            <constructor-arg value="Inversion Service"/>
            <constructor-arg value="minestar.assignment.service.underground.InversionService"/>
            <constructor-arg ref="inversionServiceImpl"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="lhdScheduledAssignmentUpdater"
              class="minestar.assignment.service.underground.UGScheduledAssignmentUpdater"
              init-method="init" destroy-method="cleanUp">
            <property name="undergroundAssignmentService" ref="undergroundAssignmentServiceImpl"/>
            <property name="undergroundLayoutService" ref="undergroundLayoutServiceImpl"/>
            <property name="logger" ref="loggerWrapperImpl"/>
            <property name="resourceProvider" ref="resourceProviderWrapperImpl"/>
            <property name="notification" ref="notification"/>
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="registerLHDScheduledAssignmentUpdater" parent="registrationInstance" lazy-init="true">
            <constructor-arg value="LHD Scheduled Assignment Updater Service"/>
            <constructor-arg value="minestar.assignment.service.underground.UGScheduledAssignmentUpdater"/>
            <constructor-arg ref="lhdScheduledAssignmentUpdater"/>
        </bean>
    </condbean:cond>

</beans>
