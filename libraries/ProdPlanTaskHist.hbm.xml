<?xml version="1.0"?>
<!-- Copyright (c) 2021 Caterpillar -->

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="historical" default-access="field" default-lazy="false">

    <class name="minestar.planmanagement.persistence.v2.ProdPlanTaskHistDO" table="PROD_PLAN_TASK_HIST">
        <meta attribute="description">Stores historical production planning task details</meta>
        <meta attribute="index">
            <!-- Supports DAO methods: findTaskHistoryForTaskOID and findTasksByFilter -->
            name=PROD_PLAN_TASK_HIST_VERSION
            columns=TASK_OID, VERSION
            unique=true
        </meta>

        <id name="OID" type="long" column="TASK_HIST_OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <property name="taskOID" type="long" column="TASK_OID" not-null="true">
            <meta attribute="description">Internal OID that uniquely identifies a task</meta>
        </property>

        <property name="taskUUID" type="java.util.UUID" column="TASK_UUID" not-null="true">
            <meta attribute="description">UUID that uniquely identifies a task</meta>
        </property>

        <property name="version" type="int" column="VERSION" not-null="true"/>

        <property name="createdBy" type="minestar.planmanagement.persistence.v2.ProdPlanTaskCreatedByEnumUserType" length="32" column="CREATED_BY" not-null="true">
            <meta attribute="description">The system or user that created this task</meta>
        </property>

        <property name="createdTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="CREATED_TIME_UTC" not-null="true">
            <meta attribute="utc-description">The creation timestamp of the task</meta>
            <meta attribute="description">Task creation timestamp</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="updatedTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="UPDATED_TIME_UTC" not-null="true">
            <meta attribute="utc-description">The update timestamp of the task</meta>
            <meta attribute="description">Task updated timestamp</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="targetStartTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="TARGET_START_TIME_UTC">
            <meta attribute="utc-description">The target start time of the task</meta>
            <meta attribute="description">The target start time of the task</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="targetEndTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="TARGET_END_TIME_UTC">
            <meta attribute="utc-description">The target end time of the task</meta>
            <meta attribute="description">The target end time of the task</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="actualStartTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="ACTUAL_START_TIME_UTC">
            <meta attribute="utc-description">The actual start time of the task when status changed to AVAILABLE</meta>
            <meta attribute="description">The actual start time of the task when status changed to AVAILABLE</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="actualEndTime" type="minestar.platform.persistence.HibernateUTCInstantType" column="ACTUAL_END_TIME_UTC">
            <meta attribute="utc-description">The actual end time of the task when status changed to CLOSED</meta>
            <meta attribute="description">The actual end time of the task when status changed to CLOSED</meta>
            <meta attribute="view-localtime">true</meta>
        </property>

        <property name="taskType" type="minestar.planmanagement.persistence.v2.ProdPlanTaskTypeEnumUserType" length="32"
                  column="TASK_TYPE" not-null="true">
            <meta attribute="description">The type of task</meta>
        </property>

        <property name="taskStatus" type="minestar.planmanagement.persistence.v2.ProdPlanTaskStatusEnumUserType"
                  length="32" column="TASK_STATUS" not-null="true">
            <meta attribute="description">The status of task</meta>
        </property>

        <property name="taskContent" type="string" length="65536" column="TASK_CONTENT" not-null="true">
            <meta attribute="description">The JSON encoding of the task</meta>
        </property>
    </class>

</hibernate-mapping>
