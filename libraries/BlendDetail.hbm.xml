<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="minestar.mine.domain.material" schema="historical">

<class name="BlendDetail" table="BLEND_DETAIL">

    <meta attribute="table">
        tablespace=MW_ENT
    </meta>
    <meta attribute="primary-key">
        tablespace=MW_IDXENT
    </meta>
    <meta attribute="description">A blend detail record</meta>

    <id
            name="OID"
            type="java.lang.Long"
            column="OID"
            >
        <generator class="com.mincom.env.base.persistence.IDGenerator"/>
    </id>
    <property
            name="blendOID"
            type="java.lang.Long"
            column="BLEND_OID"
            not-null="true"
            >
    </property>
    <property
            name="blendName"
            type="java.lang.String"
            column="BLEND_NAME"
            length="1016"
            not-null="false"
            >
        <meta attribute="description">The blend name</meta>
    </property>
    <property
            name="blendComputationMethod"
            type="minestar.mine.domain.material.BlendComputationMethodEnumUserType"
            column="BLEND_METHOD"
            length="255"
            not-null="false"
            >
        <meta attribute="description">The destination blend computation method</meta>
    </property>
    <property
            name="controlMass"
            column="CONTROL_MASS"
            >
        <meta attribute="unitType">mass</meta>
        <meta attribute="description">The blend control mass</meta>
        <type name="quantity">
            <param name="unitType">mass</param>
        </type>
    </property>
    <property
            name="controlDuration"
            column="CONTROL_DURATION"
            >
        <meta attribute="unitType">duration</meta>
        <meta attribute="description">The blend control duration</meta>
        <type name="quantity">
            <param name="unitType">duration</param>
        </type>
    </property>

    <set name="allowedMaterials" table="MATERIAL_CRITERIA_DETAIL" lazy="false" fetch="subselect" cascade="save-update">
        <meta attribute="collection-table">
            tablespace=MW_ENT
        </meta>
        <meta attribute="collection-primary-key">
            tablespace=MW_IDXENT
        </meta>
        <meta attribute="description">The set of allowed materials as criteria </meta>
        <key column="BLEND_DETAIL_OID" not-null="false" />
        <one-to-many class="minestar.mine.domain.material.MaterialCriteriaDetail" not-found="ignore"/>
    </set>

    <set name="discreteGradeCriterias" table="DISCRETE_GRADE_CRITERIA_DETAIL" lazy="false" fetch="subselect" cascade="save-update">
        <meta attribute="collection-table">
            tablespace=MW_ENT
        </meta>
        <meta attribute="collection-primary-key">
            tablespace=MW_IDXENT
        </meta>
        <meta attribute="description">The set of discrete grade as criteria </meta>
        <key column="BLEND_DETAIL_OID" not-null="false" />
        <one-to-many class="minestar.mine.domain.material.DiscreteGradeCriteriaDetail" not-found="ignore"/>
    </set>

    <set name="continuousGradeCriterias" table="CONT_GRADE_CRITERIA_DETAIL" lazy="false" fetch="subselect" cascade="save-update">
        <meta attribute="collection-table">
            tablespace=MW_ENT
        </meta>
        <meta attribute="collection-primary-key">
            tablespace=MW_IDXENT
        </meta>
        <meta attribute="description">The set of discrete grade as criteria </meta>
        <key column="BLEND_DETAIL_OID" not-null="false" />
        <one-to-many class="minestar.mine.domain.material.ContinuousGradeCriteriaDetail" not-found="ignore"/>
    </set>

</class>
</hibernate-mapping>
