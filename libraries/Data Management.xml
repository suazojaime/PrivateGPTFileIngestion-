<?xml version="1.0" encoding="us-ascii" standalone="no"?>
<!-- Copyright (c) 2019 Caterpillar -->

<!DOCTYPE classdefs SYSTEM "metadata.dtd">
<classdefs>
    <classdef name="ExecutorOptions">
        <tag>system</tag>
        <propertydef name="executorName">
            <defaultvalue>local</defaultvalue>
            <!--<defaultvalue>Job Execution Service</defaultvalue>-->
        </propertydef>
    </classdef>
    <classdef name="HistoricalDataInspector">
        <implclass name='{jobUrl:minestar.platform.jobs.HistoricalDataValidator,preferredStyle:messageTree}'/>
        <privilege>Data Validation</privilege>
        <tag>system</tag>
        <propertygroup name="executorOptions">
            <uigroupdef source="Jobs:Inspectors.ExecutorOptions" visiblewhen="false"/>
        </propertygroup>
        <propertygroup name="options" label="Standard Options" >
            <uigroupdef mode="plain"/>
            <propertygroup name="pluginsOptions">
                <uigroupdef mode="region"/>
                <propertydef name="inspectors" label="Inspectors">
                    <typedef>
                        <type code="string" choices='{"minestar.production.service.inspectors.DelayInspector":"Delay Inspections",
                                                    "minestar.production.service.inspectors.CycleInspector":"Cycle Inspections",
                                                    "minestar.production.service.inspectors.KpiSummariesInspector":"Kpi Summaries Inspections"}'/>
                    </typedef>
                    <uidef widget="checkbox"/>
                </propertydef>
                <propertydef name="commit" label="Commit Changes">
                    <typedef>
                        <type code="boolean"/>
                    </typedef>
                </propertydef>
            </propertygroup>
            <propertygroup name="recordFiltering" label="Record Filtering">
                <uigroupdef mode="box"/>
                <propertygroup name="filterModeGrp">
                    <uigroupdef mode="plain" visiblewhen="false"/>
                    <propertydef name="filterMode" label="Filter Mode">
                        <typedef>
                            <type code="string" choices='{0:"Filter By Fields", 1:"Filter From File"}'/>
                        </typedef>
                        <uidef widget="radio" processOnChange="true"/>
                        <description>Use Filter From File when a list of cycles ids has been previously saved to a file.</description>
                    </propertydef>
                </propertygroup>
                <propertygroup name="filterByFields">
                    <uigroupdef mode="plain" visiblewhen="field('filterMode')==0"/>
                    <propertygroup name="periodSelector">
                        <uigroupdef mode="region"/>
                        <propertydef name="PeriodDesc" label="Period">
                            <typedef>
                                <type code="string"/>
                            </typedef>
                            <uidef widget="period" option="startDate,endDate" updateable="false" />
                        </propertydef>
                        <propertydef name="startDate" label="Start Date">
                            <typedef>
                                <javaclass name="java.util.Date"/>
                            </typedef>
                        </propertydef>
                        <propertydef name="endDate" label="End Date">
                            <typedef>
                                <javaclass name="java.util.Date"/>
                            </typedef>
                        </propertydef>
                    </propertygroup>
                    <propertygroup name="propertyFilter" label="Matching Criteria">
                        <uigroupdef mode="region" visiblewhen="false"/>
                        <propertydef name="primaryMachineName" label="Machine Name(s)">
                            <typedef>
                                <type code="string" choices="service(minestar.pitlink.application.MachineCollectionProvider):MobileMachine"/>
                            </typedef>
                            <uidef widget="ordered" mode="popup"/>
                        </propertydef>
                    </propertygroup>
                </propertygroup>
                <propertygroup name="filterFromFile">
                    <uigroupdef mode="plain" visiblewhen="field('filterMode')==1"/>
                    <propertydef name="filterFile" label="Filter File">
                        <typedef>
                            <type code="string"/>
                        </typedef>
                        <defaultvalue>{MSTAR_DATA}/hist_data_filter.txt</defaultvalue>
                        <description>A file which contains one record id per line.</description>
                    </propertydef>
                </propertygroup>
            </propertygroup>
            <propertygroup name="runParameters" label="Advanced Parameters">
                <uigroupdef mode="collapsed"/>
                <propertydef name="chunkSizeHours" label="Chunk Size (Hours)">
                    <typedef>
                        <type code="short"/>
                    </typedef>
                    <uidef widget="spinner" custom='{setMinimum:0, setMaximum:168}'/>
                    <defaultvalue>72</defaultvalue>
                    <description>The size of query chunk in hours.</description>
                </propertydef>
                <propertydef name="waitTime" label="Wait Time (s)">
                    <typedef>
                        <type code="short"/>
                    </typedef>
                    <uidef widget="spinner" custom='{setMinimum:0, setMaximum:60}'/>
                    <defaultvalue>0</defaultvalue>
                    <description>The time to wait between each update (in seconds).</description>
                </propertydef>
            </propertygroup>
        </propertygroup>
        <description>Perform bulk historical data inspections.</description>
    </classdef>

    <classdef name="Operator Import">
        <!--<implclass name='com.mincom.works.cc.personnel.util.PersonnelImportJob'/>-->
        <privilege>Operator Import Management</privilege>
        <tag>user</tag>

        <propertygroup name="standardOptions">
            <uigroupdef visiblewhen="false"/>
            <propertydef name="jobUrl">
                <uidef visiblewhen="false"/>
                <defaultvalue>com.mincom.works.cc.personnel.util.PersonnelImportJob</defaultvalue>
            </propertydef>
            <propertydef name="executorName" access="readonly">
                <uidef visiblewhen="false"/>
                <defaultvalue>JobExecutionService</defaultvalue>
            </propertydef>


        </propertygroup>
        <propertygroup name="Import Settings">
            <uigroupdef layout="vertical" layoutInfo='{rowSpec="fill:default:grow"}'/>
            <propertydef name="importDirectory" label="Import Directory">
                <typedef>
                    <type code="string"/>
                </typedef>

                <description>The directory where the CSV files will be imported from.</description>
            </propertydef>
            <propertydef name="processedDirectory" label="Processed Directory">
                <typedef>
                    <type code="string"/>
                </typedef>
                <defaultvalue>processed</defaultvalue>
                <description>The directory where the CSV files will moved to after they are imported. Relative to the Import Directory.</description>
            </propertydef>
            <propertydef name="allowUpdates" label="Allow Updates">
                <typedef>
                    <type code="boolean"/>
                </typedef>
                <defaultvalue>true</defaultvalue>
                <description>Details for existing operators will be updated according to the imported file.</description>
            </propertydef>

            <propertydef name="idColumn" label="ID Column Name">
                <typedef>
                    <type code="string"/>
                </typedef>
                <defaultvalue>id</defaultvalue>
                <description>The column name that corresponds to the personnel ID.</description>
            </propertydef>

            <propertydef name="firstNameColumn" label="First Name Column Name">
                <typedef>
                    <type code="string"/>
                </typedef>
                <defaultvalue>firstname</defaultvalue>
                <description>The column name that corresponds to the first name of the operator.</description>
            </propertydef>

            <propertydef name="secondNameColumn" label="Second Name Column Name">
                <typedef>
                    <type code="string"/>
                </typedef>
                <defaultvalue>secondname</defaultvalue>
                <description>The column name that corresponds to the second name of the operator.</description>
            </propertydef>

            <propertydef name="lastNameColumn" label="Last Name Column Name">
                <typedef>
                    <type code="string"/>
                </typedef>
                <defaultvalue>lastname</defaultvalue>
                <description>The column name that corresponds to last name of the operator.</description>
            </propertydef>

            <propertydef name="statusColumn" label="Status Column Name">
                <typedef>
                    <type code="string"/>
                </typedef>
                <defaultvalue>status</defaultvalue>
                <description>The column name that corresponds to active status of the operator. Expected values are Active or Archived.</description>
            </propertydef>
        </propertygroup>
        
        <description>Imports operators (CSV format) into MineStar.</description>
    </classdef>


    <classdef name="Record System Restart Information">

        <privilege>Record System Restart Information</privilege>       
        <tag>user</tag>

        <propertygroup name="standardOptions">
            <uigroupdef visiblewhen="false"/>
            <propertydef name="jobUrl">
                <uidef visiblewhen="false"/>
                <defaultvalue>minestar.platform.service.jobs.RecordRestartInfo</defaultvalue>
            </propertydef>
            <propertydef name="executorName" access="readonly">
                <uidef visiblewhen="false"/>
                <defaultvalue>JobExecutionService</defaultvalue>
            </propertydef>


        </propertygroup>
        <propertygroup name="Import Settings">
            <propertydef name="logFileDirectory" label="Base File Directory">
                <typedef>
                    <type code="string"/>
                </typedef>
                <defaultvalue type="python">getConfigPathOption('minestar.platform.service.jobs.Config',
                    'logDir')</defaultvalue>
                <description>The directory containing the log files for the job to process.</description>
            </propertydef>
            
        </propertygroup>

        <description>Records System Restart Information into Minestar Database.</description>
    </classdef>

</classdefs>
