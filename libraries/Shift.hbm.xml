<?xml version="1.0"?>
<!-- Copyright (c) 2018, Caterpillar -->

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping schema="model" default-access="field" default-lazy="false">

    <class name="minestar.platform.domain.calendar.ShiftImpl" table="SHIFT">

        <meta attribute="view-master" inherit="false">true</meta>
        <meta attribute="table">
            tablespace=MW_OBJ
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXOBJ
        </meta>
        <meta attribute="index">
            name=SHIFT_STARTTIME
            columns=STARTTIME_UTC
            tablespace=MW_IDXENT
            unique=true
        </meta>
        <meta attribute="index">
            name=SHIFT_NAME
            columns=NAME
            tablespace=MW_IDXENT
        </meta>

        <meta attribute="description">An instance of a shift.</meta>

        <id name="OID" type="long" column="OID">
            <generator class="com.mincom.env.base.persistence.IDGenerator"/>
        </id>

        <version name="version" type="int">
            <meta attribute="description">The shift version.</meta>
        </version>

        <property name="startTime" type="TimestampType">
            <meta attribute="timestamp">true</meta>
            <meta attribute="view-localtime">true</meta>
            <meta attribute="utc-description">The utc time that was started.</meta>
            <meta attribute="description">The time that was started</meta>
            <column name="STARTTIME_UTC" not-null="true" default="01-JAN-1970"/>
        </property>

        <property name="endTime" type="TimestampType">
            <meta attribute="timestamp">true</meta>
            <meta attribute="view-localtime">true</meta>
            <meta attribute="utc-description">The end utc time</meta>
            <meta attribute="description">The end time</meta>
            <column name="ENDTIME_UTC" not-null="true" default="01-JAN-1970"/>
        </property>

        <property name="type" type="minestar.platform.persistence.calendar.ShiftType$ByteUserType" column="SHIFTTYPE" not-null="true">
            <meta attribute="choices" inherit="false">choice:shiftType</meta>
        </property>

        <many-to-one name="crewRef" class="minestar.platform.domain.roster.CrewReference" column="CREW">
            <meta attribute="alias">crew</meta>
        </many-to-one>

        <property name="name" type="string" length="254" column="NAME" not-null="true"/>
        <property name="day" type="string" length="32" column="DAY" not-null="true"/>
        <property name="week" type="string" length="32" column="WEEK" not-null="true"/>
        <property name="month" type="string" length="32" column="MONTH" not-null="true"/>
        <property name="quarter" type="string" length="32" column="QUARTER" not-null="true"/>
        <property name="half" type="string" length="32" column="HALF" not-null="true"/>
        <property name="year" type="string" length="32" column="YEAR" not-null="true"/>
        <property name="reportingDate" type="string" length="8" column="REPORTING_DATE">
            <meta attribute="description">The value of the DAY column in ISO8601 format</meta>
        </property>

    </class>

</hibernate-mapping>
