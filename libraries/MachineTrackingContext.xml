<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (c) 2022 Caterpillar -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       ">

    <bean id="scheduledBreakServiceImpl" class="minestar.mine.service.scheduledbreak.ScheduledBreakServiceImpl" init-method="init">
        <constructor-arg name="scheduledBreakDao">
            <bean class="minestar.mine.persistence.scheduledbreak.ScheduledBreakDaoImpl" parent="minestarDao"/>
        </constructor-arg>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="machineAuditService" class="minestar.machinetracking.service.MachineAuditServiceImpl">
        <property name="auditLogger" ref="auditLogger" />
    </bean>

    <bean id="dynamicModelServiceImpl" class="minestar.machinetracking.service.DynamicModelServiceImpl"
            init-method="start" destroy-method="stop">
        <property name="cycleService" ref="cycleServiceImpl"/>
        <property name="mineFleetService" ref="mineFleetServiceImpl"/>
        <property name="mineLayoutService" ref="mineLayoutServiceImpl"/>
        <property name="notification" ref="notification"/>
        <property name="pitModelService" ref="pitModelServiceImpl"/>
    </bean>

    <bean id="registerDynamicModelService" parent="registrationInstance">
        <constructor-arg value="Dynamic Model Service"/>
        <constructor-arg value="minestar.machinetracking.service.DynamicModelService"/>
        <constructor-arg ref="dynamicModelServiceImpl"/>
    </bean>

    <bean id="loaderCycleModeMessageListener" class="minestar.production.listener.LoaderCycleModeMessageListenerImpl">
        <property name="pitModelService" ref="pitModelServiceImpl"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="crusherIntegrationServiceImpl" class="minestar.machinetracking.service.crusher.CrusherIntegrationServiceImpl" init-method="init">
        <constructor-arg name="dataBridgeService" ref="dataBridgeServiceImpl"/>
        <constructor-arg name="materialManagementService" ref="materialManagementServiceImpl"/>
        <constructor-arg name="materialModifierManagementService" ref="materialModifierManagementServiceImpl"/>
        <constructor-arg name="mineFleetService" ref="mineFleetServiceImpl"/>
        <constructor-arg name="delayManagementService" ref="delayManagementServiceImpl"/>
        <constructor-arg name="rockBreakerService" ref="rockBreakerServiceImpl"/>
        <constructor-arg name="dumpPlanningService" ref="dumpPlanningServiceImpl"/>
        <constructor-arg name="authenticationService" ref="authenticationServiceImpl"/>
        <constructor-arg name="notification" ref="notification"/>
        <constructor-arg name="hibernateEventListener" ref="hibernateEventListener"/>
        <constructor-arg name="auditLogger" ref="auditLogger"/>
    </bean>

    <bean id="registerCrusherIntegrationService" parent="registrationInstance">
        <constructor-arg value="Crusher Integration Service"/>
        <constructor-arg value="minestar.machinetracking.service.crusher.CrusherIntegrationService"/>
        <constructor-arg ref="crusherIntegrationServiceImpl"/>
    </bean>

</beans>
