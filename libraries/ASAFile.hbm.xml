<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="minestar.health.util.asa" schema="historical">

    <class name="HaulRoadConditionFile" table="ASA_FILE">
        <meta attribute="noDatabaseMetadata" inherit="false">true</meta>
        <meta attribute="table">
            tablespace=MW_OBJ
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXOBJ
        </meta>
        <meta attribute="viewproperty-machineOID" inherit="false">
            type=string
            description=The system object identifier of the machine for which data was collected
            expression=lookupResource.asafile.machineOID.query
        </meta>
        <meta attribute="viewproperty-machine_N" inherit="false">
            type=string
            description=The name of the machine for which data was collected
            expression=lookupResource.asafile.machine_n.query
        </meta>
        <meta attribute="viewproperty-machineClassOID" inherit="false">
            type=string
            description=The system object identifier of the machine class of the machine whose data was collected
            expression=lookupResource.asafile.machineClassOID.query
        </meta>
        <meta attribute="viewproperty-machineClass_N" inherit="false">
            type=string
            description=The machine class name of the machine for which data was collected
            expression=lookupResource.asafile.machineClass_N.query
        </meta>
        <!--<meta attribute="index">-->
            <!--name=ASA_FILE_UNIQ-->
            <!--unique=true-->
            <!--columns=SERIALNUMBER, STARTTIME, ENDTIME-->
            <!--tablespace=MW_IDXENT-->
        <!--</meta>-->
        <meta attribute="description">VIMS files that have been processed to calculate an FPO Haul Road Severity Index</meta>

        <id name="id" column="FILEID">
            <meta attribute="alias">OID</meta>
            <meta attribute="description">The unique system object identifier for the file whose data was used to analyze road conditions</meta>
            <generator class="uuid.hex"/>
        </id>

        <property name="fileName" column="FILENAME" not-null="true">
        	<meta attribute="description">The name of the file whose data was used to analyze road conditions</meta>
        </property>
        <property name="serialNumber" column="SERIALNUMBER" not-null="true">
            <meta attribute="description">The serial number of the machine for which data was collected</meta>
        </property>

        <array name="summaries" inverse="true" cascade="all-delete-orphan">
            <meta attribute="description">The valid travelling full load cycles for this data set.</meta>
            <key column="FILEID"/>
            <index column="SUMMARYINDEX"/>
            <one-to-many class="HaulRoadConditionData"/>
        </array>
    </class>

</hibernate-mapping>
