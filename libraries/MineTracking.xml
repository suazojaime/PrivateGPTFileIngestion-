<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (c) 2023 Caterpillar -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:condbean="http://www.minestar.au.cat.com/springbeans/condbean"
       xsi:schemaLocation="
            http://www.minestar.au.cat.com/springbeans/condbean http://www.minestar.au.cat.com/springbeans/condbean/condbeans.xsd
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       ">

    <!-- Use this file only to define what gets loaded in the object server, not what those things are. -->
    <bean id="mineTrackingStuff" class="java.lang.Object" lazy-init="false"
          depends-on="minestarBus, coreServices, objectServerAdmin,
          registerDefaultPersistenceService, eventPersistifier,
          machineServiceFacade, registerDiagnosticServiceImpl, stoppedMachineMonitorService,
          registerSecurityServiceImpl, fieldEventFilters, uiFacadeStuff, safetyChecklistEventProcessor,
          operatorChangeEventProcessor, assignmentDelayIntegration, outboundMinestarSync, mineModelUpdateService,
          registerCycleServiceImpl, registerCycleSynchronizerServiceImpl,
          fullDelayManagementService, registerIncidentManagementService,
          registerIncidentMessageArrivalProcessor, registerIncidentMessageListener,
          registerLaneLayoutService, registerZoneLayoutService, registerHazardLayoutService,
          registerUserLayerService, registerLaneReassignmentService, registerAuditLoggerService, registerAuditQueryService,
          registerSpeedManagementService, registerResourceDiagnosticsService, registerMachineSmuService,
          registerZoneMakerService, fullShiftService, registerAmbientTemperatureService,
          registerDynamicTkphService, registerMachineInformationUpdateSender, registerPlcService, registerPlcSlaveService,
          registerBlendingServices, registerFleetAssignmentService, registerOnboardV2XUpdateMessageListener,
          registerOffTruckCourseProcessor, registerSpoilPileManagementService, registerScheduledAssignmentAuditServices,
          registerEventLogService, registerLockController, registerAutonomyStatus2UCCImpl, registerMachineUCCImpl, registerAStopUCCImpl,
          registerSiteProductivityService, registerASUMessageService, registerProductionKpiSummaryService,
          registerMachineTkphService, registerVimsSensorStatusService, registerTrafficManagementService, registerRasterService,
          registerProductionRequestService, registerScheduledAssignmentService, registerPersistentAssignmentModelService,
          registerDestinationDetourService, registerMandatoryDetourService, offCourseProcessor"/>

    <!-- Use this file only to define what gets loaded in the object server, not what those things are. -->
    <condbean:cond license="command">
        <bean id="autonomyServices" class="java.lang.Object" lazy-init="true"
              depends-on="
           registerCableBridgeService, registerScriptingService, registerLoadPlanningService, registerDumpPlanningService,
           registerFuelBayPlanningService, registerWaterRefillStationPlanningService, registerPayloadServicePlanningService,registerWorkshopPlanningService, registerTruckSnapshotServiceImpl,
           registerLaneUsageService, registerLayoverStationPlanningService,
           registerDumpingPointVerificationServiceImpl, registerAreaStopServiceImpl,
           registerDeadlockDetectionServiceImpl, registerMachineHeartbeatListener,
           registerSecondaryPermissionChecker, registerLaneUsageStateServiceImpl, registerStoppedTruckDelayMonitorImpl,
           registerLaneTravelService, registerLaneCharacteristicsService, registerLaneCommitServiceImpl,
           registerPlanAssociationService,
           registerUnobservedCellsServiceImpl, registerRegionServiceImpl,
           registerTrafficCongestionServiceImpl, registerStuckTruckService, registerOperatorChangeListener,
           registerAutonomousTruckConfigService, clearHazardMessageHandler, registerVehicleDataService,
           registerTractionEventService, registerFireSuppressionService, registerAutonomousMachineActivityMonitorService,
           registerDestinationSequencingService, registerStatusTransitionService, registerRockBreakerService, registerDumpPlanLaneArbitrationService,
           registerPerceptionVerificationServiceImpl, registerRequestPermissionsServiceImpl, registerEngineShutdownService"/>
    </condbean:cond>

    <condbean:cond license="command">
        <bean id="autonomyMineTrackingStuff" class="java.lang.Object" lazy-init="false"
              depends-on="mineTrackingStuff, autonomyServices, autonomyUiFacadeStuff,
               highwallDumpScoreBeans">
        </bean>
    </condbean:cond>

    <condbean:cond license="command">
        <bean id="autonomyUiFacadeStuff" class="java.lang.Object" lazy-init="true"
              depends-on="uiFacadeStuff, registerAStopUCCImpl,
              registerAutonomyStatus2UCCImpl, registerLaneUCCImpl">
        </bean>
    </condbean:cond>

    <condbean:cond license="command">
        <bean id="highwallDumpScoreBeans" class="java.lang.Object" lazy-init="true"
              depends-on="highwallDumpScoreMbeanManager, highwallDumpAllocationScoreCollator">
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundStuff" class="java.lang.Object" lazy-init="false"
              depends-on="displayableDrawPointNotification,
                undergroundAreaNotification,
                registerCableBridgeService,
                registerDrawCardAssignmentRetrievalService,
                registerDrawCardAssignmentService,
                registerUndergroundAlarmRecordService,
                registerUndergroundLayoutRetrievalService,
                registerUndergroundLayoutService,
                registerUndergroundMachineService,
                registerUndergroundMapService,
                registerUndergroundStatusTimelineService,
                registerUndergroundAutomaticDelayTypeCache,
                registerMetadataSchemaService,
                registerMetadataService,
                registerUGConfigStoreService"/>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="drawCardStuff" class="java.lang.Object" lazy-init="false"
              depends-on="registerDrawCardEventProcessorService,
                registerDrawCardRetrievalService,
                registerDrawCardManagementService,
                registerDrawCardUCC">
        </bean>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundPathPlanStuff" class="java.lang.Object" lazy-init="false"
              depends-on="displayableDumpGoalNotification,
                undergroundFSMManager,
                navigationGraphSynchronizer,
                registerInversionService,
                registerUndergroundAssignmentService"/>
    </condbean:cond>

    <condbean:cond privilege="Underground Reporting">
        <bean id="undergroundReportingStuff" class="java.lang.Object" lazy-init="false"
              depends-on="registerUndergroundReportingService"/>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundSensorStuff" class="java.lang.Object" lazy-init="false"
              depends-on="registerSensorService"/>
    </condbean:cond>

    <condbean:cond privilege="Underground">
        <bean id="undergroundShiftChangeStuff" class="java.lang.Object" lazy-init="false"
              depends-on="registerUndergroundShiftChangeService"/>
    </condbean:cond>

    <bean id="panelDataStuff" class="java.lang.Object" lazy-init="false"
          depends-on="registerPanelDataServiceImpl"/>


    <!--    Rasters  -->

    <bean id="rasterConfigDao" class="minestar.mine.persistence.minemodel.RasterConfigDaoImpl"
          lazy-init="true">
        <property name="notification" ref="notification"/>
        <property name="sequenceValueService" ref="sequenceValueServiceImpl"/>
        <property name="speedoBean" ref="speedo"/>
    </bean>

    <bean id="rasterServiceImpl" class="minestar.mine.service.minemodel.rasters.RasterServiceImpl"
          lazy-init="false">
        <property name="rasterConfigDao" ref="rasterConfigDao"/>
        <property name="notification" ref="notification"/>
        <property name="txManager" ref="minestarTransactionManager"/>
    </bean>

    <bean id="registerRasterService" parent="registrationInstance" lazy-init="true">
        <constructor-arg value="Raster Config Service"/>
        <constructor-arg value="minestar.mine.service.minemodel.rasters.RasterService"/>
        <constructor-arg ref="rasterServiceImpl"/>
    </bean>

</beans>
