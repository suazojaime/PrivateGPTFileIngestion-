<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="minestar.health.domain.metadata" schema="model">

    <!-- MeasureDescriptor root -->
    <class name="HistogramDef" table="HIST_DEF">
        <meta attribute="noDatabaseMetadata" inherit="false">true</meta>
        <meta attribute="lookupExpr" inherit="false">name</meta>

        <meta attribute="table">
            tablespace=MW_OBJ
        </meta>
        <meta attribute="primary-key">
            tablespace=MW_IDXOBJ
        </meta>

        <meta attribute="view-create-order">2</meta>
        <meta attribute="viewproperty-unitName" inherit="false">
            type=string
            expression=lookupResource.histogram.unitName.query
        </meta>
        <meta attribute="viewproperty-cellUnitName" inherit="false">
            type=string
            expression=lookupResource.histogram.cellUnitName.query
        </meta>
        <meta attribute="viewproperty-channeloid" inherit="false">
            type=string
            expression=lookupResource.histogram.channeloid.query
        </meta>
        <meta attribute="viewproperty-channel_n" inherit="false">
            type=string
            expression=lookupResource.histogram.channel_n.query
        </meta>
        <meta attribute="viewproperty-channelgroupoid" inherit="false">
            type=string
            expression=lookupResource.histogram.channelgroupoid.query
        </meta>
        <meta attribute="viewproperty-channelgroup_n" inherit="false">
            type=string
            expression=lookupResource.histogram.channelgroup_n.query
        </meta>


        <id name="oid" type="string" column="OID">
            <generator class="assigned"/>
        </id>

        <property name="id" type="long" column="HIST_ID"/>
        <property name="family" type="string" column="FAMILY" length="32"/>
        <property name="name" type="string" column="NAME" length="64"/>
        <property name="alternateName" type="string" column="ALTNAME" length="64"/>
        <property name="description" type="string" column="DESCRIPTION" length="254"/>
        <property name="unitType" type="string" column="UNIT_TYPE" length="64"/>
        <property name="cellUnitType" type="string" column="CELL_UNIT_TYPE" length="64"/>

        <many-to-one name="measure" class="minestar.health.api.definition.Measure" column="MEASURE_OID" lazy="false" />
        <many-to-one name="condition" class="minestar.health.api.definition.ConditionDef" column="CONDITION_OID" not-null="false" lazy="false" />

        <property name="universeClassName" type="string" column="CLASSNAME" length="256"/>

        <list name="cells" inverse="true" cascade="all-delete-orphan" lazy="false" >
            <key column="HIST_ID"/>
            <index column="CELL_NUMBER"/>
            <one-to-many class="HistogramCellDef"/>
        </list>

    </class>
</hibernate-mapping>
